error_counter = 0;
@on_error
error_counter++;
if(error_counter > 1) {
	snuvi.debug("Error Handler activated");
	if(event == "custom_command") {
		set.add(failed_cmds, command);
		goto("wait");
	}
	snuvi.debug("Restarting script...");
	error_counter++;
	if(error_counter >= 3) {
		snuvi.debug("Script terminated. Endless loop.");
		term();
	}
}

waitfor(5); //Verhindert Endlos-Schleife durch "/start commands"

setCommandHelps();
command.clear();

//--- Register commands not shown on /help here ---
//command.add("hack");
//Games
//command.add("nextplayer");
//command.add("invstats");
//command.add("topinvstats");
//command.add("removeinvstats");
//command.add("sfstats");
//command.add("topsfstats");
//command.add("removesfstats");
//command.add("questanswer");
//command.add("infopoint1");
//command.add("infopoint2");
//command.add("infopoint3");
//command.add("infopoint4");
//command.add("infopoint5");
//command.add("infopoint6");
//command.add("infopoint7");
//command.add("infopoint8");
//command.add("infopoint9");
//command.add("infopoint10");
//command.add("infopoint11");
//command.add("infopoint12");
//Vanilla überschreiben
command.add("help");
//command.add("butcher");

//--- Register commands shown on /help here ---
alias_map = map.new();
command_list = list.new();
command_map = map.new();
command.register("afk", "Toggles afk");
//command.register("allsounds", "Plays all sounds");
command.register("answer", "Answers the last private message");
//command.register("ass", "Armor Stand Signs");
command.register("back", "Teleports to the last position");
command.register("ban", "Bans a player");
//command.register("boost", "Boosts you up to the clouds");
//command.register("bug", "Report a bug");
//command.register("clan", "Clan-Commands");
//command.register("cli", "Clears items in a radius");
command.register("color", "Shows all colors");
command.register("coords", "Shows infos for the targeted block");
//command.register("copyisland", "Copyisland-Commands");
//command.register("creative", "Teleports to creative-spawn");
command.register("databank", "Databank-Commands");
command.register("datatools", "Datatools-Commands");
//command.register("enchant", "Enchants an item in your hand");
//command.register("enderchest", "Shows enderchests");
//command.register("entities", "Lists all entities in a world");
command.register("error", "Error-Logger");
//command.register("errordebug", "Debug-Logger");
//command.register("feed", "Fills hunger bar");
command.register("fly", "Toggles fly");
//command.register("friend", "Friend-Commands");
//command.register("game", "marvs minigame shit");
command.register("gamemode", "Change gamemode");
command.register("gamerule", "Manage gamerules");
//command.register("games", "Teleports to games-spawn");
//command.register("giveup", "Giveup a quest");
//command.register("grow", "Grow seeds");
//command.register("hat", "Be fame with a new hat");
//command.register("hawkeye", "Rollback griefings");
//command.register("head", "Gives you a player's head");
command.register("heal", "Heals, fills hunger bar and remove effects");
command.register("home", "Manage your homes");
//command.register("live", "Toggles Live-Mode");
//command.register("lag", "Executes a lag test");
//command.register("leave", "Leave a minigame");
//command.register("human", "Human-Commands");
//command.register("inv", "Inv-Commands");
command.register("iteminfo", "Returns information about an item");
//command.register("jail", "Sends a player to jail");
//command.register("jumpto", "Jumps to a block in sight");
command.register("kick", "Kicks a player");
//command.register("lastseen", "Shows the last players online");
//command.register("lightning", "Summons a lightning_bolt");
//command.register("list", "List all players online");
//command.register("mail", "Mail-Commands");
//command.register("mailbox", "Mailbox-Commands");
//command.register("memory", "Returns RAM-usage");
command.register("msg", "Send a private message");
command.register("mute", "Mutes a player");
//command.register("news", "Send Push-News to all players");
command.register("nickname", "Set a nickname");
//command.register("nowb", "Sends no 'is back' message if afk");
//command.register("party", "Party-Commands");
command.register("perm", "Manage permissions");
//command.register("plant", "Plant seeds");
//command.register("playtime", "Shows your playtime");
//command.register("plot", "Plot-Commands");
//command.register("plough", "Plough dirt around you");
command.register("pvp", "Toggles pvp");
//command.register("quest", "Quest-Commands");
command.register("rank", "Shows your available ranks");
//command.register("repair", "Repairs your item in mainhand");
//command.register("report", "Report whatever you want");
//command.register("ride", "Rides an entity");
//command.register("say", "[Server] chat message");
command.register("script", "Script-Commands");
//command.register("seen", "Returns the last date the player was online");
command.register("senditem", "Sends an itemstack to another player");
//command.register("setmessage", "Set your join/leave-message");
//command.register("setrank", "");
//command.register("setservermessage", "Sets the server-message in the serverlist");
command.register("setspawn", "Changes a spawn");
//command.register("shop", "Shop-Commands");
command.register("sign", "Edit a sign");
//command.register("silentban", "Silently bans a player");
//command.register("silentjoin", "Toggled Silentjoins");
//command.register("silentkick", "Silently kicks a player");
//command.register("skills", "Shows all skills");
command.register("spawn", "Teleports to spawn");
command.register("speed", "Sets your speed");
command.register("start", "Starts a script");
//command.register("startgame", "Reduces start-countdown for a minigame");
//command.register("stats", "Statistics-Commands");
//command.register("stopadventure", "Stops an adventure");
//command.register("story", "Teleports to story-spawn");
//command.register("suicide", "Kill yourself");
command.register("teleport", "Teleports a player to a player");
command.register("tempban", "Bans a player temporarly");
//command.register("tempfly", "Let a player temporarly fly");
//command.register("ticket", "Ticket-Commands");
command.register("time", "Time-Commands");
//command.register("tip", "Tip-Commands");
//command.register("top", "Teleports to to highest point at the current position");
command.register("tpa", "Sends a teleport request to a player");
command.register("tpahere", "Sends a teleport request to a player");
command.register("tpaccept", "Accepts a teleport request");
command.register("tpaccepthere", "Accepts a teleport request");
command.register("tppos", "Teleports to coordinates");
command.register("unban", "Unbans a player");
//command.register("unjail", "Releases a player from jail");
command.register("unmute", "Unmutes a player");
//command.register("user", "Returns infos about a user");
//command.register("vanish", "Vanishes a player");
command.register("var", "Reads variables from a scripts");
//command.register("vote", "Show vote links");
//command.register("voteshop", "Show vote rewars");
//command.register("voxel", "Set radius for voxel");
//command.register("warn", "Warns a player");
command.register("warp", "Warp-Commands");
command.register("weather", "Weather-Commands");
command.register("world", "World-Commands");
//command.register("yeet", "Throws you in sight");

/*command.registerAlias("afklo", "afk");
command.registerAlias("itemdb", "iteminfo");
command.registerAlias("ha", "hawkeye");
command.registerAlias("skull", "head");
command.registerAlias("skick", "silentkick");
command.registerAlias("sban", "silentban");
command.registerAlias("tell", "msg");
command.registerAlias("r", "answer");
command.registerAlias("pardon", "unban");
command.registerAlias("j", "jumpto");
command.registerAlias("mimimi", "help");
command.registerAlias("ci", "copyisland");
command.registerAlias("mem", "memory");
command.registerAlias("tp", "teleport");
command.registerAlias("homes", "home");
command.registerAlias("colour", "color");
command.registerAlias("gm", "gamemode");
command.registerAlias("p", "plot");
command.registerAlias("coord", "coords");
command.registerAlias("dt", "datatools");
command.registerAlias("f", "friend");
command.registerAlias("l", "leave");
command.registerAlias("v", "vanish");
command.registerAlias("hub", "leave");
command.registerAlias("fuckit", "giveup");
command.registerAlias("ram", "memory");
command.registerAlias("thor", "lightning");*/

//composter_par = particle.get("composter");
wall_signs_tag = block.getTag("minecraft:wall_signs");
beds_tag = block.getTag("minecraft:beds");
chest_tag = block.getTag("forge:chests");
sign_tag = block.getTag("minecraft:signs");
dirt_tag = block.getTag("forge:dirt");
//gamesspawn = world.getGamesSpawn();
serverspawn = world.getServerSpawn();
prefix_clan = "§2Clan";
prefix_tips = "§eTips";
prefix_lock = "§eLock";
prefix_hawkeye = "§cHawkeye";
prefix_commands = "§6Commands";
prefix_vote = "§dVote";
prefix_friends = "§5Friends";
prefix_world = "§bWorld";
prefix_jail = "§5Jail";
prefix_quest = "§dQuest";
prefix_perms = "§6Perms";
prefix_datatools = "§6DataTools";
prefix_human = "§6Human";
prefix_plot = "§dPlots";
prefix_party = "§5Party";
prefix_skill = "§2Skill";

party_ids = getScriptVar("party_ids");
if(party_ids == null) {
	party_ids = map.new();
	setScriptVar("party_ids", map.new()); //Player, partyid
}
party_lists = getScriptVar("party_lists");
if(party_lists == null) {
	party_lists = map.new();
	setScriptVar("party_lists", map.new()); //partyid, Liste mit Players aller Partymitglieder
}
party_ranks = getScriptVar("party_ranks");
if(party_ranks == null) {
	party_ranks = map.new();
	setScriptVar("party_ranks", map.new()); //Player, "leader"/"mod"/"player"
}
party_counter = getScriptVar("party_counter");
if(party_counter == null) {
	party_counter = 0;
	setScriptVar("party_counter", party_counter); //Player, partyid
}
delkeytime = list.new(); //Alle Zeitpunkte zum Löschen der Einladungen (Vergleichsliste)
delkeytimes = map.new(); //Player_uuid, Liste mit Zeitpunkten zum Löschen der Einladungen
deluuid = list.new(); //Alle Player_uuids zum Löschen der Einladungen
party_invitations = map.new(); //Player_uuid, Liste mit Player_uuids aller Einlader
party_invite_ids = map.new(); //Player_uuid, partyid

list = getScriptVar("block_commands_list");
if(list == null) {
	list = list.new();
	setScriptVar("block_commands_list", list);
}

live_set = getScriptVar("live_set");
if(live_set == null) {
	live_set = set.new();
	setScriptVar("live_set", live_set);
} else {
	//Register all Live-Players again
	iter = set.iterator(live_set);
	while(hasNext(iter)) {
		player = player.get(next(iter));
		if(player != null) {
			player.setLive(player, true);
		}
	}
}

afk_loop_active = false;
afk_map = getScriptVar("afk_map");
if(afk_map == null) {
	afk_map = map.new();
	setScriptVar("afk_map", afk_map);
} else {
	//Alle Spieler, die AFK waren, wieder als AFK registrieren
	iter = map.iterator(afk_map);
	while(hasNext(iter)) {
		element = next(iter);
		player = player.get(map.getKey(element));
		if(player != null) {
			player.setAfk(player, true);
			afk_loop_active = true;
		}
	}
}
if(afk_loop_active) {
	//sgoto(30, "afk_loop");
}

setScriptVar("ha_data_lists", map.new());
setScriptVar("ha_undo_lists", map.new());
money.setBoostFactor(1);

//sgoto(100, "coordsloop");
//sgoto(1200, "afk_checker_loop");
//sgoto(1200, "minute_loop");

lag_list = list.new();
clan_invitations = list.new();
friend_requests = map.new();
lock_chests = map.new();
chatbuffer = map.new();
tpa_request = list.new();
answer_map = map.new();
plotpos1 = map.new();
plotpos2 = map.new();
invseeids = set.new();
ride_set = set.new();
fields = set.new();
vanish_set = set.new();
failed_cmds = set.new();
skip_night_set = set.new();
afk_checker_map = map.new();

butcher_set = set.new();
set.add(butcher_set, "zombie");
set.add(butcher_set, "zombie_villager");
set.add(butcher_set, "husk");
set.add(butcher_set, "skeleton");
set.add(butcher_set, "creeper");
set.add(butcher_set, "enderman");
set.add(butcher_set, "pillager");
set.add(butcher_set, "spider");
set.add(butcher_set, "phantom");
set.add(butcher_set, "witch");
set.add(butcher_set, "stray");
set.add(butcher_set, "drowned");
set.add(butcher_set, "wither");
set.add(butcher_set, "silverfish");
set.add(butcher_set, "zombified_piglin");
set.add(butcher_set, "cod");
set.add(butcher_set, "guardian");

attribut_set = set.new();
set.add(attribut_set, "generic.armor");
set.add(attribut_set, "generic.armor_toughness");
set.add(attribut_set, "generic.attack_damage");
set.add(attribut_set, "generic.knockback_resistance");
set.add(attribut_set, "generic.max_health");
set.add(attribut_set, "generic.movement_speed");
set.add(attribut_set, "generic.attack_speed");
set.add(attribut_set, "generic.luck");

not_blocked_cmd = set.new();
set.add(not_blocked_cmd, "leave");
set.add(not_blocked_cmd, "ban");
set.add(not_blocked_cmd, "silentban");
set.add(not_blocked_cmd, "kick");
set.add(not_blocked_cmd, "silentkick");
set.add(not_blocked_cmd, "warn");
set.add(not_blocked_cmd, "tempban");
set.add(not_blocked_cmd, "mute");
set.add(not_blocked_cmd, "unmute");
set.add(not_blocked_cmd, "unban");
set.add(not_blocked_cmd, "tip");
set.add(not_blocked_cmd, "var");
set.add(not_blocked_cmd, "quest");
set.add(not_blocked_cmd, "msg");
set.add(not_blocked_cmd, "help");

rank_array = array.new(25, 2);
//Playtime
rank.add(0, "rank.owner", "4Owner");
rank.add(1, "rank.admin", "cAdmin");
rank.add(2, "rank.moderator", "9Moderator");
rank.add(3, "rank.supporter", "bSupporter");
rank.add(4, "rank.dev", "5Developer");
rank.add(5, "rank.builder", "5Builder");
rank.add(6, "rank.vip", "dVIP");
rank.add(7, "rank.influencer", "dInfluencer");
rank.add(8, "rank.sponsor", "dSponsor");
rank.add(9, "rank.legend", "2Legend");
rank.add(10, "rank.pioneer", "2Pioneer");
rank.add(11, "rank.lord", "2Lord");
rank.add(12, "rank.altruist", "2Altruist");
rank.add(13, "rank.major", "2Major");
rank.add(14, "rank.frequenter", "6Frequenter");
rank.add(15, "rank.explorer", "6Explorer");
rank.add(16, "rank.chief", "6Chief");
rank.add(17, "rank.friend", "6Friend");
rank.add(18, "rank.colonizer", "6Colonizer");
rank.add(19, "rank.newcomer", "eNewcomer");
rank.add(20, "rank.adventurer", "eAdventurer");
rank.add(21, "rank.commander", "eCommander");
rank.add(22, "rank.volunteer", "eVolunteer");
rank.add(23, "rank.settler", "eSettler");
rank.add(24, "rank.user", "3User");
setScriptVar("ranks", rank_array);

month_array = array.new(12, 2);
month.add(0, "Jan", 31);
month.add(1, "Feb", 28);
month.add(2, "Mar", 31);
month.add(3, "Apr", 30);
month.add(4, "May", 31);
month.add(5, "Jun", 30);
month.add(6, "Jul", 31);
month.add(7, "Aug", 31);
month.add(8, "Sep", 30);
month.add(9, "Oct", 31);
month.add(10, "Nov", 30);
month.add(11, "Dec", 31);

jailed_list = list.new();
ironbars = item.new(material.get("minecraft:iron_bars"), 1, "§r");
jailmenu = inv.new("222222222", text.new("§8Jail"));
inv.setItem(jailmenu, 0, ironbars);
inv.setItem(jailmenu, 1, ironbars);
inv.setItem(jailmenu, 2, ironbars);
inv.setItem(jailmenu, 3, ironbars);
inv.setItem(jailmenu, 4, ironbars);
inv.setItem(jailmenu, 5, ironbars);
inv.setItem(jailmenu, 6, ironbars);
inv.setItem(jailmenu, 7, ironbars);
inv.setItem(jailmenu, 8, ironbars);

skip_night_inv = inv.new("002020200", text.new("Skip Night?"));
//inv.setItem(skip_night_inv, 0, item.new(material.get("km:check_green"), 1, "§fYes"));
//inv.setItem(skip_night_inv, 1, item.new(material.get("km:gem_stone"), 1, "§fI don't care"));
//inv.setItem(skip_night_inv, 2, item.new(material.get("km:cross_red"), 1, "§fNo"));
skip_night_inv_id = inv.getId(skip_night_inv);

//vote_inv = inv.new("222222222", text.new("§8Jail"));
//inv.setItem(vote_inv, 0, item.new(material.get("km:coin_gold"), 1, "§aMoney Booster", "§fCost: §e6 VP", "Doubles incoming money for 10 minutes."));
//inv.setItem(vote_inv, 1, item.new(material.get("minecraft:jukebox"), 1, "§aRick is in the house", "§fCost: §e2 VP", "Rickroles every player on the server."));
//updateVoteInv();
//vote_inv_id = inv.getId(vote_inv);

//ha_tool = item.new(material.get("km:guild_block"), 1, "§cHawkeye Tool", "Hawkeye Tool");

consoleCommands = set.new();
set.add(consoleCommands, "answer");
set.add(consoleCommands, "ban");
set.add(consoleCommands, "kick");
set.add(consoleCommands, "lastseen");
set.add(consoleCommands, "list");
set.add(consoleCommands, "msg");
set.add(consoleCommands, "say");
set.add(consoleCommands, "silentban");
set.add(consoleCommands, "silentkick");
set.add(consoleCommands, "start");
set.add(consoleCommands, "tempban");
set.add(consoleCommands, "tempfly");
set.add(consoleCommands, "unban");

//databank.workerExecute(databank.prepare("CREATE TABLE IF NOT EXISTS friends (player_id INT NOT NULL, friend_id INT NOT NULL, time BIGINT NOT NULL, PRIMARY KEY (player_id, friend_id), FOREIGN KEY (player_id) REFERENCES minecraft.players(id) ON DELETE RESTRICT);"));
//databank.workerExecute(databank.prepare("CREATE TABLE IF NOT EXISTS logoutdata (player_id INT NOT NULL PRIMARY KEY, logouttime BIGINT, FOREIGN KEY (player_id) REFERENCES minecraft.players(id) ON DELETE RESTRICT);"));
//databank.workerExecute(databank.prepare("CREATE TABLE IF NOT EXISTS tipps (tipp_key VARCHAR(20) PRIMARY KEY, tipp_value VARCHAR(255), tipp_loop BOOLEAN NOT NULL DEFAULT true);"));
//databank.workerExecute(databank.prepare("CREATE TABLE IF NOT EXISTS plotranks (plot_id INT NOT NULL, player_id INT NOT NULL, rank VARCHAR(10), PRIMARY KEY (plot_id, player_id), FOREIGN KEY (player_id) REFERENCES minecraft.players(id) ON DELETE RESTRICT);"));
//databank.workerExecute(databank.prepare("CREATE TABLE IF NOT EXISTS homes (player_id INT NOT NULL, name VARCHAR(20) NOT NULL, world_name VARCHAR(20) NOT NULL, x DOUBLE NOT NULL, y DOUBLE NOT NULL, z DOUBLE NOT NULL, yaw DOUBLE NOT NULL, pitch DOUBLE NOT NULL, PRIMARY KEY (player_id, name), FOREIGN KEY (player_id) REFERENCES minecraft.players(id) ON DELETE RESTRICT);"));

last_skip_night = 0;
skip_night_started = false;
jail_loop_active = false;

actual_move_id = map.new(); //Key: player_uuid, Value: move_id. Diese Map speichert das aktuell betretene Plot eines Spielers.
plot_move_ids_list = list.new(); //Speichert Array mit plot_id und move_id
check_for_plot_list = list.new();
plot.registerMoveEvents(world.get("overworld"));
plot.registerMoveEvents(world.get("the_nether"));
plot.registerMoveEvents(world.get("the_end"));
plot.registerMoveEvents(world.get("creative"));

RickRollSounds = getRickRollSounds();
RickRollSoundDists = getRickRollSoundDists();
rick_sounds_amount = list.getSize(RickRollSoundDists);

sound_category_master = sound.getCategory("MASTER");
sound_flute = sound.get("BLOCK_NOTE_BLOCK_FLUTE");
sound_harp = sound.get("BLOCK_NOTE_BLOCK_HARP");
sound_pling = sound.get("BLOCK_NOTE_BLOCK_PLING");

event_map = map.new(); //für hawkeye
map.add(event_map, 1, "block_break");
map.add(event_map, 2, "block_place");

//event.load("entity_click");
//event.load("player_move");
//event.load("inv_click");
//event.load("inv_close");
//event.load("function_key");
event.load("missing_perm");
event.load("missing_command");
event.load("custom_command");
//event.load("block_click");
//event.load("player_logout");
//event.load("player_data_tick");
//event.load("vote");

msg("dev", text.new("§bCommands §rloaded."));
@wait
wait();
if(event == "custom_command") {
	//Permission-Check
	command = text.toLowerCase(command);
	command = map.getOrDefault(alias_map, command, command);
	size = list.getSize(args);
	if(!isPlayer(sender)) {
		if(!set.contains(consoleCommands, command)) {
			msg.text("SERVER", "Sorry. Not a console command yet. Go and tell marvinius.");
			goto("wait");
		}
		goto("wait");
	}
	if(!perm.has(sender, command)) {
		perm.no(sender, command);
		goto("wait");
	}
	if(set.contains(failed_cmds, command)) {
		msg.prefix(sender, prefix_commands, "§cCommand temporarly deactivated due to failure.");
		goto("wait");
	}
	if(player.isCommandBlocked(sender)) {
		if(!set.contains(not_blocked_cmd, command)) {
			msg.prefix(sender, prefix_commands, "The most important rule in competition: Sabotage!");
			goto("wait");
		}
	}
	ignoreGoto(command);
	goto("wait");
}
if(event == "vote") {
	p_uuid = player.getUuid(name);
	if(p_uuid != null) {
		p_id = player.getId(p_uuid);
		player.addVotePoints(p_id, 1);
		msg.prefix("online", prefix_vote, concat("§b", name, "§r hat gerade gevoted!"));
		if(from == "minecraft-server.eu") {
			msg.text("online", "[", prefix_vote, "§r] " , text.link("minecraft-server.eu", "https://minecraft-server.eu/vote/index/2227F"));
		} else {
			msg.text("online", "[", prefix_vote, "§r] " , text.link("minecraft-server-list.com", "https://minecraft-server-list.com/server/478200/vote/"));
		}
		now_time = time.getMillis();
		new_streak = player.getVoteStreak(p_id);
		if(isFollowingDay(now_time, player.getLastVoteTime(p_id))) {
			new_streak++;
		}
		if(new_streak == 14) {
			new_streak = 0;
			msg.survival(prefix_vote, concat(player.getName(p_uuid), " reached a votestreak of 14 and each player online (survival) gets a sapphire."));
			sapphire = item.getSapphire();
			world.giveItem(world.getOverWorld(), sapphire);
			world.giveItem(world.getTheNether(), sapphire);
			world.giveItem(world.getTheEnd(), sapphire);
		}
		player.setVoteStreak(p_id, new_streak);
		player.setLastVoteTime(p_id, now_time);
	}
	goto("wait");
}
if(event == "player_move") {
	player_uuid = player.getUuid(player);
	last_move_id = map.getOrDefault(actual_move_id, player_uuid, null);
	if(last_move_id == id) {
		goto("wait");
	}
	world = loc.getWorld(entity.getLocation(player));
	plot_id = plot.getPlotIdFromMoveId(id);
	plot = plot.getFromId(plot_id, world);
	if(plot == null) {
		goto("wait");
	}
	if(plot.isCity(plot)) {
		color_code = "§c";
	} else {
		color_code = "§e";
	}
	title.reset(player);
	title.setSub(player, concat("You entered ", color_code, plot.getName(plot), "."));
	title.send(player, "");
	map.add(actual_move_id, player_uuid, id);
	list.add(check_for_plot_list, player_uuid);
	sgoto(100, "checkForPlot");
	goto("wait");
}
if(event == "block_click") {
	world_name = world.getName(loc.getWorld(entity.getLocation(player)));
	if(action == "right" && !world.isSurvName(world_name) && block.hasTag(beds_tag, block)) {
		cancel = true;
		goto("wait");
	}
	if(perm.has(player, "plot.bypass")) {
		goto("wait");
	}
	if(block.hasTag(chest_tag, block)) {
		sign_loc = loc.mod(block_loc, 0, 1, 0);
		if(isAWallSign(sign_loc) && isAdminShop(sign_loc)) {
			cancel = true;
			goto("wait");
		}
		if(plot.check(block_loc, player, 16, true)) {
			cancel = false;
			goto("wait");
		}
		player_id = player.getId(player);
		player_uuid = player.getUuid(player);
		list = plot.get(block_loc);
		if(list.getSize(list) > 0) {
			iter = list.iterator(list);
			access = false;
			while(hasNext(iter)) {
				plot = next(iter);
				canOpenChests = plot.canOpenChests(plot, player_id);
				if(plot.isSub(plot)) {
					if(canOpenChests) {
						cancel = false;
						goto("wait");
					}
					cancel = true;
					msg.prefix(player, prefix_plot, "This chest is locked for you.");
					goto("wait");
				}
				if(canOpenChests) {
					access = true;
					cancel = false;
				}
			
			}
			if(!access) {
				msg.prefix(player, prefix_plot, "This chest is locked for you.");
			}
		}
		goto("wait");
	}
	if(action == "right" && block.hasTag(sign_tag, block)) {
		line0 = block.getSign(block_loc, 0);
		if(line0 != "§3[§bFree Plot§3]") {
			goto("wait");
		}
		price = text.convert(removeFormat(block.getSign(block_loc, 1)));
		if(!isDouble(price) || price < 0) {
			msg.prefix(player, prefix_plot, "Positive number expected.");
			goto("wait");
		}
		p_id = text.convert(block.getSign(block_loc, 3));
		if(!isDouble(p_id)) {
			msg.prefix(player, prefix_plot, "Invalid city owner.");
			goto("wait");
		}
		if(player.getNameFromId(p_id) == null) {
			msg.prefix(player, prefix_plot, "Invalid city owner.");
			goto("wait");
		}
		if(!hasEnoughMoney(player, price)) {
			msg.prefix(player, prefix_plot, concat("You'll need §6", text.number(price), "§r snuvis for this."));
			goto("wait");
		}
		plot_list = plot.get(block_loc);
		iter = list.iterator(plot_list);
		while(hasNext(iter)) {
			plot = next(iter);
			if(plot.isFree(plot)) {
				break;
			}
		}
		if(!plot.isFree(plot)) {
			msg.prefix(player, prefix_plot, "You aren't on a free plot.");
			goto("wait");
		}
		//Plot claimen
		subMoney(player, price);
		addMoney(p_id, price);
		plot.setSub(plot, true);
		plot.setLeader(plot, player.getId(player));
		player_name = player.getName(player);
		plot.addPlayer(plot, player_name);
		plot.setName(plot, concat(player_name, "'s plot"));
		msg.prefix(player, prefix_plot, concat("Plot claimed. Spent §6", text.number(price), "§r snuvis."));
		goto("wait");
	}
	goto("wait");
}
if(event == "missing_command") {
	msg.prefix(sender, prefix_commands, concat("No command ", command));
	goto("wait");
}
if(event == "player_logout") {
	map.remove(afk_checker_map, uuid);
	player.setAfk(player, false);
	list.remove(jailed_list, player.getUuid(player));
	if(player.hasQuest2(player)) {
		script_id = quest.getFromPlayer(player);
		script = script.getFromId(script_id);
		if(script == null) {
			snuvi.debug("Player logged out with corrupt quest");
			quest.removePlayer(player); //in case of corrupt quest
			goto("wait");
		}
		setScriptVar("player", player);
		modTimer.scriptCallEvent("quest_term", script);
		quest.term(script, player);
	}
	if(player.isInParty(player)) {
		party.kickPlayer(player, "logout");
	}
	goto("wait");
}
if(event == "missing_perm") {
	perm.no(sender, command);
	goto("wait");
}
if(event == "entity_click") {
	player_uuid = player.getUuid(player);
	if(set.contains(ride_set, player_uuid)) {
		set.remove(ride_set, player_uuid);
		entity.mount(player, entity);
	}
	goto("wait");
}
if(event == "inv_click") {
	//mailbox
	if(text.startsWith(inv_name, "Mailbox", 0)) {
		if(player.isOnAdventure(player)) {
			msg.prefix(player, prefix_commands, "You can't use the mailbox while on adventure.");
			goto("wait");
		}
		if(click_type == "QUICK_MOVE") {
			if(perm.has(player, "mailbox.other")) {
				//Clone item
				player.safeGiveItem(player, item);
				inv.update(player);
				goto("wait");
			}
		}
		//Take item
		player.safeGiveItem(player, item);
		inv.setItem(inv, inv_slot, item.getAir());
		inv.update(player);
		split_list = text.split(" ", inv_name);
		p_name = list.getIndex(split_list, 2);
		p_uuid = player.getUuid(p_name);
		if(p_uuid == null) {
			inv.close(player);
			msg.prefix(player, prefix_commands, "Mailbox closed. Unknown player.");
			goto("wait");
		}
		p_id = player.getId(p_uuid);
		mailbox.setItem(p_id, inv_slot, item.getAir());
		goto("wait");
	}
	//inv see
	if(set.contains(invseeids, inv_id)) {
		//On inv_click in an invsee inventory
		split_list = text.split(" ", inv_name);
		p_name = list.getIndex(split_list, 2);
		p = read.player(p_name);
		if(p == null) {
			inv.close(player);
			msg.prefix(sender_name, prefix_commands, "This player is no longer online. Use /inv load <player> and /inv save <player> to overwrite an offline player's inventory.");
			goto("wait");
		}
		if(click_type == "QUICK_MOVE") {
			//Clone item
			player.safeGiveItem(player, item);
			inv.update(player);
			goto("wait");
		}
		//Transmit item
		player.removeItem(p, item);
		player.safeGiveItem(player, item);
		inv.setItem(inv, inv_slot, read.item("minecraft:air"));
		inv.update(player);
		goto("wait");
	}
	if(inv_id == vote_inv_id) {
		if(inv_slot == 0) {
			if(money.getBoostFactor() > 1) {
				msg.prefix(player, prefix_commands, "Boost already active.");
				goto("wait");
			}
			vp = player.getVotePoints(player);
			if(vp < 6) {
				msg.prefix(player, prefix_commands, "Not enough vote points.");
				goto("wait");
			}
			player.setVotePoints(player, vp - 6);
			msg.online(prefix_vote, concat(player.getName(player), " activated §dMoney Booster§r."));
			money.setBoostFactor(2);
			status.addTimed("online", 56, 12000, "Money Booster");
			sgoto(12000, "resetMoneyBoost");
			goto("wait");
		}
		if(inv_slot == 1) {
			vp = player.getVotePoints(player);
			if(vp < 2) {
				msg.prefix(player, prefix_commands, "Not enough vote points.");
				goto("wait");
			}
			msg.online(prefix_vote, concat(player.getName(player), " activated §dRick is in the house§r."));
			player.setVotePoints(player, vp - 2);
			rickIndex = 0;
			goto("RickRole_play");
		}
		if(inv_slot == 2) {
			vp = player.getVotePoints(player);
			if(vp < 1) {
				msg.prefix(player, prefix_commands, "Not enough vote points.");
				goto("wait");
			}
			player.setVotePoints(player, vp - 1);
			increaseHomeBoost();
			inv.update(player);
			msg.online(prefix_vote, concat(player.getName(player), " spend their votepoints to §dMore Homes§r."));
		}
		goto("wait");
	}
	if(inv_id == skip_night_inv_id) {
		world = world.getOverWorld();
		world_time = world.getTime(world);
		while(world_time >= 24000) {
			world_time -= 24000;
		}
		if(world_time <= 12500) {
			goto("wait");
		}
		player_uuid = player.getUuid(player);
		if(set.contains(skip_night_set, player_uuid)) {
			msg.prefix(player, prefix_commands, "Already voted.");
			goto("wait");
		}
		if(!skip_night_started) {
			world.addTimedStatus(world, 49, 300, "Skip night?");
			msg.survival("[§6Commands§r] Skip night? Vote within 15 seconds.");
			skip_night_counter = 15;
			skip_night_yes = 0;
			skip_night_no = 0;
			skip_night_no_care = 0;
			skip_night_started = true;
			sgoto(20, "skip_night_loop");
		}
		if(inv_slot == 0) {
			skip_night_yes++;
			inv.close(player);
			set.add(skip_night_set, player_uuid);
			goto("wait");
		}
		if(inv_slot == 1) {
			skip_night_no_care++;
			inv.close(player);
			set.add(skip_night_set, player_uuid);
			goto("wait");
		}
		if(inv_slot == 2) {
			skip_night_no++;
			inv.close(player);
			set.add(skip_night_set, player_uuid);
			goto("wait");
		}
		goto("wait");
	}
	if(inv_name == "Skills") {
		if(item.getType(item) == "minecraft:air") {
			goto("wait");
		}
		skill_name = removeFormat(item.getName(item));
		tech_name = skill.getTechName(skill_name);
		//Toggle skills
		if(skill.isToggleable(skill_name)) {
			if(skill.isActivated(player, tech_name)) {
				skill.setActivated(player, tech_name, false);
			} else {
				skill.setActivated(player, tech_name, true);
			}
			inv.setItem(inv, inv_slot, skill.getShopItem(player, tech_name));
			inv.update(player);
			goto("wait");
		}
		//Activate skill
		if(skill.isActive(skill_name)) {
			player_loc = entity.getLocation(player);
			world_name = world.getName(loc.getWorld(player_loc));
			if(!world.isSurvName(world_name)) {
				msg.prefix(player, prefix_skill, "You can't use this in this world.");
				goto("wait");
			}
			if(tech_name == "skill.fire_arrow") {
				duration = data.getTimer(player, tech_name);
				if(duration > 0) {
					msg.prefix(player, prefix_skill, "Skill already active.");
					goto("wait");
				}
				amount = skill.getAmount(player, tech_name);
				if(amount > 0) {
					status.addTimed(player, 54, 1200, skill_name);
					data.setTimer(player, tech_name, 1200);
					new_amount = amount - 1;
					skill.setAmount(player, tech_name, new_amount);
					msg.prefix(player, prefix_skill, concat("Used ", skill_name, ". New amount: ", text.number(new_amount)));
				}
				goto("wait");
			}
			if(tech_name == "skill.timber") {
				duration = data.getTimer(player, "timber");
				if(duration > 0) {
					msg.prefix(player, prefix_skill, "Skill already active.");
					goto("wait");
				}
				amount = skill.getAmount(player, "skill.timber");
				if(amount > 0) {
					status.addTimed(player, 53, 1200, "Timber");
					data.setTimer(player, "timber", 1200);
					new_amount = amount - 1;
					skill.setAmount(player, "skill.timber", new_amount);
					msg.prefix(player, prefix_skill, concat("Used Timber. New amount: ", text.number(new_amount)));
				}
				goto("wait");
			}
			if(tech_name == "skill.fly10min") {
				duration = data.getTimer(player, "fly");
				if(duration > 0) {
					msg.prefix(player, prefix_skill, "Skill already active.");
					goto("wait");
				}
				amount = skill.getAmount(player, "skill.fly10min");
				if(amount > 0) {
					status.addTimed(player, 50, 12000, "Fly");
					data.setTimer(player, "fly", 12000);
					player.setFly(player, true);
					new_amount = amount - 1;
					skill.setAmount(player, "skill.fly10min", new_amount);
					msg.prefix(player, prefix_skill, concat("Used Fly 10min. New amount: ", text.number(new_amount)));
				}
				goto("wait");
			}
			if(tech_name == "skill.grow") {
				amount = skill.getAmount(player, "skill.grow");
				if(amount > 0) {
					grow(player_loc, 5);
					particle.spawnCircle(loc.mod(entity.getLocation(player), 0, 0.8, 0), composter_par, 50, 5, 1, 0, 0, 0.2, 0);
					new_amount = amount - 1;
					skill.setAmount(player, "skill.grow", new_amount);
					msg.prefix(player, prefix_skill, concat("Used Grow. New amount: ", text.number(new_amount)));
				}
				goto("wait");
			}
			if(tech_name == "skill.haste") {
				amount = skill.getAmount(player, "skill.haste");
				if(amount > 0) {
					entity.addEffect(player, "haste", 2400, 0);
					new_amount = amount - 1;
					skill.setAmount(player, "skill.haste", new_amount);
					msg.prefix(player, prefix_skill, concat("Used Haste. New amount: ", text.number(new_amount)));
				}
				goto("wait");
			}
			if(tech_name == "skill.speed") {
				amount = skill.getAmount(player, "skill.speed");
				if(amount > 0) {
					entity.addEffect(player, "speed", 2400, 0);
					new_amount = amount - 1;
					skill.setAmount(player, "skill.speed", new_amount);
					msg.prefix(player, prefix_skill, concat("Used Speed. New amount: ", text.number(new_amount)));
				}
				goto("wait");
			}
			if(tech_name == "skill.jump_boost") {
				amount = skill.getAmount(player, "skill.jump_boost");
				if(amount > 0) {
					entity.addEffect(player, "jump_boost", 2400, 1);
					new_amount = amount - 1;
					skill.setAmount(player, "skill.jump_boost", new_amount);
					msg.prefix(player, prefix_skill, concat("Used Jump Boost. New amount: ", text.number(new_amount)));
				}
				goto("wait");
			}
			if(tech_name == "skill.dolphin") {
				amount = skill.getAmount(player, "skill.dolphin");
				if(amount > 0) {
					entity.addEffect(player, "dolphins_grace", 1200, 0);
					new_amount = amount - 1;
					skill.setAmount(player, "skill.dolphin", new_amount);
					msg.prefix(player, prefix_skill, concat("Used Dolphin. New amount: ", text.number(new_amount)));
				}
				goto("wait");
			}
			if(tech_name == "skill.block_up") {
				duration = data.getTimer(player, "block_up");
				if(duration > 0) {
					msg.prefix(player, prefix_skill, "Skill already active.");
					goto("wait");
				}
				amount = skill.getAmount(player, "skill.block_up");
				if(amount > 0) {
					status.addTimed(player, 51, 1200, "Block Up");
					data.setTimer(player, "block_up", 1200);
					new_amount = amount - 1;
					skill.setAmount(player, "skill.block_up", new_amount);
					msg.prefix(player, prefix_skill, concat("Used Block Up. New amount: ", text.number(new_amount)));
				}
				goto("wait");
			}
			if(tech_name == "skill.block_down") {
				duration = data.getTimer(player, "block_down");
				if(duration > 0) {
					msg.prefix(player, prefix_skill, "Skill already active.");
					goto("wait");
				}
				amount = skill.getAmount(player, "skill.block_down");
				if(amount > 0) {
					status.addTimed(player, 52, 1200, "Block Down");
					data.setTimer(player, "block_down", 1200);
					new_amount = amount - 1;
					skill.setAmount(player, "skill.block_down", new_amount);
					msg.prefix(player, prefix_skill, concat("Used Block Down. New amount: ", text.number(new_amount)));
				}
				goto("wait");
			}
		}
		goto("wait");
	}
	if(inv_name == "§8Settings") {
		if(inv_slot == 0) {
			new_value = !player.getAutoCloseDoor(player);
			player.setAutoCloseDoor(player, new_value);
			inv.setItem(inv, inv_slot, read.item("minecraft:oak_door", 1, "§fAutomatic Doors", new_value));
		}
		elseif(inv_slot == 1) {
			new_value = !player.doesAcceptTpaRequests(player);
			player.acceptTpaRequests(player, new_value);
			inv.setItem(inv, inv_slot, read.item("minecraft:ender_pearl", 1, "§fAccept TPA-Requests", new_value));
		}
		elseif(inv_slot == 2) {
			new_value = !player.getShowcoords(player);
			player.setShowcoords(player, new_value);
			inv.setItem(inv, inv_slot, read.item("minecraft:compass", 1, "§fShow Coords", new_value));
			if(!new_value) {
				display.remove(player, 30);
			}
		}
		elseif(inv_slot == 3) {
			new_value = !player.hasSittingActivated(player);
			player.activateSitting(player, new_value);
			inv.setItem(inv, inv_slot, read.item("minecraft:oak_stairs", 1, "§fStair-Sitting", new_value));
		}
		elseif(inv_slot == 4) {
			new_value = !hasPvpOn(player);
			setPvp(player, new_value);
			inv.setItem(inv, inv_slot, read.item("minecraft:iron_sword", 1, "§fPvP", new_value));
		}
		elseif(inv_slot == 5) {
			new_value = !player.getNoPetDamage(player);
			player.setNoPetDamage(player, new_value);
			inv.setItem(inv, inv_slot, read.item("minecraft:bone", 1, "§fNo Pet Damage", new_value));
		}
		elseif(inv_slot == 6) {
			new_value = !player.getTipLoop(player);
			player.setTipLoop(player, new_value);
			inv.setItem(inv, inv_slot, read.item("minecraft:oak_sign", 1, "§fShow tip loop", new_value));
		}
		inv.update(player);
	}
	goto("wait");
}
if(event == "inv_close") {
	if(set.contains(invseeids, inv_id)) {
		set.remove(invseeids, inv_id);
	}
	goto("wait");
}
if(event == "function_key") {
	if(player.hasMinigame(player)) {
		goto("wait");
	}
	if(key == 1) {
		inv = inv.new("333333333");
		inv.setItem(inv, 0, read.item("minecraft:oak_door", 1, "§fAutomatic Doors", player.getAutoCloseDoor(player)));
		inv.setItem(inv, 1, read.item("minecraft:ender_pearl", 1, "§fAccept TPA-Requests", player.doesAcceptTpaRequests(player)));
		inv.setItem(inv, 2, read.item("minecraft:compass", 1, "§fShow Coords", player.getShowcoords(player)));
		inv.setItem(inv, 3, read.item("minecraft:oak_stairs", 1, "§fStair-Sitting", player.hasSittingActivated(player)));
		inv.setItem(inv, 4, read.item("minecraft:iron_sword", 1, "§fPvP", hasPvpOn(player)));
		inv.setItem(inv, 5, read.item("minecraft:bone", 1, "§fNo Pet Damage", player.getNoPetDamage(player)));
		inv.setItem(inv, 6, read.item("minecraft:oak_sign", 1, "§fShow tip loop", player.getTipLoop(player)));
		inv.open(inv, player, "§8Settings");
		goto("wait");
	}
	if(key == 2) {
		player_loc = entity.getLocation(player);
		world_name = world.getName(loc.getWorld(player_loc));
		if(world.isSurvName(world_name) || world_name == "story") {
			skill.showAll(player, player);
		}
		goto("wait");
	}
	if(key == 3) {
		player_loc = entity.getLocation(player);
		world_name = world.getName(loc.getWorld(player_loc));
		if(!world.isSurvName(world_name)) {
			goto("wait");
		}
		world_time = world.getTime(world.getOverWorld());
		while(world_time >= 24000) {
			world_time -= 24000;
		}
		if(world_time <= 12500) {
			msg.prefix(player, prefix_commands, "Only during night possible.");
			goto("wait");
		}
		player_uuid = player.getUuid(player);
		if(set.contains(skip_night_set, player_uuid)) {
			msg.prefix(player, prefix_commands, "Already voted.");
			goto("wait");
		}
		if(time.getMillis() - last_skip_night < 420000) {
			msg.prefix(player, prefix_commands, "Only once per night possible.");
			goto("wait");
		}
		inv.open(skip_night_inv, player);
		goto("wait");
	}
	goto("wait");
}
if(event == "player_data_tick") {
	if(var == "fly") {
		tpBottom(player);
		player.setFly(player, false);
	}
}
goto("wait");

@mailbox
location = entity.getLocation(player);
world_name = world.getName(loc.getWorld(entity.getLocation(player)));
if(!world.isSurvName(world_name)) {
	msg.prefix(player, prefix_commands, "You can't use this command in this world.");
	goto("wait");
}
if(size == 0) {
	msg.prefix(player, prefix_commands, "/mailbox...");
	if(perm.has(player, "mailbox.other")) {
		msg.text(player, "§6 - show [player] §rOpen a players mailbox.");
	} else {
		msg.text(player, "§6 - show §rOpen your mailbox.");
	}
	msg.text(player, "§6 - send <player> §rSend the item in your mainhand to a mailbox.");
	goto("wait");
}
arg0 = text.toLowerCase(list.getIndex(args, 0));
if(arg0 == "send") {
	if(size != 2) {
		msg.prefix(player, prefix_commands, "/mailbox send <player>");
		goto("wait");
	}
	item = living.getHand(player);
	if(item.getType(item) == "minecraft:air") {
		msg.prefix(player, prefix_commands, "You have to hold an item in your mainhand.");
		goto("wait");
	}
	to_name = list.getIndex(args, 1);
	if(!checkIfEverOnline(to_name)) {
		msg.prefix(player, prefix_commands, "This player has never been online.");
		goto("wait");
	}
	to_player_id = player.getId(player.getUuid(to_name));
	index = mailbox.getFreeIndex(to_player_id);
	if(index == -1) {
		msg.prefix(player, prefix_commands, "No free space in mailbox.");
		goto("wait");
	}
	living.setEquip(player, "hand", item.getAir());
	mailbox.setItem(to_player_id, index, item);
	msg.send(player, to_name, prefix_commands, concat(player.getName(player), " sent you items to your mailbox."), true);
	msg.prefix(player, prefix_commands, "Item sent to player.");
	goto("wait");
}
if(arg0 == "show") {
	if(size == 1) {
		from_player_id = player.getId(player);
	} elseif(size == 2) {
		if(!perm.has(player, "mailbox.other")) {
			perm.no(player, "mailbox.other");
			goto("wait");
		}
		from_name = list.getIndex(args, 1);
		if(!checkIfEverOnline(from_name)) {
			msg.prefix(player, prefix_commands, "This player has never been online.");
			goto("wait");
		}
		from_player_id = player.getId(player.getUuid(from_name));
	} else {
		if(perm.has(player, "mailbox.other")) {
			msg.prefix(player, prefix_commands, "/mailbox show [player]");
		} else {
			msg.prefix(player, prefix_commands, "/mailbox show");
		}
		goto("wait");
	}
	mailbox.show(player, from_player_id);
	goto("wait");
}
goto("wait");

@entities
if(size != 1) {
	msg.prefix(player, prefix_quest, "/entities <world>");
	goto("wait");
}
world_name = text.toLowerCase(list.getIndex(args, 0));
world = world.get(world_name);
if(world == null) {
	msg.prefix(player, prefix_world, "This world is not loaded.");
	goto("wait");
}
list = world.getEntities(world);
size = list.getSize(list);
map = map.new();
living = 0;
for(i = 0; i < size; i++) {
	element = list.getIndex(list, i);
	if(isLiving(element)) {
		living++;
		//living.removeAi(element);
		entity_type = entity.getType(element); 
		n = map.get(map, entity_type);
		if(n == null) {
			map.add(map, entity_type, 1);
		} else {
			map.add(map, entity_type, n + 1);
		}
	}
}
msg.text(player, "§0-------------------------------------------------");
msg.text(player, "Living: ", living);
iter = map.iterator(map);
table = table.new("§b", 14, 14);
msg.text(player, table.getStart(table));
while(hasNext(iter)) {
	element1 = next(iter);
	if(hasNext(iter)) {
		element2 = next(iter);
	} else {
		element2 = "";
	}
	msg.text(player, table.get(table, element1, element2));
}
msg.text(player, table.getEnd(table));
goto("wait");

@RickRole_play
if(rickIndex < rick_sounds_amount) {
	pitch = list.getIndex(RickRollSounds, rickIndex);
	RickSound(pitch);
	ticks = 2 + list.getIndex(RickRollSoundDists, rickIndex);
	sgoto(ticks, "RickRole_play");
}
rickIndex++;
goto("wait");

function RickSound(pitch) {
	iter = list.iterator(players.toList());
	while(hasNext(iter)) {
		online_player = next(iter);
		if(online_player == null) {
			continue;
		}
		sound.spawnForPlayer(online_player, $sound_flute, $sound_category_master, 1, pitch);
		sound.spawnForPlayer(online_player, $sound_harp, $sound_category_master, 1, pitch);
		sound.spawnForPlayer(online_player, $sound_pling, $sound_category_master, 1, pitch);
	}
}

@hack
msg.prefix(player, prefix_commands, "Your pc got hacked now.");
goto("wait");

@resetMoneyBoost
money.setBoostFactor(1);
goto("wait");

@skip_night_loop
skip_night_counter--;
if(skip_night_counter == 0) {
	msg.survival("[§6Commands§r] Skip night results:");
	msg.survival(concat("§e - §rYes: §e", text.number(skip_night_yes)));
	msg.survival(concat("§e - §rNo: §e", text.number(skip_night_no)));
	msg.survival(concat("§e - §rI don't care: §e", text.number(skip_night_no_care)));
	if(skip_night_yes > skip_night_no) {
		world = world.getOverWorld();
		world.setTime(world, 0);
	}
	set.clear(skip_night_set);
	last_skip_night = time.getMillis();
	sgoto(8400, "reset_skip_night");
	goto("wait");
}
sgoto(20, "skip_night_loop");
goto("wait");

@reset_skip_night
skip_night_started = false;
goto("wait");

@skills
//skills [player]
if(size == 0) {
	skill.showAll(player, player);
	goto("wait");
}
if(!perm.has(player, "skills.other")) {
	perm.no(player, "skills.other");
	goto("wait");
}
p_name = list.getIndex(args, 0);
p_uuid = player.getUuid(p_name);
if(p_uuid == null) {
	msg.prefix(player, prefix_tips, "This player has never been online.");
	goto("wait");
}
from_p_id = player.getId(p_uuid);
skill.showAll(from_p_id, player);
goto("wait");

@infopoint1
msg.text(player, getSpacer());
msg.prefix(player, "§eSurvival", "§aEnjoy our modded survival feeling. New ores, items and displays, and we are still beginner friendly.");
goto("wait");

@infopoint2
msg.text(player, getSpacer());
msg.prefix(player, "§eAdventure", "§aSearching for a new challenge? Get teleported thousands of blocks away in the wildness with no inventory and find your way back to spawn.");
goto("wait");

@infopoint3
msg.text(player, getSpacer());
msg.prefix(player, "§ePlots", "§aClaim land and protect your buildings against other players. Use /plot to create and manage your plots.");
goto("wait");

@infopoint4
msg.text(player, getSpacer());
msg.prefix(player, "§eClans", "§aAs a well-known player on our server you can create your own community. By now as a clan you can only create cities.");
goto("wait");

@infopoint5
msg.text(player, getSpacer());
msg.prefix(player, "§eCities", "§aAs a clan leader you can raise your plots to big cities. Create sub-plots and sell them to other players.");
goto("wait");

@infopoint6
msg.text(player, getSpacer());
msg.prefix(player, "§eShops", "§aUse our admin-shop to trade, or create an own shop with /shop. We might do a YT-tutorial on this.");
goto("wait");

@infopoint7
msg.text(player, getSpacer());
msg.prefix(player, "§eMinigames", "§aWe offer a range of different single- and multiplayer games.");
goto("wait");

@infopoint8
msg.text(player, getSpacer());
msg.prefix(player, "§eQuests", "§aYou are nice and helpful? There are lots of tasks to do in the villages.");
goto("wait");

@infopoint9
msg.text(player, getSpacer());
msg.prefix(player, "§eRanking", "§aWanna rise in rank and be the best player in every branch? Look at our ranks.");
goto("wait");

@infopoint10
msg.text(player, getSpacer());
msg.prefix(player, "§eRules", "§aThere is at least one rule: Be respectful. Look at our fake rules.");
goto("wait");

@infopoint11
msg.text(player, getSpacer());
msg.prefix(player, "§eNote", "§aEverything is self-coded. Worldedit is the only external mod we use.");
goto("wait");

@infopoint12
msg.text(player, getSpacer());
msg.prefix(player, "§eNote", "§aBe Creative in our creative world.");
goto("wait");

@party
if(size == 0) {
	@partyhelp
	msg.prefix(player, prefix_party, "/party ...");
	msg.text(player, "§5 - invite <player> §rInvite a player");
	msg.text(player, "§5 - accept <player> §rAccept an invitation");
	msg.text(player, "§5 - deny <player> §rDeny an invitation");
	msg.text(player, "§5 - kick <player> §rKick a player");
	msg.text(player, "§5 - leave §rLeave the party");
	msg.text(player, "§5 - promote <player> §rPromote a player");
	msg.text(player, "§5 - demote <player> §rDemote a player");
	msg.text(player, "§5 - disband §rDisband a party");
	msg.text(player, "§5 - list §rParty information");
	msg.text(player, "§5 - <message> §rSends a party message");
	goto("wait");
}
arg0 = text.toLowerCase(list.getIndex(args, 0));
if(arg0 == "list") {
	if(size != 1) {
		msg.prefix(player, prefix_party, "§5/party list");
	} else {
		if(!player.isInParty(player)) {
			msg.prefix(player, prefix_party, "You are not in a party.");
			goto("wait");
		}
		list = party.getList(player.getPartyId(player));
		width = 1;
		if(list.getSize(list) > 9) {
			width = 2;
		}
		table = table.new("§5", width, 13, 7);
		msg.text(player, table.getStart(table));
		msg.text(player, table.get(table, "§d#", "§d§lName", "§d§lRole"));
		msg.text(player, table.getMiddle(table));
		iter = list.iterator(list);
		c = 0;
		while(hasNext(iter)) {
			c++;
			p = player.get(next(iter));
			msg.text(player, table.get(table, text.number(c), player.getName(p), player.getPartyRank(p)));
		}
		msg.text(player, table.getEnd(table));
	}
	goto("wait");
}
if(arg0 == "leave") {
	if(size != 1) {
		msg.prefix(player, prefix_party, "§5/party leave");
	} else {
		if(!player.isInParty(player)) {
			msg.prefix(player, prefix_party, "You are not in a party.");
			goto("wait");
		}
		party.kickPlayer(player, "leave");
	}
	goto("wait");
}
if(arg0 == "disband") {
	if(size != 1) {
		msg.prefix(player, prefix_party, "§5/party disband");
	} else {
		if(!player.isInParty(player)) {
			msg.prefix(player, prefix_party, "You are not in a party.");
			goto("wait");
		}
		if(!player.isPartyLeader(player)) {
			msg.prefix(player, prefix_party, "You are not the party leader.");
			goto("wait");
		}
		party.delete(player.getPartyId(player));
	}
	goto("wait");
}
if(arg0 == "kick") {
	if(size != 2) {
		msg.prefix(player, prefix_party, "§5/party kick <player>");
	} else {
		if(!player.isInParty(player)) {
			msg.prefix(player, prefix_party, "You are not in a party.");
			goto("wait");
		}
		if(!player.isPartyLeaderOrMod(player)) {
			msg.prefix(player, prefix_party, "You are not leader or moderator of the party.");
			goto("wait");
		}
		pname = list.getIndex(args, 1);
		if(!checkIfEverOnline(pname)) {
			msg.prefix(player, prefix_party, "This player has never been online.");
			goto("wait");
		}
		p = read.player(pname);
		if(p == null) {
			msg.prefix(player, prefix_party, "This player is not online.");
			goto("wait");
		}
		if(player == p) {
			msg.prefix(player, prefix_party, "You can´t apply that to yourself.");
			goto("wait");
		}
		if(!party.same(p, player)) {
			msg.prefix(player, prefix_party, "This player is not in your party.");
			goto("wait");
		}
		ownrank = player.getPartyRank(player);
		if(ownrank == "Moderator") {
			if(player.isPartyLeaderOrMod(p)) {
				msg.prefix(player, prefix_party, "You can't kick this player.");
				goto("wait");
			}
		}
		party.kickPlayer(p, "kick");
	}
	goto("wait");
}
if(arg0 == "promote" || arg0 == "demote") {
	if(size != 2) {
		msg.prefix(player, prefix_party, concat("§5/party ", arg0, " <player>"));
	} else {
		pname = list.getIndex(args, 1);
		if(!player.isInParty(player)) {
			msg.prefix(player, prefix_party, "You are not in a party.");
			goto("wait");
		}
		if(!player.isPartyLeader(player)) {
			msg.prefix(player, prefix_party, "You are not the party leader.");
			goto("wait");
		}
		if(!checkIfEverOnline(pname)) {
			msg.prefix(player, prefix_party, "This player has never been online.");
			goto("wait");
		}
		p = read.player(pname);
		if(p == null) {
			msg.prefix(player, prefix_party, "This player is not online.");
			goto("wait");
		}
		if(player == p) {
			msg.prefix(player, prefix_party, "You can´t apply that to yourself.");
			goto("wait");
		}
		if(!party.same(p, player)) {
			msg.prefix(player, prefix_party, "This player is not in your party.");
			goto("wait");
		}
		partyid = player.getPartyId(player);
		rank = player.getPartyRank(p);
		if(arg0 == "promote") {
			if(rank == "Player") {
				player.setPartyRank(p, "Moderator");
				party.sendMessage(partyid, concat("§r", pname, " is now Moderator."));
			} elseif(rank == "Moderator") {
				player.setPartyRank(p, "Leader");
				player.setPartyRank(player, "Moderator"); //Ex-Leader degradieren
				party.sendMessage(partyid, concat("§r", pname, " is now Leader."));
			}
		} elseif(arg0 == "demote") {
			if(rank == "Moderator") {
				player.setPartyRank(p, "Player");
				party.sendMessage(partyid, concat("§r", pname, " is no longer Moderator."));
			} else {
				msg.prefix(player, prefix_party, "This player cannot be demoted.");
			}
		}
	}
	goto("wait");
}
if(arg0 == "invite") {
	if(size != 2) {
		msg.prefix(player, prefix_party, "§5/party invite <player>");
	} else {
		p_name = list.getIndex(args, 1);
		if(!checkIfEverOnline(p_name)) {
			msg.prefix(player, prefix_party, "This player has never been online.");
			goto("wait");
		}
		p = read.player(p_name);
		temp = party.invitePlayer(player, p);
		if(temp == "inviteeNotOnline") {
			msg.prefix(player, prefix_party, "This player is not online.");
		} elseif(temp == "inviterEqualsInvitee") {
			msg.prefix(player, prefix_party, "You can´t apply that to yourself.");
		} elseif(temp == "inviterNotPermitted") {
			msg.prefix(player, prefix_party, "You are not leader or moderator of the party.");
		} elseif(temp == "inviteeAlreadyInParty") {
			msg.prefix(player, prefix_party, "This player is already in your party.");
		} elseif(temp == "inviteeAlreadyInvited") {
			msg.prefix(player, prefix_party, "This player already has an invitation from you.");
		} else {
			msg.prefix(player, prefix_party, "Invitation sent.");
		}
	}
	goto("wait");
}
if(arg0 == "accept") {
	if(size != 2) {
		msg.prefix(player, prefix_party, "§5/party accept <player>");
	} else {
		if(player.isInParty(player)) {
			msg.prefix(player, prefix_party, "You are already in a party.");
			goto("wait");
		}
		pname = list.getIndex(args, 1);
		if(!checkIfEverOnline(pname)) {
			msg.prefix(player, prefix_party, "This player has never been online.");
			goto("wait");
		}
		p = read.player(pname);
		if(p == null) {
			msg.prefix(player, prefix_party, "This player is no longer online.");
			goto("wait");
		}
		player_uuid = player.getUuid(player);
		p_uuid = player.getUuid(p);
		list = map.get(party_invitations, player_uuid);
		if(list == null || !list.contains(list, p_uuid)) {
			msg.prefix(player, prefix_party, "This invitation is invalid.");
			goto("wait");
		}
		if(player.isInParty(p)) { //wenn einlader bereits in party
			partyid = player.getPartyId(p);
			if(map.get(party_invite_ids, p_uuid) == partyid) { //wenn partyid noch die gleiche ist wie bei einladung
				party.addPlayer(partyid, player);
				player.setPartyRank(player, "Player");
			} else {
				msg.prefix(player, prefix_party, "This player is already in another party.");
				goto("wait");
			}
		} else {
			partyid = map.get(party_invite_ids, p_uuid);
			party.setList(partyid, list.new());
			party.addPlayer(partyid, p);
			party.addPlayer(partyid, player);
			player.setPartyRank(p, "Leader");
			player.setPartyRank(player, "Player");
			msg.prefix(p, prefix_party, "The party was created.");
		}
		list.clear(list); //Einladungs-Liste von oben
		party.sendMessage(partyid, concat("§r", player_name, " joined the party."));
	}
	goto("wait");
}
if(arg0 == "deny") {
	if(size != 2) {
		msg.prefix(player, prefix_party, "§5/party deny <player>");
	} else {
		player_uuid = player.getUuid(player);
		list = map.get(party_invitations, player_uuid);
		if(list != null) {
			pname = list.getIndex(args, 1);
			p = read.player(pname);
			if(p == null) {
				msg.prefix(player, prefix_party, "This player is no longer online.");
				goto("wait");
			}
			p_uuid = player.getUuid(p);
			if(list == null || !list.contains(list, p_uuid)) {
				msg.prefix(player, prefix_party, "This invitation is invalid.");
				goto("wait");
			}
			index = list.getIndexOf(list, p_uuid);
			list.remove(list, p_uuid);
			keytimes = map.get(delkeytimes, player_uuid);
			list.removeIndex(keytimes, index);
			p = read.player(pname);
			if(p != null) {
				msg.prefix(p, prefix_party, concat("§r", player_name, " has denied your invitation."));
			}
			msg.prefix(player, prefix_party, concat("Invitation from ", pname, " denied."));
		}
	}
	goto("wait");
}
if(player.isInParty(player)) {
	message = concat(player.getName(player), " §1| §r", text.concatList(args, " ", 0, list.getSize(args) - 1));
	party.sendMessage(player.getPartyId(player), message);
	goto("wait");
}
goto("partyhelp");

@setmessage
if(size == 0) {
	@setmessagehelp
	msg.prefix(player, prefix_commands, "/setmessage ...");
	msg.text(player, "§e- join <message> §rSets your joinmessage");
	msg.text(player, "§e- leave <message> §rSets your leavemessage");
	msg.text(player, "§e- info §rShows you set messages");
	if(perm.has(player, "setmessage.delete")) {
		msg.text(player, "§e- delete <player> §rDeletes a players messages");
	}
	goto("wait");
}
arg0 = text.toLowerCase(list.getIndex(args, 0));
if(arg0 == "info") {
	fullname = player.getFullName(player);
	message = text.convert(player.getJoinMessage(player));
	if(message == null) {
		msg.prefix(player, prefix_commands, "No join message set.");
	} else {
		msg.prefix(player, prefix_commands, concat("§a§l> §r", fullname, " §9", message));
	}
	message = text.convert(player.getLeaveMessage(player));
	if(message == null) {
		msg.prefix(player, prefix_commands, "No leave message set.");
	} else {
		msg.prefix(player, prefix_commands, concat("§c§l> §r", fullname, " §9", message));
	}
	goto("wait");
}
if(arg0 == "join") {
	if(size < 2) {
		goto("setmessagehelp");
	}
	message = text.concatList(args, " ", 1, size - 1);
	player.setJoinMessage(player, message);
	msg.prefix(player, prefix_commands, "Join-Message set.");
	goto("wait");
}
if(arg0 == "leave") {
	if(size < 2) {
		goto("setmessagehelp");
	}
	message = text.concatList(args, " ", 1, size - 1);
	player.setLeaveMessage(player, message);
	msg.prefix(player, prefix_commands, "Leave-Message set.");
	goto("wait");
}
if(arg0 == "delete") {
	if(size == 1) {
		p_uuid = player.getUuid(player);
	} elseif(size == 2) {
		if(!perm.has(player, "setmessage.delete")) {
			perm.no(player, "setmessage.delete");
			goto("wait");
		}
		p_name = list.getIndex(args, 1);
		if(!checkIfEverOnline(p_name)) {
			msg.prefix(player, prefix_commands, "This player has never been online.");
			goto("wait");
		}
		p_uuid = player.getUuid(p_name);
	} else {
		goto("setmessagehelp");
	}
	p_id = player.getId(p_uuid);
	player.setJoinMessage(p_id, "null");
	player.setLeaveMessage(p_id, "null");
	msg.prefix(player, prefix_commands, "Messages deleted.");
	goto("wait");
}
goto("wait");

@lag
msg.prefix(player, prefix_commands, "Lag test is performed. Please wait...");
a = array.new(2);
a[0] = player.getUuid(player);
a[1] = time.getMillis();
list.add(lag_list, a);
sgoto(100, "do_lag_test");
goto("wait");

@do_lag_test
t = time.getMillis();
a = list.getIndex(lag_list, 0);
list.removeIndex(lag_list, 0);
p_uuid = a[0];
t_old = a[1];
t = math.roundComma((t - t_old) / 50 / 5, 2);
p = player.get(p_uuid);
if(p != null) {
	msg.prefix(p, prefix_commands, "Expected: 20 ticks/sec");
	msg.prefix(p, prefix_commands, concat("Measured: ", text.number(t), " ticks/sec"));
}
goto("wait");

@live
boolean = !player.isLive(player);
player.setLive(player, boolean);
player.setHeadName(player);
player.setTabName(player);
msg.prefix(player, prefix_commands, "Live toggled.");
goto("wait");

@lightning
location = player.getTarget(player, 50, true, true);
if(block.getType(location) == "minecraft:air") {
	msg.prefix(player, prefix_commands, "No block in sight.");
	goto("wait");
}
entity.spawn("minecraft:lightning_bolt", location);
goto("wait");

@ride
world_name = world.getName(loc.getWorld(entity.getLocation(player)));
if(world.isGamesName(world_name)) {
	if(player.hasMinigame(affectedplayer) || (perm.has(affectedplayer, "ride") && !perm.has(affectedplayer, "isTeam"))) {
		if(size == 2) {
			msg.prefix(player, prefix_commands, "This player can't use this now.");
		} else {
			msg.prefix(player, prefix_commands, "You can't use this now.");
		}
		goto("wait");
	}
}
player_uuid = player.getUuid(player);
if(set.contains(ride_set, player_uuid)) {
	msg.prefix(player, prefix_commands, "Entity-Ride-Click removed.");
	set.remove(ride_set, player_uuid);
} else {
	msg.prefix(player, prefix_commands, "Click an entity to ride it.");
	set.add(ride_set, player_uuid);
}
goto("wait");

@vanish
//vanish [on/off] [player]
if(size == 0) {
	if(set.contains(vanish_set, player.getUuid(affectedplayer))) {
		bool = "off";
	} else {
		bool = "on";
	}
}
if(size >= 1) {
	bool = list.getIndex(args, 0);
}
if(size == 2) {
	affectedname = list.getIndex(args, 1);
	affectedplayer = read.player(affectedname);
	affectedname = player.getName(affectedplayer);
	if(affectedplayer == null) {
		msg.prefix(player, prefix_commands, "This player is not online.");
		goto("wait");
	}
}
if(bool == "on") {
	if(affectedname != player_name) {
		msg.prefix(player, prefix_commands, concat(affectedname, " has been vanished."));
		msg.prefix(affectedplayer, prefix_commands, concat("You have been vanished by ", player_name, "."));
	} else {
		msg.prefix(affectedplayer, prefix_commands, "You are vanished.");
	}
	set.add(vanish_set, player.getUuid(affectedplayer));
	player.hide(affectedplayer);
} elseif(bool == "off") {
	if(affectedname != player_name) {
		msg.prefix(player, prefix_commands, concat(affectedname, " is no longer vanished."));
		msg.prefix(affectedplayer, prefix_commands, concat("You are no longer vanished caused by ", player_name, "."));
	} else {
		msg.prefix(affectedplayer, prefix_commands, "You are no longer vanished.");
	}
	set.remove(vanish_set, player.getUuid(affectedplayer));
	player.show(affectedplayer);
} else {
	msg.prefix(player, prefix_commands, "/vanish [on/off] [player]");
}
goto("wait");

@user
if(size == 0) {
	p_name = player.getName(player);
	p_uuid = player.getUuid(p_name);
} else {
	if(!perm.has(player, "user.other")) {
		perm.no(player, "user.other");
		goto("wait");
	}
	p_name = list.getIndex(args, 0);
	if(!checkIfEverOnline(p_name)) {
		msg.prefix(player, prefix_commands, "This player has never been online.");
		goto("wait");
	}
	p_uuid = player.getUuid(p_name);
	p_name = player.getName(p_uuid);
}
p = read.player(p_name);
p_id = player.getId(p_uuid);
if(p == null) {
	p_or_id = p_id;
} else {
	p_or_id = p;
}
table = table.new("§8", 7, 24);
msg.text(player, table.getStart(table));
msg.text(player, table.get(table, "Player", p_name));
msg.text(player, table.getMiddle(table));
msg.text(player, table.get(table, "Playtime", text.number(math.roundDown(player.getTotalPlaytime(p_or_id) / 60))));
msg.text(player, table.get(table, "Joins", text.number(player.getJoins(p_or_id))));
msg.text(player, table.get(table, "First Join", getDateString(player.getFirstJoin(p_or_id))));
msg.text(player, table.get(table, "Last Join", getDateString(player.getLastJoin(p_or_id))));
msg.text(player, table.get(table, "UUID", p_uuid));
msg.text(player, table.get(table, "ID", text.number(p_id)));
msg.text(player, table.get(table, "Rank", getRank(p_or_id)));
msg.text(player, table.get(table, "PvP", hasPvpOn(p_or_id)));
msg.text(player, table.get(table, "Quests", text.number(quest.getCounter(p_or_id))));
msg.text(player, table.get(table, "Money", text.number(getMoney(p_or_id))));
msg.text(player, table.get(table, "Adventures", text.number(player.getAdventureAmounts(p_or_id))));
msg.text(player, table.getEnd(table));
goto("wait");

@quest
if(size == 0) {
	@quest_syntax
	msg.prefix(player, prefix_quest, "/quest ...");
	msg.text(player, "§5 - see §rSee all active quests");
	msg.text(player, "§5 - term <player> §rTerminates a player's quest");
	goto("wait");
}
arg0 = text.toLowerCase(list.getIndex(args, 0));
if(arg0 == "see") {
	if(size != 1) {
		msg.prefix(player, prefix_quest, "/quest see");
		goto("wait");
	}
	quest_map = quest.getIds();
	iter = map.iterator(quest_map);
	while(hasNext(iter)) {
		element = next(iter);
		key = map.getKey(element);
		value = map.getValue(element);
		script = script.getFromId(value);
		if(script == null) {
			continue;
		}
		msg.text(player, player.getName(key), " ", value);
	}
	goto("wait");
}
if(arg0 == "term") {
	if(size != 2) {
		msg.prefix(player, prefix_quest, "/quest term <player>");
		goto("wait");
	}
	p_name = list.getIndex(args, 1);
	if(!checkIfEverOnline(p_name)) {
		msg.prefix(player, prefix_quest, "This player has never been online.");
		goto("wait");
	}
	p = read.player(p_name);
	if(p == null) {
		msg.prefix(player, prefix_quest, "This player is not online.");
		goto("wait");
	}
	script_id = quest.getFromPlayer(p);
	if(script_id == null) {
		msg.prefix(player, prefix_quest, "This player has no quest.");
		goto("wait");
	}
	script = script.getFromId(script_id);
	if(script == null) {
		quest.removePlayer(p);
		msg.prefix(player, prefix_quest, "Corrupt quest terminated.");
		goto("wait");
	}
	setScriptVar("player", p);
	modTimer.scriptCallEvent("quest_term", script);
	quest.term(script, player);
	msg.prefix(player, prefix_quest, "Player's quest terminated.");
	goto("wait");
}
goto("quest_syntax");

@friend
if(size == 0) {
	@friend_syntax
	msg.prefix(player, prefix_friends, "/friend ...");
	msg.text(player, "§5 - add <player> §rAdds a friend");
	msg.text(player, "§5 - remove <player> §rRemoves a friend");
	msg.text(player, "§5 - list §rLists all your friends");
	goto("wait");
}
arg0 = text.toLowerCase(list.getIndex(args, 0));
if(arg0 == "add") {
	if(size != 2) {
		msg.prefix(player, prefix_friends, "/friend add <player>");
		goto("wait");
	}
	friend_name = list.getIndex(args, 1);
	if(player_name == friend_name) {
		msg.prefix(player, prefix_friends, "You can't invite yourself.");
		goto("wait");
	}
	player_id = player.getId(player);
	if(!checkIfEverOnline(friend_name)) {
		msg.prefix(player, prefix_friends, "This player has never been online.");
		goto("wait");
	}
	friend_id = player.getId(player.getUuid(friend_name));
	if(friend.check(player_id, friend_id)) {
		msg.prefix(player, prefix_friends, "This player is already your friend.");
		goto("wait");
	}
	if(map.contains(friend_requests, friend_id)) {
		if(map.get(friend_requests, friend_id) == player_id) {
			friend.add(player_id, friend_id);
			map.remove(friend_requests, friend_id);
			msg.prefix(player, prefix_friends, concat("§7", friend_name, "§r is your friend now."));
			msg.send(player, friend_name, prefix_friends, concat("§7", player_name, "§r is your friend now."), true);
			goto("wait");
		}
	}
	map.add(friend_requests, player_id, friend_id); //Einlader, Eingeladener
	friend = read.player(friend_name);
	msg.prefix(player, prefix_friends, concat("You sent an invitation to §7", friend_name, "§r."));
	msg.send(player, friend_name, prefix_friends, concat("§7", player_name, "§r wants to be your friend."), true);
	if(friend != null) {
		msg.text(friend, text.click("§r[§aAccept§r]", concat("/friend add ", player_name)));
	}
	goto("wait");
}
if(arg0 == "remove") {
	if(size != 2) {
		msg.prefix(player, prefix_friends, "/friend remove <player>");
		goto("wait");
	}
	friend_name = list.getIndex(args, 1);
	player_id = player.getId(player);
	if(!checkIfEverOnline(friend_name)) {
		msg.prefix(player, prefix_friends, "This player has never been online.");
		goto("wait");
	}
	friend_id = player.getId(player.getUuid(friend_name));
	if(!friend.check(player_id, friend_id)) {
		msg.prefix(player, prefix_friends, "This player isn't your friend.");
		goto("wait");
	}
	friend.delete(player_id, friend_id);
	msg.prefix(player, prefix_friends, concat("§7", friend_name, "§r is no longer your friend."));
	msg.send(player, friend_name, prefix_friends, concat("§7", player_name, "§r is no longer your friend."), true);
	goto("wait");
}
if(arg0 == "list") {
	if(size != 1) {
		msg.prefix(player, prefix_friends, "/friend list");
		goto("wait");
	}
	player_id = player.getId(player);
	friendlist = friend.getList(player_id);
	listsize = list.getSize(friendlist);
	if(listsize == 0) {
		msg.prefix(player, prefix_friends, "You have no friends yet.");
		goto("wait");
	}
	msg.text(player, "§5Friends:");
	for(i = 0; i <= listsize - 1; i++) {
		msg.text(player, "§r- ", list.getIndex(friendlist, i));
	}
	goto("wait");
}
goto("friend_syntax");

@var
if(size != 2) {
	msg.prefix(player, prefix_commands, "/var <id> <varname>");
	goto("wait");
}
script_id = list.getIndex(args, 0);
script = script.getFromId(script_id);
if(script == null) {
	msg.prefix(player, "§dScript", "Invalid id");
	goto("wait");
}
var_name = list.getIndex(args, 1);
var = script.getVar(script, var_name);
msg.prefix(player, "§dScript", concat(var_name, " = ", var));
goto("wait");

@vote
link1 = "https://minecraft-server.eu/vote/index/2227F";
link2 = "https://minecraft-server-list.com/server/478200/vote/";
msg.text(player, "[", prefix_vote, "§r] ", text.link("minecraft-server.eu", link1));
msg.text(player, "[", prefix_vote, "§r] ", text.link("minecraft-server-list.com", link2));
goto("wait");

@voteshop
inv.open(vote_inv, player, concat("Your vote points: §6", text.number(player.getVotePoints(player)), " §rStreak: §6", text.number(player.getVoteStreak(player))));
goto("wait");

@voxel
if(size < 1) {
	@voxelhelp
	msg.prefix(player, prefix_commands, "/voxel <radius:1-5>");
	msg.prefix(player, prefix_commands, "/voxel block");
	goto("wait");
}
arg0 = list.getIndex(args,  0);
if(isDouble(arg0)) {
	radius = arg0;
	if(radius < 1) {
		radius = 1;
	}
	if(radius > 5) {
		radius = 5;
	}
	script = script.get("Voxel");
	map = script.getVar(script, "radius_per_player");
	map.add(map, player.getUuid(player), radius);
	script.setVar(script, "radius_per_player", map);
	msg.prefix(player, prefix_commands, concat("Set radius to ", text.number(radius), "."));
	goto("wait");
}
if(arg0 == "block") {
	item = living.getEquip(player, "hand");
	item_type = item.getType(item);
	if(item_type == "minecraft:air") {
		msg.prefix(player, prefix_commands, "You have to hold an item in your mainhand.");
		goto("wait");
	}
	state = block.newState(item_type);
	script = script.get("Voxel");
	map = script.getVar(script, "state_per_player");
	map.add(map, player.getUuid(player), state);
	script.setVar(script, "state_per_player", map);
	msg.prefix(player, prefix_commands, concat("Set block to ", item_type, "."));
	goto("wait");
}
goto("voxelhelp");

@setservermessage
if(size < 1) {
	msg.prefix(player, prefix_commands, "/setservermessage <text>");
	goto("wait");
}
message = text.concatList(args, " ", 0, size - 1);
message = text.replace(message, "&", "§");
setMOTD(message);
msg.prefix(player, prefix_commands, "Server-Message gesetzt");
goto("wait");

@error
if(size < 1) {
	msg.prefix(player, "§cError", "/error ...");
	msg.text(player, "§c - list §rLists all errors");
	msg.text(player, "§c - clear §rDeletes all errors");
	goto("wait");
}
arg0 = text.toLowerCase(list.getIndex(args, 0));
if(arg0 == "list") {
	error_size = error.getSize();
	if(error_size == 0) {
		msg.prefix(player, "§cError", "No errors existing.");
		goto("wait");
	}
	for(i = 0; i < error_size; i++) {
		msg.text(player, error.getIndex(i));
	}
	goto("wait");
}
if(arg0 == "clear") {
	error.clear();
	msg.prefix(player, "§cError", "All errors deleted.");
	goto("wait");
}
goto("wait");

@errordebug
if(size < 1) {
	msg.prefix(player, "§cErrorDebugs", "/errordebug ...");
	msg.text(player, "§c - list §rLists all errordebugs");
	msg.text(player, "§c - clear §rDeletes all errordebugs");
	msg.text(player, "§c - toggle §rToggles errordebugs");
	goto("wait");
}
arg0 = text.toLowerCase(list.getIndex(args, 0));
if(arg0 == "list") {
	error_size = debug.getSize();
	if(error_size == 0) {
		msg.prefix(player, "§cErrorDebugs", "No errordebugs existing.");
		goto("wait");
	}
	for(i = 0; i < error_size; i++) {
		msg.text(player, debug.getIndex(i));
	}
	goto("wait");
}
if(arg0 == "clear") {
	debug.clear();
	msg.prefix(player, "§cErrorDebugs", "All errordebugs deleted.");
	goto("wait");
}
if(arg0 == "toggle") {
	new_value = !perm.has(player, "script.debug");
	player.showDebug(player, new_value);
	if(new_value) {
		msg.prefix(player, prefix_commands, "Debug messages are now shown.");
	} else {
		msg.prefix(player, prefix_commands, "Debug messages are now hidden.");
	}
	goto("wait");
}
goto("wait");

@hat
item = living.getEquip(player, "hand");
if(item.getType(item) == "minecraft:air") {
	msg.prefix(player, prefix_commands, "You have to hold an item in hand.");
	goto("wait");
}
living.setEquip(player, "head", item);
living.setEquip(player, "hand", read.item("minecraft:air"));
goto("wait");

@hawkeye
if(size == 0) {
	@partyhelp
	msg.prefix(player, prefix_party, "/hawkeye ...");
	msg.text(player, "§5 - search <parameters> §rSearch for griefs");
	msg.text(player, "§5 - rollback §rRollback last search");
	msg.text(player, "§5 - undo §rUndos your last rollback");
	msg.text(player, "§5 - tool §rGives you the Hawkeye Tool");
	if(perm.has(player, "hawkeye.entries")) {
		msg.text(player, "§5 - entries §rShows the amount of all entries");
	}
	msg.text(player, "");
	msg.text(player, "§5 - Parameters:");
	msg.text(player, "§5 - e:<event>");
	msg.text(player, "§5 - p:<player>");
	msg.text(player, "§5 - r:<radius>");
	msg.text(player, "§5 - t:<timespan> e.g. \"5d,4h,20m\"");
	goto("wait");
}
arg0 = text.toLowerCase(list.getIndex(args, 0));
if(arg0 == "tool") {
	player.giveItem(player, ha_tool);
	goto("wait");
}
if(arg0 == "print") {
	side = list.getIndex(args, 1);
	if(!isDouble(side)) {
		msg.prefix(player, prefix_commands, "Number expected.");
		goto("wait");
	}
	if(side < 1) {
		msg.prefix(player, prefix_commands, "Positive number expected.");
		goto("wait");
	}
	list = hawkeye.getDataList(player);
	if(list == null) {
		goto("wait");
	}
	if(side > list.getSize(list)) {
		msg.prefix(player, prefix_commands, "Invalid number.");
		goto("wait");
	}
	hawkeye.print(player, list, side);
	goto("wait");
}
if(arg0 == "search") {
	if(size < 2) {
		msg.prefix(player, prefix_commands, "/hawkeye search <parameters>");
		goto("wait");
	}
	a = hawkeye.processInput(args, player);
	if(text.class(a) == "String") {
		msg.prefix(player, prefix_hawkeye, a);
		goto("wait");
	}
	timeFrom = a[0];
	timeTo = a[1];
	player_loc = a[2];
	radius = a[3];
	events = a[4];
	players = a[5];
	l = hawkeye.getData(timeFrom, timeTo, player_loc, radius, events, players, "DESC");
	if(text.class(l) == "String") {
		msg.prefix(player, prefix_hawkeye, l);
		hawkeye.setDataList(player, list.new());
		goto("wait");
	}
	if(list.getSize(l) == 0) {
		msg.prefix(player, prefix_hawkeye, "No results found.");
		hawkeye.setDataList(player, list.new());
		goto("wait");
	}
	hawkeye.setDataList(player, l);
	hawkeye.print(player, l, 1);
	goto("wait");
}
if(arg0 == "entries") {
	if(!perm.has(player, "hawkeye.entries")) {
		perm.no(player, "hawkeye.entries");
		goto("wait");
	}
	msg.prefix(player, prefix_commands, concat("Anzahl an Hawkeye-Einträgen: " , text.number(hawkeye.getAmountOfAll())));
	goto("wait");
}
if(arg0 == "rollback") {
	l = hawkeye.getDataList(player);
	if(l == null) {
		msg.prefix(player, prefix_hawkeye, "No results to rollback.");
		goto("wait");
	}
	if(list.getSize(l) == 0) {
		msg.prefix(player, prefix_hawkeye, "No results to rollback.");
		goto("wait");
	}
	if(list.getSize(l) >= 1000) {
		msg.prefix(player, prefix_hawkeye, "Limit (1000) reached. Edit search parameters.");
		goto("wait");
	}
	counter = hawkeye.rollback(l);
	hawkeye.setUndoList(player, l);
	msg.prefix(player, prefix_hawkeye, concat(text.number(counter), " blocks rollbacked."));
	goto("wait");
}
if(arg0 == "undo") {
	l = hawkeye.getUndoList(player);
	if(l == null) {
		msg.prefix(player, prefix_hawkeye, "No rollback to undo.");
		goto("wait");
	}
	if(list.getSize(l) == 0) {
		msg.prefix(player, prefix_hawkeye, "No rollback to undo.");
		goto("wait");
	}
	hawkeye.undo(l);
	hawkeye.setUndoList(player, list.new());
	msg.prefix(player, prefix_hawkeye, "Undo done.");
	goto("wait");
}
goto("wait");

@news
if(size < 1) {
	msg.prefix(player, prefix_commands, "/news <text>");
	goto("wait");
}
message = text.concatList(args, " ", 0, size - 1);
online_list = players.toList();
for(i = 0; i < list.getSize(online_list); i++) {
	p = list.getIndex(online_list, i);
	title.reset(p);
	title.setSub(p, concat("by ", player_name));
	title.send(p, "§cNews");
	msg.prefix(p, "§4News", concat("§c", message));
}
goto("wait");

@spawn
if(size == 1) {
	if(!perm.has(player, "teleport.other")) {
		perm.no(player, "teleport.other");
		goto("wait");
	}
	affectedname = list.getIndex(args, 0);
	affectedplayer = read.player(affectedname);
	if(affectedplayer == null) {
		msg.prefix(player, prefix_commands, "This player is not online.");
		goto("wait");
	}
}
if(player.hasMinigame(affectedplayer)) {
	if(size == 1) {
		msg.prefix(player, prefix_commands, "This player can't be teleported now.");
		goto("wait");
	}
	msg.prefix(player, prefix_commands, "You can't teleport now.");
	goto("wait");
}
if(player.teleport(affectedplayer, serverspawn, true)) {
	if(player == affectedplayer) {
		msg.prefix(affectedplayer, prefix_commands, "You have been teleported to the spawn.");
	} else {
		affectedname = player.getName(affectedplayer);
		msg.prefix(player, prefix_commands, concat(affectedname, " was teleported to the spawn."));
	}
}
goto("wait");

@rank
msg.text(player, getSpacer());
rank = getRank(player);
msg.text(player, concat("§6Current rank: §r[", rank, "§r]"));
msg.text(player, "Choose a rank:");
rank.showAll(player);
goto("wait");

@setrank
if(size < 2) {
	msg.prefix(player, prefix_commands, "/setrank <player> <rank>");
	goto("wait");
}
p_name = list.getIndex(args, 0);
if(!checkIfEverOnline(p_name)) {
	msg.prefix(player, prefix_commands, "This player has never been online.");
	goto("wait");
}
p = read.player(p_name);
if(p == null) {
	msg.prefix(player, prefix_commands, "This player is not online.");
	goto("wait");
}
p_name = player.getName(p);
rank = text.concatList(args, " ",  1, size - 1);
if(!perm.has(player, "setrank.other")) {
	if(player.getName(player) != p_name) {
		perm.no(player, "setrank.other");
		goto("wait");
	}
	colored = text.startsWith(rank, "&", 0);
	if(colored) {
		rank = text.subString(rank, 1, text.length(rank));
	}
	a = rank.getRankArray();
	a_size = array.getSize(a);
	for(i = 0; i < a_size; i++) {
		tech_name = a[i, 0];
		if(rank == a[i, 1] && !rank.checkCriteria(p, tech_name)) {
			perm.no(p, tech_name);
			goto("wait");
		}
	}
	if(colored) {
		rank = concat("&", rank);
	}
}
if(text.length(rank) >= 30) {
	msg.prefix(player, prefix_commands, "Only 30 letters allowed.");
	goto("wait");
}
rank = text.replace(rank, "&", "§");
setRank(p, rank);
player.setTabName(p);
msg.prefix(player, prefix_commands, concat("Rank for ", p_name, " changed to [", rank, "§r]."));
goto("wait");

@nowb
if(player.isAfk(player)) {
	player.setAfk(player, false);
	msg.prefix(player, prefix_commands, "marvinius whispers to you: Welcome back ;-)");
	player.setTabName(player);
} else {
	msg.prefix(player, prefix_commands, "You are not afk.");
}
goto("wait");

@afk
if(player.hasMinigame(player)) {
	msg.prefix(player, prefix_commands, "No afk while in a minigame :P");
	goto("wait");
}
nickname = player.getNickname(player);
if(player.isAfk(player)) {
	msg.prefix("online", prefix_commands, concat(nickname, "§7 is back."));
	player.setAfk(player, false);
} else {
	msg.prefix("online", prefix_commands, concat(nickname, "§7 is now afk."));
	player.setAfk(player, true);
	if(!afk_loop_active) {
		afk_loop_active = true;
		sgoto(30, "afk_loop");
	}
}
player.setTabName(player);
goto("wait");

@silentjoin
silentjoin = player.getSilentJoin(player);
if(silentjoin) {
	player.setSilentJoin(player, false);
	msg.prefix(player, prefix_commands, "Silentjoin deactivated.");
} else {
	player.setSilentJoin(player, true);
	msg.prefix(player, prefix_commands, "Silentjoin activated.");
}
goto("wait");

@jumpto
loc = player.getTarget(player, 100);
if(block.isAir(loc)) {
	msg.prefix(player, prefix_commands, "No block in sight.");
	goto("wait");
}
y = loc.getY(loc);
while(y < 254 && !block.isAir(loc)) {
	loc.setY(loc, y);
	y++;
}
player.teleport(player, loc.mod(loc, 0, 1, 0), true);
goto("wait");

@jailloop
size = list.getSize(jailed_list);
for(i = 0; i < size; i++) {
	p_name = player.getName(list.getIndex(jailed_list, i));
	showJail(p_name);
}
if(size > 0) {
	jail_loop_active = true;
	sgoto(5, "jailloop");
} else {
	jail_loop_active = false;
}
goto("wait");

@coordsloop
list = players.toList();
size = list.getSize(list);
for(i = 0; i < size; i++) {
	p = list.getIndex(list, i);
	if(player.getShowcoords(p)) {
		p_loc = entity.getLocation(p);
		display.add(p, 30, concat("§6X§r ", text.number(loc.getCoord(p_loc, "bx")), " §6Y§r ", text.number(loc.getCoord(p_loc, "by")), " §6Z§r ", text.number(loc.getCoord(p_loc, "bz"))));
	}
}
sgoto(10, "coordsloop");
goto("wait");

@afk_loop
if(!afk_loop_active) {
	goto("wait");
}
afk_map = getScriptVar("afk_map");
iter = map.iterator(afk_map);
while(hasNext(iter)) {
	element = next(iter);
	yaw = map.getValue(element);
	player = player.get(map.getKey(element));
	if(player != null) {
		if(yaw != loc.getYaw(entity.getLocation(player))) {
			nickname = player.getNickname(player);
			msg.prefix("online", prefix_commands, concat(nickname, "§7 is back."));
			remove(iter);
			player.setAfk(player, false);
			player.setTabName(player);
		}
	}
}
size = map.getSize(afk_map);
if(size > 0) {
	afk_loop_active = true;
	sgoto(30, "afk_loop");
} else {
	afk_loop_active = false;
}
goto("wait");

@minute_loop
cal = time.new(time.getMillis());
timer_day = time.getDay(cal);
if(old_timer_day == null) {
	old_timer_day = timer_day;
}
if(timer_day != old_timer_day) {
	old_timer_day = timer_day;
	//Tageswechsel
	decreaseHomeBoost();
}
sgoto(1200, "minute_loop");
goto("wait");

@afk_checker_loop
online_list = players.toList();
iter = list.iterator(online_list);
while(hasNext(iter)) {	
	uuid = next(iter);
	p = player.get(uuid);
	if(player.hasMinigame(p)) {
		continue;
	}
	yaw = loc.getYaw(entity.getLocation(p));
	a = map.get(afk_checker_map, uuid);
	if(a == null) {
		a = array.new(2);
		a[0] = yaw;
		a[1] = 0;
		map.add(afk_checker_map, uuid, a);
		continue;
	}
	last_yaw = a[0];
	counter = a[1];
	if(last_yaw == yaw) {
		counter++;
	} else {
		counter = 0;
	}
	a[0] = yaw;
	a[1] = counter;
	map.add(afk_checker_map, uuid, a);
	if(counter == 5) {
		nickname = player.getNickname(p);
		if(player.isAfk(p)) {
			continue;
		}
		msg.prefix("online", prefix_commands, concat(nickname, "§7 is now afk."));
		player.setAfk(p, true);
		player.setTabName(p);
		if(!afk_loop_active) {
			afk_loop_active = true;
			sgoto(30, "afk_loop");
		}
	}
}
sgoto(1200, "afk_checker_loop");
goto("wait");


@pvp
if(size == 0) {
	if(hasPvpOn(player)) {
		mode = "off";
	} else {
		mode = "on";
	}
} elseif(size == 1) {
	mode = list.getIndex(args, 0);
	if(!(mode == "on" || mode == "off")) {
		goto("pvphelp");
	}
} elseif(size == 2) {
	if(!perm.has(player, "pvp.other")) {
		perm.no(player, "pvp.other");
		goto("wait");
	}
	mode = list.getIndex(args, 0);
	if(!(mode == "on" || mode == "off")) {
		goto("pvphelp");
	}
	affectedname = list.getIndex(args, 1);
	if(!checkIfEverOnline(affectedname)) {
		msg.prefix(player, prefix_commands, "This player has never been online.");
		goto("wait");
	}
	affectedplayer = read.player(affectedname);
	if(affectedplayer == null) {
		msg.prefix(player, prefix_commands, "This player is not online.");
		goto("wait");
	}
} else {
	@pvphelp
	if(perm.has(player, "pvp.other")) {
		msg.prefix(player, prefix_commands, "/pvp [on/off] [player]");
	} else {
		msg.prefix(player, prefix_commands, "/pvp [on/off]");
	}
	goto("wait");
}
if(mode == "on") {
	setPvp(affectedplayer, true);
	msg.prefix(affectedplayer, prefix_commands, "You have enabled PvP!");
	if(affectedplayer != player) {
		affectedname = player.getName(affectedplayer);
		msg.prefix(player, prefix_commands, concat(affectedname, " has now enabled PvP!"));
	}
} else {
	setPvp(affectedplayer, false);
	msg.prefix(affectedplayer, prefix_commands, "You have PvP disabled!");
	if(affectedplayer != player) {
		affectedname = player.getName(affectedplayer);
		msg.prefix(player, prefix_commands, concat(affectedname, " has now disabled PvP!"));
	}
}
goto("wait");

@suicide
if(size < 0 || size > 1) {
	msg.prefix(player, prefix_commands, "/suicide [player]");
	goto("wait");
}
if(size == 1) {
	if(!perm.has(player, "suicide.other")) {
		perm.no(player, "suicide.other");
		goto("wait");
	}
	affectedname = list.getIndex(args, 0);
	affectedplayer = read.player(affectedname);
	if(affectedplayer == null) {
		msg.prefix(player, prefix_commands, "This player is not online.");
		goto("wait");
	}
}
if(affectedplayer != player) {
	affectedname = player.getName(affectedplayer);
	msg.prefix(player, prefix_commands, concat(affectedname, " has been killed."));
	msg.prefix(affectedplayer, prefix_commands, concat("You have been killed by ", player_name, "."));
} else {
	msg.prefix(affectedplayer, prefix_commands, "You killed yourself.");
}
living.damage(affectedplayer, 1000);
goto("wait");

@nickname
if(size < 1) {
	msg.prefix(player, "§eNickname", "/nickname ...");
	msg.text(player, "§e - <name> ", "Sets a nickname");
	msg.text(player, "§e - remove ", "Removes a nickname");
	goto("wait");
}
nickname = text.replace(text.concatList(args, " ", 0, size - 1), "&", "§");
if(nickname == "remove") {
	player.removeNickName(player);
	msg.prefix(player, prefix_commands, concat("Your nickname was removed."));
} else {
	player.setNickName(player, nickname);
	msg.prefix(player, prefix_commands, concat("Your nickname was changed to ", nickname, "§r."));
}
player.setTabName(player);
player.setHeadName(player);
goto("wait");

@iteminfo
item = living.getEquip(player, "hand");
text = text.item(item);
text = text.replace(text, "\"", "\\\"");
msg.text(player, text.clipBoard(text, text));
goto("wait");

@perm
if(size == 0) {
	@perm_syntax
	msg.prefix(player, prefix_perms, "§r/perm ...");
	if(perm.has(player, "perm.give")) {
		msg.text(player, "§6 - give <player> <perm>");
	}
	if(perm.has(player, "perm.remove")) {
		msg.text(player, "§6 - remove <player> <perm>");
	}
	if(perm.has(player, "perm.removeall")) {
		msg.text(player, "§6 - removeall <player>");
	}
	if(perm.has(player, "perm.list")) {
		msg.text(player, "§6 - list <player>");
	}
	if(perm.has(player, "perm.toggle")) {
		msg.text(player, "§6 - toggle");
	}
	goto("wait");
}
arg0 = text.toLowerCase(list.getIndex(args, 0));
if(arg0 == "give") {
	if(!perm.has(player, "perm.give")) {
		perm.no(player, "perm.give");
		goto("wait");
	}
	if(size != 3) {
		msg.prefix(player, prefix_perms, "/perm give <player> <perm>");
	} else {
		p_name = list.getIndex(args, 1);
		perm = list.getIndex(args, 2);
		if(!checkIfEverOnline(p_name)) {
			msg.prefix(player, prefix_perms, "This player has never been online.");
			goto("wait");
		}
		if(!perm.isGroupName(perm)) {
			msg.prefix(player, prefix_perms, "This is not a permission group.");
			goto("wait");
		}
		if(!perm.has(player, "isAdmin")) {
			if(perm == "admin" || perm == "mod" || perm == "bypass") {
				msg.prefix(player, prefix_perms, "Only admins can give this permission group.");
				goto("wait");
			}
		}
		p_uuid = player.getUuid(p_name);
		p_id = player.getId(p_uuid);
		p_name = player.getName(p_uuid);
		perm_id = perm.getIdFromGroupname(perm);
		if(player.hasPermGroup(p_id, perm_id)) {
			msg.prefix(player, prefix_perms, "Perm already added.");
			goto("wait");
		}
		if(isOnline(p_name)) {
			p = read.player(p_name);
			rank = perm.getRankFromGroupname(perm);
			if(rank != null) {
				offerRank(p, rank.getTechName(rank));
			}
		}
		givePerm(p_id, perm_id);
		msg.prefix(player, prefix_perms, concat("§rPerm §7", perm, "§r added to §7", p_name, "§r."));
	}
	goto("wait");
}
if(arg0 == "remove") {
	if(!perm.has(player, "perm.remove")) {
		perm.no(player, "perm.remove");
		goto("wait");
	}
	if(size != 3) {
		msg.prefix(player, prefix_perms, "/perm remove <player> <perm>");
	} else {
		p_name = list.getIndex(args, 1);
		perm = list.getIndex(args, 2);
		if(!checkIfEverOnline(p_name)) {
			msg.prefix(player, prefix_perms, "This player has never been online.");
			goto("wait");
		}
		if(!perm.isGroupName(perm)) {
			msg.prefix(player, prefix_perms, "This is not a permission group.");
			goto("wait");
		}
		if(!perm.has(player, "isAdmin")) {
			if(perm == "admin" || perm == "mod" || perm == "bypass") {
				msg.prefix(player, prefix_perms, "Only admins can give this permission group.");
				goto("wait");
			}
		}
		p_uuid = player.getUuid(p_name);
		p_id = player.getId(p_uuid);
		p_name = player.getName(p_uuid);
		//Wenn marvinius eine Permission entfernt wird, wird dies blockiert, ausgenommen er tut dies selbst
		player_id = player.getId(player);
		if(player_id != 2) {
			if(p_id == 2) {
				msg.text(player, "§cSorry §b¯\\_(._.)_/¯");
				goto("wait");
			}
		}
		perm_id = perm.getIdFromGroupname(perm);
		if(!player.hasPermGroup(p_id, perm_id)) {
			msg.prefix(player, prefix_perms, "This player doesn't have that perm.");
			goto("wait");
		}
		removePerm(p_id, perm_id);
		msg.prefix(player, prefix_perms, concat("Perm §7", perm, "§r removed from §7", p_name, "§r."));
	}
	goto("wait");
}
if(arg0 == "removeall") {
	if(!perm.has(player, "perm.removeall")) {
		perm.no(player, "perm.removeall");
		goto("wait");
	}
	if(size != 2) {
		msg.prefix(player, prefix_perms, "/perm removeall <player>");
	} else {
		p_name = list.getIndex(args, 1);
		if(!checkIfEverOnline(p_name)) {
			msg.prefix(player, prefix_perms, "This player has never been online.");
			goto("wait");
		}
		//Wenn marvinius Permissions entfernt werden, wird dies blockiert, ausgenommen er tut dies selbst
		p_id = player.getId(player.getUuid(p_name));
		player_id = player.getId(player);
		if(player_id != 2) {
			if(p_id == 2) {
				msg.text(player, "§cSorry §b¯\\_(._.)_/¯");
				goto("wait");
			}
		}
		removeAllPerms(p_id);
		msg.prefix(player, prefix_perms, concat("All perms of §7", p_name, " §rwere removed."));
	}
	goto("wait");
}
if(arg0 == "list") {
	if(!perm.has(player, "perm.list")) {
		perm.no(player, "perm.list");
		goto("wait");
	}
	if(size != 2) {
		msg.prefix(player, prefix_perms, "/perm list <player>");
	} else {
		p_name = list.getIndex(args, 1);
		if(!checkIfEverOnline(p_name)) {
			msg.prefix(player, prefix_perms, "This player has never been online.");
			goto("wait");
		}
		p_id = player.getId(player.getUuid(p_name));
		permslist = getPermsFromPlayer(p_id);
		listsize = list.getSize(permslist);
		if(listsize == 0) {
			msg.prefix(player, prefix_perms, "No permissions found.");
		} else {
			msg.prefix(player, prefix_perms, p_name);
			for(i = 0; i < listsize; i++) {
				msg.text(player, " - ", perm.getNameFromId(list.getIndex(permslist, i)));
			}
		}
	}
	goto("wait");
}
if(arg0 == "toggle") {
	if(!perm.has(player, "perm.toggle")) {
		perm.no(player, "perm.toggle");
		goto("wait");
	}
	player_id = player.getId(player);
	if(perm.has(player, "simuser")) {
		reloadAllPerms(player_id);
		msg.prefix(player, prefix_commands, "You have regained your permissions.");
	} else {
		removeAllPermsTemporarly(player_id);
		msg.prefix(player, prefix_commands, "Have fun as a user.");
	}
	goto("wait");
}
goto("perm_syntax");

@allsounds
if(size == 0) {
	msg.prefix(player, prefix_commands, "§r/allsounds...");
	msg.text(player, "§e - start");
	msg.text(player, "§e - stop");
	goto("wait");
}
arg0 = text.toLowerCase(list.getIndex(args, 0));
if(arg0 == "start") {
	if(!map.exists(sounds_map)) {
		sounds_map = map.new();
	}
	player_uuid = player.getUuid(player);
	script_id = map.get(sounds_map, player_uuid);
	if(script_id != null) {
		script = script.getFromId(script_id);
		if(script != null) {
			msg.prefix(player, prefix_commands, "Sounds already started.");
			goto("wait");
		}
	}
	script = script.start("system/playsounds");
	script.setVar(script, "player", player);
	map.add(sounds_map, player.getUuid(player), script.getId(script));
	msg.prefix(player, prefix_commands, "Sounds started.");
	goto("wait");
}
if(arg0 == "stop") {
	if(!map.exists(sounds_map)) {
		sounds_map = map.new();
	}
	script_id = map.get(sounds_map, player.getUuid(player));
	if(script_id == null) {
		msg.prefix(player, prefix_commands, "No sounds playing.");
		goto("wait");
	}
	script = script.getFromId(script_id);
	if(script == null) {
		msg.prefix(player, prefix_commands, "No sounds playing.");
		goto("wait");
	}
	script.term(script);
	msg.prefix(player, prefix_commands, "Sounds stopped.");
	goto("wait");
}
goto("wait");

@weather
if(size == 0) {
	@weather_syntax
	msg.prefix(player, "§eWeather", "§r/weather ...");
	msg.text(player, "§e - clear [duration]");
	msg.text(player, "§e - rain [duration]");
	msg.text(player, "§e - thunder [duration]");
	goto("wait");
}
arg0 = text.toLowerCase(list.getIndex(args, 0));
if(arg0 == "clear" || arg0 == "rain" || arg0 == "thunder") {
	if(size == 2) {
		duration = list.getIndex(args, 1);
		if(!isDouble(duration)) {
			msg.prefix(player, prefix_commands, "Number expected.");
			goto("wait");
		}
		if(duration < 0) {
			msg.prefix(player, prefix_commands, "Positive number expected.");
			goto("wait");
		}
	} else {
		duration = 12000;
	}
	world = loc.getWorld(entity.getLocation(player));
	if(arg0 == "clear") {
		if(size > 2) {
			msg.prefix(player, prefix_commands, "/weather clear [duration]");
			goto("wait");
		}
		world.clearWeather(world, duration);
		msg.prefix(player, prefix_commands, "Weather cleared.");
		goto("wait");
	}
	if(arg0 == "rain") {
		if(size > 2) {
			msg.prefix(player, prefix_commands, "§r/weather rain [duration]");
			goto("wait");
		}
		world.setRain(world, duration);
		msg.prefix(player, prefix_commands, "Weather set to rain.");
		goto("wait");
	}
	if(arg0 == "thunder") {
		if(size > 2) {
			msg.prefix(player, prefix_commands, "/weather thunder [duration]");
			goto("wait");
		}
		world.setThunder(world, duration);
		msg.prefix(player, prefix_commands, "Weather set to thunder.");
		goto("wait");
	}
	goto("wait");
}
goto("weather_syntax");

@time
if(size == 0) {
	@time_syntax
	msg.prefix(player, "§eTime", "/time ...");
	msg.text(player, "§e - set <time>");
	msg.text(player, "§e - add <time>");
	msg.text(player, "§e - <day / noon / night / midnight>");
	goto("wait");
}
arg0 = text.toLowerCase(list.getIndex(args, 0));
if(arg0 == "set") {
	if(size != 2) {
		msg.prefix(player, prefix_commands, "/time set <time>");
		goto("wait");
	}
	setTime = list.getIndex(args, 1);
	if(!isDouble(setTime)) {
		msg.prefix(player, prefix_commands, "Number expected.");
		goto("wait");
	}
	if(setTime < 0) {
		msg.prefix(player, prefix_commands, "Positive number expected.");
		goto("wait");
	}
	world = loc.getWorld(entity.getLocation(player));
	while(setTime >= 24000) {
		setTime -= 24000;
	}
	world.setTime(world, setTime);
	msg.prefix(player, prefix_commands, concat("Time set to ", text.number(setTime), "."));
	goto("wait");
}
if(arg0 == "add") {
	if(size != 2) {
		msg.prefix(player, prefix_commands, "/time add <time>");
		goto("wait");
	}
	addTime = list.getIndex(args, 1);
	if(!isDouble(addTime)) {
		msg.prefix(player, prefix_commands, "Number expected.");
		goto("wait");
	}
	if(addTime < 0) {
		msg.prefix(player, prefix_commands, "Positive number expected.");
		goto("wait");
	}
	world = loc.getWorld(entity.getLocation(player));
	newtime = world.getTime(world) + addTime;
	while(newtime >= 24000) {
		newtime -= 24000;
	}
	world.setTime(world, newtime);
	msg.prefix(player, prefix_commands, concat("Time set to ", text.number(newtime), "."));
	goto("wait");
}
newtime = null;
if(arg0 == "day") {
	newtime = 1000;
} elseif(arg0 == "noon") {
	newtime = 6000;
} elseif(arg0 == "night") {
	newtime = 13000;
} elseif(arg0 == "midnight") {
	newtime = 18000;
}
if(newtime != null) {
	world = loc.getWorld(entity.getLocation(player));
	world.setTime(world, newtime);
	msg.prefix(player, prefix_commands, concat("Time set to ", text.number(newtime), "."));
	goto("wait");
}
goto("time_syntax");

@gamerule
world = loc.getWorld(entity.getLocation(player));
if(size == 0) {
	msg.prefix(player, prefix_commands, "/gamerule <gamerule> [value]");
	goto("wait");
}
gamerule_string = list.getIndex(args, 0);
gamerule_key = gamerule.getKey(gamerule_string);
if(gamerule_key == null) {
	msg.prefix(player, prefix_commands, "Gamerule doesn't exist.");
	goto("wait");
}
gamerule_value = gamerule.getValue(world, gamerule_key);
if(size == 1) {
	if(gamerule.isBool(gamerule_value)) {
		value = gamerule.getBool(gamerule_value);
	} elseif(gamerule.isInt(gamerule_value)) {
		value = text.number(gamerule.getInt(gamerule_value));
	} else {
		msg.prefix(player, prefix_commands, "Unknown gamerule type.");
		goto("wait");
	}
	msg.prefix(player, prefix_commands, concat(gamerule_string, " ", value));
	goto("wait");
}
if(size == 2) {
	if(!perm.has(player, "gamerule.write")) {
		perm.no(player, "gamerule.write");
		goto("wait");
	}
	value = list.getIndex(args, 1);
	if(gamerule.isBool(gamerule_value)) {
		if(!isBool(value)) {
			msg.prefix(player, prefix_commands, "Boolean expected.");
			goto("wait");
		}
		gamerule.setBool(gamerule_value, value);
	} elseif(gamerule.isInt(gamerule_value)) {
		if(!isDouble(value)) {
			msg.prefix(player, prefix_commands, "Number expected.");
			goto("wait");
		}
		gamerule.setInt(gamerule_value, value);
		value = text.number(value);
	} else {
		msg.prefix(player, prefix_commands, "Unknown gamerule type.");
		goto("wait");
	}
	if(world.getName(world) == "overworld") {
		msg.prefix(player, prefix_commands, concat(gamerule_string, " set to ", value, "."));
	} else {
		msg.prefix(player, prefix_commands, concat(gamerule_string, " set to ", value, " (not persistent)."));
	}
	goto("wait");
}
goto("wait");

@tip
if(size == 0) {
	msg.prefix(player, prefix_tips, "§r/tip ...");
	msg.text(player, "§e - list §rList all tips");
	msg.text(player, "§e - add <tip> <text> §rAdds a tip");
	msg.text(player, "§e - remove <tip> §rRemoves a tip");
	msg.text(player, "§e - loop <tip> <boolean> §rTrue shows on tip loop");
	msg.text(player, "§e - <tip> [player] §rSends a tip to all/a player");
	goto("wait");
}
arg0 = text.toLowerCase(list.getIndex(args, 0));
if(arg0 == "list") {
	msg.text(player, "§r--==§eTipps§r==--");
	list = tip.getAll();
	if(list.getSize(list) == 0) {
		msg.prefix(player, prefix_tips, "No tips available.");
		goto("wait");
	}
	iter = iterator(list);
	while(hasNext(iter)) {
		a = next(iter);
		tipp_key = a[0];
		tipp_value = a[1];
		tipp_loop = a[2];
		if(tipp_loop) {
			tipp_loop = concat("§a", tipp_loop);
		} else {
			tipp_loop = concat("§c", tipp_loop);
		}
		msg.text(player, concat(" ", tipp_loop, " §e", tipp_key, "§r : ", tipp_value));
	}
	goto("wait");
}
if(arg0 == "add") {
	if(size < 3) {
		msg.prefix(player, prefix_commands, "/tip add <name> <text>");
		goto("wait");
	}
	tipp_key = list.getIndex(args, 1);
	tipp_value = concatList(args, " ", 2, size - 1);
	tipp_value = text.replace(tipp_value, "&", "§");
	tipp.register(tipp_key, tipp_value);
	msg.prefix(player, prefix_tips, "Tip added.");
	goto("wait");
}
if(arg0 == "loop") {
	if(size != 3) {
		msg.prefix(player, prefix_commands, "/tip loop <tip> <boolean>");
		goto("wait");
	}
	tipp_key = list.getIndex(args, 1);
	tipp_value = tipp.get(tipp_key);
	if(tipp_value == null) {
		msg.prefix(player, prefix_tips, "This tip does not exist.");
		goto("wait");
	}
	boolean = list.getIndex(args, 2);
	if(text.class(boolean) != "Boolean") {
		msg.prefix(player, prefix_tips, "True or false expected.");
		goto("wait");
	}
	if(boolean) {
		tip.setLoop(tipp_key, boolean);
	} else {
		tip.setLoop(tipp_key, boolean);
	}
	msg.prefix(player, prefix_tips, "Tip settings changed.");
	goto("wait");
}
if(arg0 == "remove") {
	if(size != 2) {
		msg.prefix(player, prefix_commands, "/tip remove <name>");
		goto("wait");
	}
	tipp_key = list.getIndex(args, 1);
	tip.remove(tipp_key);
	msg.prefix(player, prefix_tips, "Tip removed.");
	goto("wait");
}
tipp_key = arg0;
tipp_value = tipp.get(tipp_key);
if(tipp_value == null) {
	msg.prefix(player, prefix_tips, "This tip does not exist.");
	goto("wait");
}
if(size == 1) {
	p = "online";
} else {
	p_name = list.getIndex(args, 1);
	if(!isOnline(p_name)) {
		msg.prefix(player, prefix_tips, "This player is not online.");
		goto("wait");
	}
	p = read.player(p_name);
	msg.prefix(player, prefix_tips, concat("Tip sent to §7", p_name, "§r."));
}
if(text.contains(tipp_value, "https://")) {
	a = text.getLinkMessage(tipp_value);
	msg_before = a[0];
	msg_link = a[1];
	msg_after = a[2];
	msg.text(p, concat("§r[§e", player.getName(player), "§r] "), msg_before, msg_link, msg_after);
	goto("wait");
}
msg.text(p, concat("§r[§e", player.getName(player), "§r] ", tipp_value));
goto("wait");

@help
if(size > 1) {
	msg.prefix(player, prefix_commands, "/help [side]");
	goto("wait");
}
//Auf Permission überprüfen
temp_list = list.new();
for(i = 0; i < list.getSize(command_list); i++) {
	command = list.getIndex(command_list, i);
	if(perm.has(player, command)) {
		list.add(temp_list, command);
	}
}
list.sort(temp_list);

temp_size = list.getSize(temp_list);
max_side = temp_size / 10;
if(size == 0) {
	side = 1;
	print_side = side - 1;
} else {
	side = list.getIndex(args, 0);
	if(!isDouble(side)) {
		msg.prefix(player, prefix_commands, "/help [side]");
		goto("wait");
	}
	print_side = side - 1;
	if(print_side < 0 || print_side > max_side) {
		msg.prefix(player, prefix_commands, concat("Möglich: 1 - ", text.number(math.roundDown(max_side + 1))));
		goto("wait");
	}
}
msg.text(player, concat("§a --- Help ", text.number(side), " ---"));
for(i = print_side * 10; i < print_side * 10 + 10; i++) {
	if(i < temp_size) {
		command = list.getIndex(temp_list, i);
		command = text.hover(command, map.getOrDefault(command_map, command, ""));
		msg.text(player,  " /", command);
	}
}
if(side == 1) {
	backward = "§c<<Backward<<";
	forward = text.click("§b>>Forward>>", concat("/help ", side + 1));
} elseif(side > max_side) {
	backward = text.click("§b<<Backward<<", concat("/help ", side - 1));
	forward = "§c>>Forward>>";
} else {
	backward = text.click("§b<<Backward<<", concat("/help ", side - 1));
	forward = text.click("§b>>Forward>>", concat("/help ", side + 1));
}
msg.text(player, backward, " ", forward);
goto("wait");

@cli
if(size != 1) {
	msg.prefix(player, prefix_commands, "/cli <radius>");
	goto("wait");
}
radius = list.getIndex(args, 0);
if(!isDouble(radius) || radius < 0) {
	msg.prefix(player, prefix_commands, "Positive number expected.");
	goto("wait");
}
entity.removeAll("net.minecraft.entity.item.ItemEntity", entity.getLocation(player), radius);
msg.prefix(player, prefix_commands, "Items removed.");
goto("wait");

@plough
if(size != 1) {
	msg.prefix(player, prefix_commands, "/plough <radius>");
	goto("wait");
}
radius = list.getIndex(args, 0);
if(!isDouble(radius)) {
	msg.prefix(player, prefix_commands, "Number expected.");
	goto("wait");
}
if(radius < 0) {
	msg.prefix(player, prefix_commands, "Positive number expected.");
	goto("wait");
}
center_loc = getBlockLocation(entity.getLocation(player));
for(x = radius * -1; x <= radius; x++) {
	for(z = radius * -1; z <= radius; z++) {
		for(y = radius * -1; y <= radius; y++) {
			length = math.hypot(x, math.hypot(y, z));
			if(length <= radius) {
				mod_loc = loc.mod(center_loc, x, y, z);
				block = block.get(mod_loc);
				if(block.hasTag(dirt_tag, block) && block.getType(loc.mod(mod_loc, 0, 1, 0)) == "minecraft:air") {
					block.set(mod_loc, "minecraft:farmland[moisture=7]");
				}
			}
		}
	}
}
msg.prefix(player, prefix_commands, "Field ploughed.");
goto("wait");

@plant
if(size != 1) {
	msg.prefix(player, prefix_commands, "/plant <radius>");
	goto("wait");
}
radius = list.getIndex(args, 0);
if(!isDouble(radius)) {
	msg.prefix(player, prefix_commands, "Number expected.");
	goto("wait");
}
if(radius < 0) {
	msg.prefix(player, prefix_commands, "Positive number expected.");
	goto("wait");
}
center_loc = getBlockLocation(entity.getLocation(player));
for(x = radius * -1; x <= radius; x++) {
	for(z = radius * -1; z <= radius; z++) {
		for(y = radius * -1; y <= radius; y++) {
			length = math.hypot(x, math.hypot(y, z));
			if(length <= radius) {
				mod_loc = loc.mod(center_loc, x, y, z);
				upper_loc = loc.mod(mod_loc, 0, 1, 0);
				if(block.getType(mod_loc) == "minecraft:farmland" && block.getType(upper_loc) == "minecraft:air") {
					block.set(upper_loc, "minecraft:wheat[age=7]");
				}
			}
		}
	}
}
msg.prefix(player, prefix_commands, "Field planted.");
goto("wait");

@grow
if(size != 1) {
	msg.prefix(player, prefix_commands, "/grow <radius>");
	goto("wait");
}
radius = list.getIndex(args, 0);
if(!isDouble(radius)) {
	msg.prefix(player, prefix_commands, "Number expected.");
	goto("wait");
}
if(radius < 0) {
	msg.prefix(player, prefix_commands, "Positive number expected.");
	goto("wait");
}
center_loc = getBlockLocation(entity.getLocation(player));
grow(center_loc, radius);
msg.prefix(player, prefix_commands, "Field grown.");
goto("wait");

@start
if(size != 1) {
	@starthelp
	msg.prefix(sender, prefix_commands, "/start ...");
	msg.text(sender, " - ai");
	msg.text(sender, " - chat");
	msg.text(sender, " - commands");
	msg.text(sender, " - creative");
	msg.text(sender, " - damage");
	msg.text(sender, " - doors");
	msg.text(sender, " - fixitems");
	msg.text(sender, " - friends");
	msg.text(sender, " - games");
	msg.text(sender, " - gemstones");
	msg.text(sender, " - harvest");
	msg.text(sender, " - hawkeye");
	msg.text(sender, " - herobrine");
	msg.text(sender, " - lectern");
	msg.text(sender, " - loom");
	msg.text(sender, " - mails");
	msg.text(sender, " - mobarena");
	msg.text(sender, " - perms");
	msg.text(sender, " - playerdata");
	msg.text(sender, " - pumpkin");
	msg.text(sender, " - recipes");
	msg.text(sender, " - scheduler");
	msg.text(sender, " - shop");
	msg.text(sender, " - sitting");
	msg.text(sender, " - stats");
	msg.text(sender, " - story");
	msg.text(sender, " - survival");
	msg.text(sender, " - ticket");
	msg.text(sender, " - timber");
	msg.text(sender, " - trader");
	msg.text(sender, " - voxel");
	goto("wait");
}
arg0 = text.toLowerCase(list.getIndex(args, 0));
modTimer(-500);
if(arg0 == "ai") {
	script = script.get("Ai");
	if(script != null) {
		script.term(script);
	}
	script.startNamed("Ai", "system/ai", "utils/u_general");
}
elseif(arg0 == "commands") {
	script = script.startNamed("Commands", "system/commands", "utils/u_general", "utils/u_commands");
	if(script == null) {
		snuvi.debug("Old commands script still active due to error in new script");
		goto("wait");
	}
	script.term(script.get());
}
elseif(arg0 == "chat") {
	script = script.get("Chat");
	if(script != null) {
		script.term(script);
	}
	script.startNamed("Chat", "utils/u_error", "system/chat", "utils/u_general");
}
elseif(arg0 == "creative") {
	script = script.get("Creative");
	if(script != null) {
		script.term(script);
	}
	script.startNamed("Creative", "utils/u_error", "system/creative", "utils/u_general");
}
elseif(arg0 == "damage") {
	script = script.get("Damage");
	if(script != null) {
		script.term(script);
	}
	script.startNamed("Damage", "utils/u_error", "system/damage", "utils/u_general");
}
elseif(arg0 == "doors") {
	script = script.get("Doors");
	if(script != null) {
		script.term(script);
	}
	script.startNamed("Doors", "utils/u_error", "system/doors", "utils/u_general");
}
elseif(arg0 == "fixitems") {
	script = script.get("Fixitems");
	if(script != null) {
		script.term(script);
	}
	script.startNamed("Fixitems", "utils/u_error", "system/fixitems", "utils/u_general");
}
elseif(arg0 == "games") {
	script = script.get("Gamecenter");
	if(script != null) {
		script.term(script);
	}
	script.startNamed("Gamecenter", "utils/u_error", "system/gamecenter", "utils/u_general", "utils/u_games");
}
elseif(arg0 == "gemstones") {
	script = script.get("Gemstones");
	if(script != null) {
		script.term(script);
	}
	script.startNamed("Gemstones", "utils/u_error", "survival/gemstones", "utils/u_general");
}
elseif(arg0 == "harvest") {
	script = script.get("Harvest");
	if(script != null) {
		script.term(script);
	}
	script.startNamed("Harvest", "utils/u_error", "survival/harvest", "utils/u_general");
}
elseif(arg0 == "hawkeye") {
	script = script.get("Hawkeye");
	if(script != null) {
		script.term(script);
	}
	script.startNamed("Hawkeye", "utils/u_error", "system/hawkeye", "utils/u_general");
}
elseif(arg0 == "herobrine") {
	script = script.get("Herobrine");
	if(script != null) {
		script.term(script);
	}
	script.startNamed("Herobrine", "utils/u_error", "survival/herobrine", "utils/u_general");
}
elseif(arg0 == "lectern") {
	script = script.get("Lectern");
	if(script != null) {
		script.term(script);
	}
	script.startNamed("Lectern", "utils/u_error", "survival/lectern", "utils/u_general");
}
elseif(arg0 == "loom") {
	script = script.get("Loom");
	if(script != null) {
		script.term(script);
	}
	script.startNamed("Loom", "utils/u_error", "survival/loom", "utils/u_general");
}
elseif(arg0 == "perms") {
	script = script.get("Perms");
	if(script != null) {
		script.term(script);
	}
	script.startNamed("Perms", "utils/u_error", "system/perms", "utils/u_general");
}
elseif(arg0 == "playerdata") {
	script = script.get("Playerdata");
	if(script != null) {
		script.term(script);
	}
	script.startNamed("Playerdata", "utils/u_error", "system/player_data", "utils/u_general");
}
elseif(arg0 == "pumpkin") {
	script = script.get("Pumpkin");
	if(script != null) {
		script.term(script);
	}
	script.startNamed("Pumpkin", "utils/u_error", "survival/pumpkin", "utils/u_general");
}
elseif(arg0 == "recipes") {
	script = script.get("Recipes");
	if(script != null) {
		script.term(script);
	}
	script.startNamed("Recipes", "survival/recipes");
}
elseif(arg0 == "stats") {
	script = script.get("Ranklist");
	if(script != null) {
		script.term(script);
	}
	script.startNamed("Ranklist", "utils/u_error", "system/ranklist", "utils/u_general", "utils/u_games");
}
elseif(arg0 == "scheduler") {
	script = script.get("Scheduler");
	if(script != null) {
		script.term(script);
	}
	script.startNamed("Scheduler", "utils/u_error", "system/scheduler", "utils/u_general");
}
elseif(arg0 == "shop") {
	script = script.get("Shops");
	if(script != null) {
		script.term(script);
	}
	script.startNamed("Shops", "utils/u_error", "system/chestshops", "utils/u_general");
}
elseif(arg0 == "mails") {
	script = script.get("Mails");
	if(script != null) {
		script.term(script);
	}
	script.startNamed("Mails", "utils/u_error", "system/mailsystem", "utils/u_general");
}
elseif(arg0 == "mobarena") {
	script = script.get("Mobarena");
	if(script != null) {
		script.term(script);
	}
	script.startNamed("Mobarena", "utils/u_error", "survival/mobarena", "utils/u_general");
}
elseif(arg0 == "ticket") {
	script = script.get("Ticket");
	if(script != null) {
		script.term(script);
	}
	script.startNamed("Ticket", "utils/u_error", "system/tickets", "utils/u_general");
}
elseif(arg0 == "timber") {
	script = script.get("Timber");
	if(script != null) {
		script.term(script);
	}
	script.startNamed("Timber", "utils/u_error", "survival/timber", "utils/u_general");
}
elseif(arg0 == "trader") {
	script = script.get("Trader");
	if(script != null) {
		script.term(script);
	}
	script.startNamed("Trader", "utils/u_error", "survival/trader", "utils/u_general");
}
elseif(arg0 == "story") {
	script = script.get("Story");
	if(script != null) {
		script.term(script);
	}
	script.startNamed("Story", "utils/u_error", "story/story", "utils/u_general");
	script = script.get("QuestsAdmont");
	if(script != null) {
		script.term(script);
	}
	script.startNamed("QuestsAdmont", "utils/u_error", "story/admont/core", "utils/u_general", "utils/u_quest");
	script = script.get("QuestsSchiffbruch");
	if(script != null) {
		script.term(script);
	}
	script.startNamed("QuestsSchiffbruch", "utils/u_error", "story/schiffbruch/core", "utils/u_general", "utils/u_quest");
}
elseif(arg0 == "sitting") {
	script = script.get("Sitting");
	if(script != null) {
		script.term(script);
	}
	script.startNamed("Sitting", "utils/u_error", "system/sitting", "utils/u_general");
}
elseif(arg0 == "survival") {
	script = script.get("Survival");
	if(script != null) {
		script.term(script);
	}
	script.startNamed("Survival", "utils/u_error", "survival/survival", "utils/u_general");
}
elseif(arg0 == "voxel") {
	script = script.get("Voxel");
	if(script != null) {
		script.term(script);
	}
	script.startNamed("Voxel", "system/voxel");
}
else {
	goto("starthelp");
}
goto("wait");

@senditem
if(size != 1) {
	msg.prefix(player, prefix_commands, "/senditem <player>");
	goto("wait");
}
item = living.getEquip(player, "hand");
if(item.getType(item) == "minecraft:air") {
	msg.prefix(player, prefix_commands, "You need to hold an item in your hand.");
	goto("wait");
}
p_name = list.getIndex(args, 0);
p_uuid = player.getUuid(p_name);
if(p_uuid == null) {
	msg.prefix(player, prefix_commands, "This player has never been online.");
	goto("wait");
}
p = read.player(p_name);
if(p == null) {
	msg.prefix(player, prefix_commands, "This player is not online.");
	goto("wait");
}
player.safeGiveItem(p, item);
player.removeItem(player, item);
goto("wait");

@top
player_loc = entity.getLocation(player);
y = 255;
loc.setY(player_loc, y);

while(y > 0 && block.isAir(player_loc)) {
	loc.setY(player_loc, y);
	y--;
}
player.teleport(player, loc.mod(player_loc, 0, 1, 0), true);
goto("wait");

@creative
crea_spawn = world.getCreativeSpawn();
world = loc.getWorld(crea_spawn);
if(world == null) {
	msg.prefix(player, prefix_commands, "This world is not loaded.");
	goto("wait");
}
if(size > 1) {
	msg.prefix(player, prefix_commands, "/story [player]");
	goto("wait");
}
if(size == 1) {
	affectedname = list.getIndex(args, 0);
	affectedplayer = read.player(affectedname);
	if(affectedplayer == null) {
		msg.prefix(player, prefix_commands, "This player is not online.");
		goto("wait");
	}
	if(!perm.has(player, "teleport.other")) {
		perm.no(player, "teleport.other");
		goto("wait");
	}
}
if(player.hasMinigame(affectedplayer)) {
	if(size == 1) {
		msg.prefix(player, prefix_commands, "This player can't be teleported now.");
		goto("wait");
	}
	msg.prefix(player, prefix_commands, "You can't teleport now.");
	goto("wait");
}
if(size == 1) {
	if(player != affectedplayer) {
		affectedname = player.getName(affectedplayer);
		msg.prefix(player, prefix_commands, concat(affectedname, " was teleported to the creative world."));
	}
}
if(player.teleport(affectedplayer, crea_spawn, true)) {
	msg.prefix(affectedplayer, prefix_commands, "You have been teleported to the creative world.");
}
goto("wait");

@story
story_spawn = world.getStorySpawn();
world = loc.getWorld(story_spawn);
if(world == null) {
	msg.prefix(player, prefix_commands, "This world is not loaded.");
	goto("wait");
}
if(size > 1) {
	msg.prefix(player, prefix_commands, "/story [player]");
	goto("wait");
}
if(size == 1) {
	affectedname = list.getIndex(args, 0);
	affectedplayer = read.player(affectedname);
	if(affectedplayer == null) {
		msg.prefix(player, prefix_commands, "This player is not online.");
		goto("wait");
	}
	if(!perm.has(player, "teleport.other")) {
		perm.no(player, "teleport.other");
		goto("wait");
	}
}
if(player.hasMinigame(affectedplayer)) {
	if(size == 1) {
		msg.prefix(player, prefix_commands, "This player can't be teleported now.");
		goto("wait");
	}
	msg.prefix(player, prefix_commands, "You can't teleport now.");
	goto("wait");
}
if(size == 1) {
	if(player != affectedplayer) {
		affectedname = player.getName(affectedplayer);
		msg.prefix(player, prefix_commands, concat(affectedname, " was teleported to the story world."));
	}
}
if(player.teleport(affectedplayer, story_spawn, true)) {
	msg.prefix(affectedplayer, prefix_commands, "You have been teleported to the story world.");
}
goto("wait");

@games
world = loc.getWorld(gamesspawn);
if(world == null) {
	msg.prefix(player, prefix_commands, "This world is not loaded.");
	goto("wait");
}
if(size > 1) {
	msg.prefix(player, prefix_commands, "/games [player]");
	goto("wait");
}
if(size == 1) {
	affectedname = list.getIndex(args, 0);
	affectedplayer = read.player(affectedname);
	if(affectedplayer == null) {
		msg.prefix(player, prefix_commands, "This player is not online.");
		goto("wait");
	}
	if(!perm.has(player, "teleport.other")) {
		perm.no(player, "teleport.other");
		goto("wait");
	}
}
if(player.hasMinigame(affectedplayer)) {
	if(size == 1) {
		msg.prefix(player, prefix_commands, "This player can't be teleported now.");
		goto("wait");
	}
	msg.prefix(player, prefix_commands, "You can't teleport now.");
	goto("wait");
}
if(size == 1) {
	if(player != affectedplayer) {
		affectedname = player.getName(affectedplayer);
		msg.prefix(player, prefix_commands, concat(affectedname, " was teleported to the games world."));
	}
}
if(player.teleport(affectedplayer, gamesspawn, true)) {
	msg.prefix(affectedplayer, prefix_commands, "You have been teleported to the games world.");
}
goto("wait");

@bug
msg.prefix(player, prefix_commands, "Found a bug? Report it to marvinius with §b/mail marvinius <message>");
goto("wait");

@repair
item = living.getEquip(player, "hand");
if(item.getType(item) == "minecraft:air") {
	msg.prefix(player, prefix_commands, "You have to hold an item in your mainhand.");
	goto("wait");
}
item.setDamage(item, 0);
msg.prefix(player, prefix_commands, "Your item has been repaired.");
goto("wait");

@report
msg.prefix(player, prefix_commands, "Want to report a player?");
msg.text(player, " - §b/ticket <message>");
msg.text(player, " - §b/mail marvinius <message>");
goto("wait");

@playtime
if(size == 0) {
	p_id = player.getId(player);
	arg0 = player.getName(player);
} else {
	arg0 = text.toLowerCase(list.getIndex(args, 0));
	if(arg0 == "year") {
		if(!perm.has(player, "playtime.year")) {
			perm.no(player, "playtime.year");
			goto("wait");
		}
		calendar = time.new(time.getMillis());
		now_month = time.getMonth(calendar);
		now_year = time.getYear(calendar);
		if(size == 1) {
			year = now_year;
		} else {
			year = list.getIndex(args, 1);
			if(!isDouble(year)) {
				msg.prefix(player, prefix_commands, "Number expected.");
				goto("wait");
			}
			if(year > now_year) {
				year = now_year;
			}
		}
		//Von allen Online-Spielern die Onlinezeit abrufen, summieren und zur Heute-Spielzeit addieren
		since_minutes = playtime.getTotalOnlineMinutes();
		//Tabelle erstellen
		table = table.new("§8", 4, 5, 5);
		msg.text(player, table.getStart(table));
		msg.text(player, table.get(table, text.number(year), "Playtime", "Change"));
		msg.text(player, table.getMiddle(table));
		//Erstes Mitternacht des gewählten Jahres festlegen
		now_day = time.getDay(calendar);
		time.nextDay(calendar);
		midnight = time.from(calendar) - (time.getDaysBetween(1, 1, year, now_day, now_month, now_year) + 1) * 86400000;
		//Monats-Spielzeit berechnen
		temp_list = list.new();
		list.add(temp_list, playtime.getInterval(midnight - time.getMonthDays(12, year - 1) * 86400000, midnight)); //Dezember des Vorjahres hinzufügen
		for(i = 1; i <= 12; i++) {
			midnight_2 = midnight + time.getMonthDays(i, now_year) * 86400000; //Alle Tage eines Monats * 24 Stunden
			minutes = playtime.getInterval(midnight, midnight_2);
			list.add(temp_list, minutes);
			midnight = midnight_2;
			if(i == now_month && year == now_year) {
				minutes += since_minutes;
			}
		}
		for(i = 1; i <= 12; i++) {
			minutes = list.getIndex(temp_list, i);
			hours = math.roundDown(minutes / 60);
			mod_minutes = minutes % 60;
			if(mod_minutes < 10) {
				time_string = concat("§6", text.number(hours), ":0", text.number(mod_minutes), " h");
			} else {
				time_string = concat("§6", text.number(hours), ":", text.number(mod_minutes), " h");
			}
			pre_minutes = list.getIndex(temp_list, i - 1);
			if(minutes >= pre_minutes) {
				color = "§a+";
				a = minutes;
				b = pre_minutes;
			} else {
				color = "§c-";
				a = pre_minutes;
				b = minutes;
			}
			if(b == 0) {
				change = "";
			} else {
				change = math.round(a / b * 100 - 100);
				change = concat(color, text.number(change), " %");
			}
			msg.text(player, table.get(table, concat("§6", month.getShortName(i)), time_string, change));
			if(i == now_month && year == now_year) {
				break;
			}
		}
		//Tabelle beenden
		msg.text(player, table.getEnd(table));
		goto("wait");
	}
	if(arg0 == "month") {
		if(!perm.has(player, "playtime.month")) {
			perm.no(player, "playtime.month");
			goto("wait");
		}
		calendar = time.new(time.getMillis());
		now_month = time.getMonth(calendar);
		now_year = time.getYear(calendar);
		year = now_year;
		if(size == 1) { 
			month = now_month;
		} else {
			month = list.getIndex(args, 1);
			if(!isDouble(month)) {
				msg.prefix(player, prefix_commands, "Number expected.");
				goto("wait");
			}
			if(month < 1) {
				month = 1;
			} elseif(month > 12) {
				month = 12;
			}
			if(size == 3) {
				year = list.getIndex(args, 2);
				if(!isDouble(year)) {
					msg.prefix(player, prefix_commands, "Number expected.");
					goto("wait");
				}
			}
			if(year > now_year ||(year >= now_year && month > now_month)) {
				month = now_month;
				year = now_year;
			}
		}
		//Von allen Online-Spielern die Onlinezeit abrufen, summieren und zur Heute-Spielzeit addieren
		since_minutes = playtime.getTotalOnlineMinutes();
		//Tabelle erstellen
		table = table.new("§8", 4, 5, 5);
		msg.text(player, table.getStart(table));
		msg.text(player, table.get(table, month.getShortName(month), "Playtime", "Players"));
		msg.text(player, table.getMiddle(table));
		//Erstes Mitternacht des gewählten Monats festlegen
		now_day = time.getDay(calendar);
		time.nextDay(calendar);
		midnight = time.from(calendar) - (time.getDaysBetween(1, month, year, now_day, now_month, now_year) + 1) * 86400000;
		//Tages-Spielzeit berechnen
		for(i = 1; i <= time.getMonthDays(month, year); i++) {
			players = playtime.getPlayersPerInterval(midnight, midnight + 86400000);
			minutes = playtime.getInterval(midnight, midnight + 86400000);
			midnight += 86400000; //24 Stunden
			if(i == now_day && month == now_month && year == now_year) {
				minutes += since_minutes;
			}
			hours = math.roundDown(minutes / 60);
			minutes = minutes % 60;
			if(minutes < 10) {
				time_string = concat("§6", text.number(hours), ":0", text.number(minutes), " h");
			} else {
				time_string = concat("§6", text.number(hours), ":", text.number(minutes), " h");
			}
			msg.text(player, table.get(table, concat("§6", text.number(i)), time_string, text.number(players)));
			if(i == now_day && month == now_month && year == now_year) {
				break;
			}
		}
		//Tabelle beenden
		msg.text(player, table.getEnd(table));
		goto("wait");
	}
	if(arg0 == "all") {
		msg.text(player, getSpacer());
		msg.prefix(player, prefix_commands, "Server-Playtime");
		//Von allen Online-Spielern die Onlinezeit abrufen, summieren und zur Heute-Spielzeit addieren
		since_minutes = playtime.getTotalOnlineMinutes();
		now_time = time.getMillis();
		//Spielzeit heute
		calendar = time.new(now_time);
		time.nextDay(calendar);
		midnight = time.from(calendar) - 86400000; //24 Stunden von nächstem Mitternacht abziehen
		minutes = playtime.getInterval(midnight, now_time) + since_minutes;
		hours = text.number(math.roundDown(minutes / 60));
		minutes = text.number(minutes % 60);
		msg.text(player, "§6Today: §r", hours, " h ", minutes, " min");
		//Spielzeit 30 Tage für alle Spieler
		oneMonthAgo = now_time - 2592000000; //30 Tage von jetzt an
		minutes = playtime.getInterval(oneMonthAgo, now_time) + since_minutes;
		hours = text.number(math.roundDown(minutes / 60));
		minutes = text.number(minutes % 60);
		msg.text(player, "§630 Days: §r", hours, " h ", minutes, " min");
		//Spielzeit gesamt
		minutes = playtime.getTotal();
		hours = text.number(math.roundDown(minutes / 60));
		minutes = text.number(minutes % 60);
		msg.text(player, "§6Total: §r", hours, " h ", minutes, " min");
		goto("wait");
	}
	if(!perm.has(player, "playtime.other")) {
		perm.no(player, "playtime.other");
		goto("wait");
	}
}
if(!checkIfEverOnline(arg0)) {
	msg.prefix(player, prefix_commands, "This player has never been online.");
	goto("wait");
}
now_time = time.getMillis();
p_uuid = player.getUuid(arg0);
arg0 = player.getName(p_uuid);
p_id = player.getId(p_uuid);
msg.text(player, getSpacer());
msg.prefix(player, prefix_commands, concat("Playtime of ", player.getName(p_uuid)));
//Online seit
since_minutes = playtime.getPlayerOnlineMinutes(p_id);
if(isOnline(arg0)) {
	since_hours = math.roundDown(since_minutes / 60);
	mod_minutes = since_minutes % 60;
	msg.text(player, concat("§aOnline since: §r", text.number(since_hours), " hours ", text.number(mod_minutes), " minutes"));
} else {
	msg.text(player, "§6Status: ", "§cOffline");
}
//Spielzeit heute
calendar = time.new(now_time);
time.nextDay(calendar);
midnight = time.from(calendar) - 86400000; //24 Stunden von nächstem Mitternacht abziehen
minutes = playtime.getPlayerInterval(p_id, midnight, now_time) + since_minutes;
hours = text.number(math.roundDown(minutes / 60));
minutes = text.number(minutes % 60);
msg.text(player, "§6Today: §r", hours, " h ", minutes, " min");
//Spielzeit 30 Tage
oneMonthAgo = now_time - 2592000000; //30 Tage von jetzt an
minutes = playtime.getPlayerInterval(p_id, oneMonthAgo, now_time) + since_minutes;
hours = text.number(math.roundDown(minutes / 60));
minutes = text.number(minutes % 60);
msg.text(player, "§630 Days: §r", hours, " h ", minutes, " min");
//Spielzeit gesamt
minutes = playtime.getPlayerTotal(p_id);
hours = text.number(math.roundDown(minutes / 60));
minutes = text.number(minutes % 60);
msg.text(player, "§6Total: §r", hours, " h ", minutes, " min");
goto("wait");

@datatools
if(size == 0) {
	@datatoolshelp
	msg.prefix(player, prefix_datatools, "/datatools ...");
	msg.text(player, "§6 - hide <name> §rHides wusi on an itemstack");
	msg.text(player, "§6 - attribute <attribut> <slot> <double> <op> §rAdd an attribute to an item");
	msg.text(player, "§6 - hide-entity §rHide an entity");
	msg.text(player, "§6 - show-entity §rShow an entity");
	msg.text(player, "§6 - name-entity <name> §rRename an entity");
	msg.text(player, "§6 - name-visibility <boolean> §rShow name (not) permanent");
	msg.text(player, "§6 - name-item <name> §rRename an item");
	msg.text(player, "§6 - lore-item <line> <lore> §rSet an item lore");
	msg.text(player, "§6 - print-entity §rPrint entities nbt-tag");
	goto("wait");
}
arg0 = text.toLowerCase(list.getIndex(args, 0));
if(arg0 == "hide") {
	if(size < 2) {
		msg.prefix(player, prefix_datatools, "/datatools hide <name>");
		goto("wait");
	}
	item = living.getEquip(player, "hand");
	if(item.getType(item) == "minecraft:air") {
		msg.prefix(player, prefix_datatools, "Hold an item in your hand.");
		goto("wait");
	}
	name = text.concatList(args, " ", 1, size - 1);
	if(item.hide(item, name)) {
		msg.prefix(player, prefix_datatools, "You hided something.");
	} else {
		msg.prefix(player, prefix_datatools, "You can't hide that.");
	}
	goto("wait");
}
if(arg0 == "attribute") {
	if(size < 5) {
		msg.prefix(player, prefix_datatools, "/datatools attribute <attribut> <slot> <double> <op>");
		goto("wait");
	}
	item = living.getEquip(player, "hand");
	if(item.getType(item) == "minecraft:air") {
		msg.prefix(player, prefix_commands, "You have to hold an item in your mainhand.");
		goto("wait");
	}
	double = list.getIndex(args, 3);
	if(!isDouble(double) || double < 0) {
		msg.prefix(player, prefix_datatools, "Natural number expected.");
		goto("wait");
	}
	attribut = concat("generic.", text.toLowerCase(list.getIndex(args, 1)));
	if(!set.contains(attribut_set, attribut)) {
		msg.prefix(player, prefix_datatools, "Unknown attribute.");
		goto("wait");
	}
	slot = read.slot(list.getIndex(args, 2));
	if(slot == null) {
		msg.prefix(player, prefix_datatools, "Incorrect slot.");
		goto("wait");
	}
	operation = list.getIndex(args, 4);
	if(operation == "ADDITION") {
		operation = 0;
	} elseif(operation == "MULTIPLY_BASE") {
		operation = 1;
	} elseif(operation == "MULTIPLY_TOTAL") {
		operation = 2;
	} else {
		msg.prefix(player, prefix_datatools, "Incorrect operation.");
		goto("wait");
	}
	item.addAttribute(item, attribut, slot, double, operation);
	msg.prefix(player, prefix_datatools, "Attribute added.");
	goto("wait");
}
if(arg0 == "name-item") {
	if(size < 2) {
		msg.prefix(player, prefix_datatools, "/datatools name-item <name>");
		goto("wait");
	}
	item = living.getEquip(player, "hand");
	if(item.getType(item) == "minecraft:air") {
		msg.prefix(player, prefix_datatools, "You need to hold an item in your hand.");
		goto("wait");
	}
	name = text.concatList(args, " ", 1, size - 1);
	name = text.replace(name, "&", "§");
	name = text.replace(name, "\\n", "\n");
	item.setName(item, name);
	msg.prefix(player, prefix_datatools, concat("Item renamed to ", name, "§r."));
	goto("wait");
}
if(arg0 == "print-entity") {
	templist = living.near(player, 3);
	if(list.getSize(templist) == 0) {
		msg.prefix(player, prefix_datatools, "Too far away from an entity.");
		goto("wait");
	}
	entity = list.getIndex(templist, 0);
	txt_ent = text.entity(entity);
	msg.text(player, text.clipBoard(txt_ent, txt_ent));
	goto("wait");
}
if(arg0 == "lore-item") {
	if(size < 3) {
		msg.prefix(player, prefix_datatools, "/datatools lore-item <line> <lore>");
		goto("wait");
	}
	item = living.getEquip(player, "hand");
	if(item.getType(item) == "minecraft:air") {
		msg.prefix(player, prefix_datatools, "You need to hold an item in your hand.");
		goto("wait");
	}
	line = list.getIndex(args, 1);
	if(!isDouble(line)) {
		msg.prefix(player, prefix_datatools, "Number expected.");
		goto("wait");
	}
	if(line < 0) {
		msg.prefix(player, prefix_datatools, "Positive number expected.");
		goto("wait");
	}
	lore = text.concatList(args, " ", 2, size - 1);
	lore = text.replace(lore, "&", "§");
	item.addLore(item, line, lore);
	msg.prefix(player, prefix_datatools, "New lore added.");
	goto("wait");
}
if(arg0 == "maxhealth") {
	if(size < 2) {
		msg.prefix(player, prefix_datatools, "/datatools maxhealth <value>");
		goto("wait");
	}
	value = list.getIndex(args, 1);
	if(!isDouble(value)) {
		msg.prefix(player, prefix_datatools, "Number expected.");
		goto("wait");
	}
	templist = living.near(player, 3);
	if(list.getSize(templist) == 0) {
		msg.prefix(player, prefix_datatools, "Too far away from an entity.");
		goto("wait");
	}
	entity = list.getIndex(templist, 0);
	if(isPlayer(entity)) {
		msg.prefix(player, prefix_datatools, "To players not usable.");
		goto("wait");
	}
	living.setMaxHealth(entity, value);
	msg.prefix(player, prefix_datatools, concat("Entity ", entity.getType(entity), " has now Maxhealth: ", living.getMaxHealth(entity), "§r."));
	goto("wait");
}
if(arg0 == "name-entity") {
	if(size < 2) {
		msg.prefix(player, prefix_datatools, "§r/datatools name-entity <name>");
		goto("wait");
	}
	templist = living.near(player, 3);
	if(list.getSize(templist) == 0) {
		msg.prefix(player, prefix_datatools, "Too far away from an entity.");
		goto("wait");
	}
	entity = list.getIndex(templist, 0);
	name = text.concatList(args, " ", 1, size - 1);
	name = text.replace(name, "&", "§");
	name = text.replace(name, "\\n", "\n");
	entity.setName(entity, name, true);
	msg.prefix(player, prefix_datatools, concat("Entity renamed to ", name, "§r."));
	goto("wait");
}
if(arg0 == "name-visibility") {
	if(size != 2) {
		msg.prefix(player, prefix_datatools, "§r/datatools name-visibility <boolean>");
		goto("wait");
	}
	templist = living.near(player, 3);
	if(list.getSize(templist) == 0) {
		msg.prefix(player, prefix_datatools, "Too far away from an entity.");
		goto("wait");
	}
	entity = list.getIndex(templist, 0);
	boolean = list.getIndex(args, 1);
	name = entity.getName(entity);
	entity.setName(entity, name, boolean);
	msg.prefix(player, prefix_datatools, "Name-Visibility changed.");
	goto("wait");
}
if(arg0 == "hide-entity") {
	if(size != 1) {
		msg.prefix(player, prefix_datatools, "§r/datatools hide-entity");
		goto("wait");
	}
	templist = living.near(player, 3);
	if(list.getSize(templist) == 0) {
		msg.prefix(player, prefix_datatools, "Too far away from an entity.");
		goto("wait");
	}
	entity = list.getIndex(templist, 0);
	entity.setInvisible(entity, true);
	msg.prefix(player, prefix_datatools, "Entity is now hidden.");
	goto("wait");
}
if(arg0 == "show-entity") {
	if(size != 1) {
		msg.prefix(player, prefix_datatools, "§r/datatools show-entity");
		goto("wait");
	}
	templist = living.near(player, 3);
	if(list.getSize(templist) == 0) {
		msg.prefix(player, prefix_datatools, "Too far away from an entity.");
		goto("wait");
	}
	entity = list.getIndex(templist, 0);
	entity.setInvisible(entity, false);
	msg.prefix(player, prefix_datatools, "Entity is now visible.");
	goto("wait");
}
goto("datatoolshelp");

@human
if(size == 0) {
	@humanhelp
	msg.prefix(player, prefix_human, "/human ...");
	msg.text(player, concat("§6 - spawn §rSpawnt einen Human"));
	msg.text(player, concat("§6 - set <name> §rSetzt den Skin"));
	msg.text(player, concat("§6 - setuuid <uuid> §rSetzt den Skin"));
	msg.text(player, concat("§6 - name §rSetzt den Namen"));
	msg.text(player, concat("§6 - kill §rTötet einen Human"));
	msg.text(player, concat("§6 - size <scale> §rSetzt die Größenskalierung"));
	msg.text(player, concat("§6 - steve §rSchaltet auf Steve Skin"));
	msg.text(player, concat("§6 - alex §rSchaltet auf Alex Skin"));
	msg.text(player, concat("§6 - statue <bool> §rToggles between statue"));
	goto("wait");
}
arg0 = text.toLowerCase(list.getIndex(args, 0));
if(arg0 == "spawn") {
	human.spawn(entity.getLocation(player));
	msg.prefix(player, prefix_human, "Human gespawnt.");
	goto("wait");
}
player_loc = entity.getLocation(player);
human = entity.get(player_loc, 3, "me.km.entities.EntityHuman");
if(human == null) {
	msg.prefix(player, prefix_human, "Zu weit weg vom Human.");
	goto("wait");	
}
if(arg0 == "set") {
	if(size == 2) {
		name = list.getIndex(args, 1);
		human.setSkin(human, name);
		msg.prefix(player, prefix_human, "Skin gesetzt.");
		goto("wait");
	}
}
elseif(arg0 == "setuuid") {
	if(size == 2) {
		uuid = list.getIndex(args, 1);
		human.setSkin(human, uuid);
		msg.prefix(player, prefix_human, "Skin gesetzt.");
		goto("wait");
	}
}
elseif(arg0 == "name") {
	if(size > 1) {
		name = text.concatList(args, " ", 1, size - 1);
		name = text.replace(name, "&", "§");
		name = text.replace(name, "\\n", "\n");
		entity.setName(human, name, true);
		msg.prefix(player, prefix_human, concat("Das Entity trägt nun den Namen ", name, "§r."));
		goto("wait");
	}
}
elseif(arg0 == "kill") {
	entity.remove(human);
	msg.prefix(player, prefix_human, "Human getötet.");
	goto("wait");
}
elseif(arg0 == "size") {
	if(size == 2) {
		scale = list.getIndex(args, 1);
		if(!isDouble(scale)) {
			msg.prefix(player, prefix_human, "Number expected.");
			goto("wait");
		}
		if(scale > 10) {
			msg.prefix(player, prefix_human, "Maximal 10.");
			scale = 10;
		}
		human.setScale(human, scale);
		msg.prefix(player, prefix_human, "Größe verändert.");
		goto("wait");
	}
}
elseif(arg0 == "steve") {
	human.setSlim(human, false);
	msg.prefix(player, prefix_human, "Skin-Format geändert.");
	goto("wait");
}
elseif(arg0 == "alex") {
	human.setSlim(human, true);
	msg.prefix(player, prefix_human, "Skin-Format geändert.");
	goto("wait");
}
elseif(arg0 == "statue") {
	if(size == 1) {
		bool = true;
	} elseif(size == 2) {
		bool = list.getIndex(args, 1);
		if(bool != true && bool != false) {
			bool = true;
		}
	}
	human.setStatue(human, bool);
	msg.prefix(player, prefix_human, "Human changed.");
	goto("wait");
}
goto("humanhelp");

@answer
if(player.isMuted(player)) {
	msg.prefix(player, "§6Commands", "You are muted.");
	goto("wait");
}
if(size < 1) {
	msg.prefix(sender, prefix_commands, "/answer <message>");
	goto("wait");
}
player_uuid = player.getUuid(sender);
p_uuid = map.get(answer_map, player_uuid);
if(p_uuid == null) {
	msg.prefix(sender, prefix_commands, "There is no one you could answer.");
	goto("wait");
}
message = text.replace(text.concatList(text_args, " ", 0, size - 1), "&", "§");
if(text.startsWith(message, "https://", 0)) {
	message = text.link(message, message);
} else {
	message = text.concat("§e", message);
}
if(player.getId(p_uuid) == 18) {
	msg.text(sender, "§6[ -> §cSERVER§6] ", message);
	msg.text("SERVER", concat("§6[§c", sender_name), "§6] ", message);
} else {
	p = player.get(p_uuid);
	if(p == null) {
		msg.prefix(sender, prefix_commands, "This player is not online.");
		goto("wait");
	}
	msg.text(sender, concat("§6[§cme §6-> §c", player.getName(p)), "§6] ", message);
	msg.text(p, concat("§6[§c", sender_name), " §6-> §cme§6] ", message);
}
map.add(answer_map, p_uuid, player_uuid);
map.add(answer_map, player_uuid, p_uuid);
goto("wait");

@msg
if(player.isMuted(player)) {
	msg.prefix(player, "§6Commands", "You are muted.");
	goto("wait");
}
if(size < 2) {
	msg.prefix(sender, prefix_commands, "/msg <player> <message>");
	goto("wait");
}
p_name = list.getIndex(args, 0);
p_uuid = player.getUuid(p_name);
if(p_uuid == null) {
	msg.prefix(sender, prefix_commands, "Unknown player.");
	goto("wait");
}
message = text.replace(text.concatList(text_args, " ", 1, size - 1), "&", "§");
if(text.startsWith(message, "https://", 0)) {
	message = text.link(message, message);
} else {
	message = text.concat("§e", message);
}
if(text.toUpperCase(p_name) == "SERVER") {
	msg.text("SERVER", concat("§6[§c", sender_name), "§6] ", message);
	msg.text(sender, "§6[ -> §cSERVER§6] ", message);
} else {
	p = read.player(p_name);
	if(p == null) {
		msg.prefix(sender, prefix_commands, "This player is not online.");
		goto("wait");
	}
	msg.text(p, concat("§6[§c", sender_name, " §6-> §cme§6] ", message));
	msg.text(sender, concat("§6[§cme §6-> §c", player.getName(p), "§6] ", message));
}
player_uuid = player.getUuid(sender);
map.add(answer_map, p_uuid, player_uuid);
map.add(answer_map, player_uuid, p_uuid);
goto("wait");

@list
list = players.toList();
size = list.getSize(list);
msg.text(sender, getSpacer());
if(size == 1) {
	msg.text(sender, concat("§6There is ", text.number(size), " players online."));
} else {
	msg.text(sender, concat("§6There are ", text.number(size), " players online."));
}
for(i = 0; i < size; i++) {
	p = list.getIndex(list, i);
	full_name = player.getFullName(p);
	if(player.isAfk(p)) {
		full_name = concat(full_name, " §5§o[Afk]");
	}
	msg.text(sender, full_name);
}
goto("wait");

@ass
if(size < 2) {
	msg.prefix(player, prefix_commands, "§r/ass ...");
	msg.text(player, " - set <name>");
	msg.text(player, " - rename <name>");
	msg.text(player, " - remove <radius>");
	goto("wait");
}
arg0 = text.toLowerCase(list.getIndex(args, 0));
if(arg0 == "set") {
	name = text.concatList(args, " ", 1, size - 1);
	name = text.replace(name, "&", "§");
	name = text.replace(name, "\\n", "\n");
	ent = entity.spawn("km:nobody", entity.getLocation(player), "{NoGravity:true}");
	entity.setName(ent, name);
	goto("wait");
}
if(arg0 == "rename") {
	name = text.concatList(args, " ", 1, size - 1);
	name = text.replace(name, "&", "§");
	name = text.replace(name, "\\n", "\n");
	ent_list = living.near(player, 5);
	for(i = 0; i < list.getSize(ent_list); i++) {
		ent = list.getIndex(ent_list, i);
		if(entity.getType(ent) == "nobody") {
			entity.setName(ent, name);
			goto("wait");
		}
	}
	msg.prefix(player, prefix_commands, "§rKeinen Lufttext gefunden");
	goto("wait");
}
if(arg0 == "remove") {
	radius = list.getIndex(args, 1);
	if(!isDouble(radius)) {
		msg.prefix(player, prefix_commands, "Number expected.");
		goto("wait");
	}
	if(radius < 0 || radius > 5) {
		msg.prefix(player, prefix_commands, "§rRadius: 0-5");
		goto("wait");
	}
	ent_list = living.near(player, radius);
	for(i = 0; i < list.getSize(ent_list); i++) {
		ent = list.getIndex(ent_list, i);
		if(entity.getType(ent) == "nobody") {
			entity.remove(ent);
			msg.prefix(player, prefix_commands, "§rLufttext entfernt");
			goto("wait");
		}
	}
	msg.prefix(player, prefix_commands, "§rKeinen Lufttext gefunden");
}
goto("wait");

@coords
target_loc = player.getTarget(player, 5, false, false);
targettype = block.getType(target_loc);
if(targettype == "minecraft:air") {
	msg.prefix(player, prefix_commands, "You have to look at a block.");
	goto("wait");
}
msg.text(player, getSpacer());
x = text.Number(loc.getX(target_loc));
y = text.Number(loc.getY(target_loc));
z = text.Number(loc.getZ(target_loc));
msg.text(player, "§6World: §r", world.getName(loc.getWorld(target_loc)));
msg.text(player, "§6Coords: §r", x, " / ", y, " / ", z);
msg.text(player, "§6Block: §r", targettype);
goto("wait");

@sign
if(size == 0) {
	msg.prefix(player, prefix_commands, "/sign <1-4> [text]");
	goto("wait");
}
target_loc = player.getTarget(player, 5, false, false);
block = block.get(target_loc);
if(!block.hasTag(sign_tag, block)) {
	msg.prefix(player, prefix_commands, "Look at a sign.");
	goto("wait");
}
line = list.getIndex(args, 0);
if(!isDouble(line)) {
	msg.prefix(player, prefix_commands, "Number expected.");
	goto("wait");
}
if(!(line == 1 || line == 2 || line == 3 || line == 4)) {
	msg.prefix(player, prefix_commands, "Number between 1 and 5 expected.");
	goto("wait");
}
string = "";
if(size > 1) {
	for(i = 1; i < size; i++) {
		arg = list.getIndex(text_args, i);
		if(i == 1) {
			string = arg;
		} else {
			string = concat(string, " ", arg);
		}
	}
}
string = text.replace(string, "&", "§");
block.setSign(target_loc, line - 1, string);
goto("wait");

@head
if(size != 1) {
	msg.prefix(player, prefix_commands, "/head <player>");
	goto("wait");
}
name = list.getIndex(args, 0);
uuid = player.getUuid(name);
if(uuid == null) {
	player.giveItem(player, read.item(concat("{id:\"minecraft:player_head\", Count:1b, tag:{SkullOwner:\"", name, "\"}}")));
} else {
	player.giveItem(player, player.getHead(uuid, name));
}
goto("wait");

@mute
if(size < 1) {
	msg.prefix(sender, prefix_commands, "/mute <player>");
	goto("wait");
}
p_name = list.getIndex(args, 0);
if(!isOnline(p_name)) {
	msg.prefix(sender, prefix_commands, "This player is not online.");
	goto("wait");
}
p = read.player(p_name);
p_name = player.getName(p);
if(p_name == "marvinius") {
	msg.text(sender, "§cSorry §b¯\\_(._.)_/¯");
	goto("wait");
}
msg.text("online", concat("§c", p_name, " was muted by ", player.getName(sender), "."));
player.mute(p, true);
goto("wait");

@unmute
if(size < 1) {
	msg.prefix(sender, prefix_commands, "/unmute <player>");
	goto("wait");
}
p_name = list.getIndex(args, 0);
if(!isOnline(p_name)) {
	msg.prefix(sender, prefix_commands, "This player is not online.");
	goto("wait");
}
p = read.player(p_name);
p_name = player.getName(p);
if(p_name == "marvinius") {
	msg.text(sender, "§cSorry §b¯\\_(._.)_/¯");
	goto("wait");
}
msg.text("online", concat("§c", p_name, " was unmuted by ", player.getName(sender), "."));
player.mute(p, false);
goto("wait");

@kick
if(size < 1) {
	msg.prefix(sender, prefix_commands, "/kick <player> [reason]");
	goto("wait");
}
p_name = list.getIndex(args, 0);
if(!isOnline(p_name)) {
	msg.prefix(sender, prefix_commands, "This player is not online.");
	goto("wait");
}
p = read.player(p_name);
p_name = player.getName(p);
if(p_name == "marvinius") {
	msg.text(sender, "§cSorry §b¯\\_(._.)_/¯");
	goto("wait");
}
if(size > 1) {
	reason = text.concatList(args, " ", 1, size - 1);
	msg.text("online", concat("§c", p_name, " was kicked by ", player.getName(sender), ": ", reason));
} else {
	reason = "You got kicked";
	msg.text("online", concat("§c", p_name, " was kicked by ", player.getName(sender), "."));
}
ban.kick(p, reason);
goto("wait");

@silentkick
if(size < 1) {
	msg.prefix(sender, prefix_commands, "/silentkick <player> [reason]");
	goto("wait");
}
p_name = list.getIndex(args, 0);
if(!isOnline(p_name)) {
	msg.prefix(sender, prefix_commands, "This player is not online.");
	goto("wait");
}
p = read.player(p_name);
p_name = player.getName(p);
if(p_name == "marvinius") {
	msg.text(sender, "§cSorry §b¯\\_(._.)_/¯");
	goto("wait");
}
if(size > 1) {
	reason = text.concatList(args, " ", 1, size - 1);
	msg.text(sender, concat("§cYou silently kicked ", p_name, ": ", reason));
} else {
	reason = "You got kicked.";
	msg.text(sender, concat("§cYou silently kicked ", p_name, "."));
}
ban.kick(p, reason);
goto("wait");

@warn
if(size != 1) {
	msg.prefix(player, prefix_commands, "/warn <player>");
	goto("wait");
}
p_name = list.getIndex(args, 0);
if(!isOnline(p_name)) {
	msg.prefix(player, prefix_commands, "This player is not online.");
	goto("wait");
}
p = read.player(p_name);
p_name = player.getName(p);
if(p_name == "marvinius") {
	msg.text(player, "§cSorry §b¯\\_(._.)_/¯");
	goto("wait");
}
title.setSub(p, "is watching you");
title.send(p, concat("§c", player.getName(sender)));
msg.prefix(player, prefix_commands, "The player got warned.");
goto("wait");

@ban
if(size < 1) {
	msg.prefix(sender, prefix_commands, "/ban <player> [reason]");
	goto("wait");
}
p_name = list.getIndex(args, 0);
if(!checkIfEverOnline(p_name)) {
	msg.prefix(sender, prefix_commands, "This player has never been online.");
	goto("wait");
}
p_name = player.getName(player.getUuid(p_name));
if(p_name == "marvinius") {
	msg.text(sender, "§cSorry §b¯\\_(._.)_/¯");
	goto("wait");
}
sender_name = player.getName(sender);
if(size > 1) {
	reason = text.concatList(args, " ", 1, size - 1);
	msg.text("online", concat("§c", p_name, " got banned by ", sender_name, ". Reason: ", reason));
	msg.text("SERVER", concat("§c", p_name, " got banned by ", sender_name, ". Reason: ", reason));
} else {
	reason = "You got banned.";
	msg.text("online", concat("§c", p_name, " got banned by ", sender_name, "."));
	msg.text("SERVER", concat("§c", p_name, " got banned by ", sender_name, "."));
}
ban.add(player.getUuid(p_name), reason, sender_name);
if(isOnline(p_name)) {
	p = read.player(p_name);
	ban.kick(p, reason);
}
goto("wait");

@silentban
if(size < 1) {
	msg.prefix(sender, prefix_commands, "/silentban <player> [reason]");
	goto("wait");
}
p_name = list.getIndex(args, 0);
if(!checkIfEverOnline(p_name)) {
	msg.prefix(sender, prefix_commands, "This player has never been online.");
	goto("wait");
}
p_name = player.getName(player.getUuid(p_name));
if(p_name == "marvinius") {
	msg.text(sender, "§cSorry §b¯\\_(._.)_/¯");
	goto("wait");
}
if(size > 1) {
	reason = text.concatList(args, " ", 1, size - 1);
	msg.text(sender, concat("§cYou silently banned ", p_name, ": ", reason));
} else {
	reason = "You got banned.";
	msg.text(sender, concat("§cYou silently banned ", p_name, "."));
}
ban.add(player.getUuid(p_name), reason, player.getName(sender));
if(isOnline(p_name)) {
	p = read.player(p_name);
	ban.kick(p, reason);
}
goto("wait");

@unban
if(size != 1) {
	msg.prefix(sender, prefix_commands, "/unban <player>");
	goto("wait");
}
p_name = list.getIndex(args, 0);
if(!checkIfEverOnline(p_name)) {
	msg.prefix(sender, prefix_commands, "This player has never been online.");
	goto("wait");
}
p_name = player.getName(player.getUuid(p_name));
ban.remove(player.getUuid(p_name));
msg.text(sender, concat("§cYou unbanned ", p_name, "."));
goto("wait");

@tempban
if(size < 4) {
	msg.prefix(sender, prefix_commands, "/tempban <player> <days> <hours> <minutes> [reason]");
	goto("wait");
}
p_name = list.getIndex(args, 0);
if(!checkIfEverOnline(p_name)) {
	msg.prefix(sender, prefix_commands, "This player has never been online.");
	goto("wait");
}
p_name = player.getName(player.getUuid(p_name));
if(p_name == "marvinius") {
	msg.text(sender, "§cSorry §b¯\\_(._.)_/¯");
	goto("wait");
}
days = list.getIndex(args, 1);
hours = list.getIndex(args, 2);
minutes = list.getIndex(args, 3);
if(!isDouble(days) || !isDouble(hours) || !isDouble(minutes)) {
	msg.prefix(sender, prefix_commands, "Number expected.");
	goto("wait");
}
if(days < 0 || hours < 0 || minutes < 0) {
	msg.prefix(sender, prefix_commands, "Positive number expected.");
	goto("wait");
}
endtime = time.getMillis() + minutes * 60000 + hours * 3600000 + days * 86400000;
timestring = getTimeString(endtime);
if(size > 4) {
	reason = text.concatList(args, " ", 4, size - 1);
	msg.text("online", concat("§c", p_name, " got banned by ", sender_name, " until ", timestring, ". Reason: ", reason));
	msg.text("SERVER", concat("§c", p_name, " got banned by ", sender_name, " until ", timestring, ". Reason: ", reason));
} else {
	reason = "You got banned.";
	msg.text("online", concat("§c", p_name, " got banned by ", sender_name, " until ", timestring, "."));
	msg.text("SERVER", concat("§c", p_name, " got banned by ", sender_name, " until ", timestring, "."));
}
calendar = time.new(endtime);
ban.add(player.getUuid(p_name), reason, sender_name, calendar);
if(isOnline(p_name)) {
	p = read.player(p_name);
	ban.kick(p, reason);
}
goto("wait");

@ping
msg.text(player, "pong");
goto("wait");

@plot
if(size == 0) {
	@plothelp
	msg.prefix(player, prefix_plot, "/plot ...");
	msg.text(player, "§d - info §rReturns info about current location");
	if(!perm.has(player, "plot.moreinfo")) {
		msg.text(player, "§d - list §rLists your plots");
	}
	msg.text(player, "");
	msg.text(player, "§d - pos1/pos2 §rSet corner points");
	msg.text(player, "§d - create §rCreates a (sub-)plot (Y: 0 - 255)");
	msg.text(player, "§d - create3D §rCreates a 3D (sub-)plot");
	msg.text(player, "");
	msg.text(player, "§d - remove [id] §rRemoves a plot");
	msg.text(player, "§d - expand <anzahl> [direction] [id] §rExpands a plot");
	msg.text(player, "§d - name [id] <name> §rRenames a plot");
	msg.text(player, "");
	msg.text(player, "§d - share <player> [id] §rAdd a player to a plot");
	msg.text(player, "§d - kick <player> [id] §rRemove a player from a plot");
	msg.text(player, "§d - leader <player> [id] §rPromote to plot-leader");
	msg.text(player, "§d - mod <player> [id] §rPromote to plot-mod");
	msg.text(player, "§d - chest <player> [id] §rAllows a player to open chests");
	msg.text(player, "");
	msg.text(player, "§d - raise §rRaises a plot to a city. Costs §610 gold snuvis§r.");
	msg.text(player, "§d - sell <price> §rSells a sub-plot");
	msg.text(player, "");
	if(perm.has(player, "plot.moreinfo")) {
		msg.text(player, "§d - list [player] §rLists all plots from a player");
		msg.text(player, "§d - moreinfo [id] §rReturns more detailed infos");
		msg.text(player, "§d - listall §rLists all plots");
		msg.text(player, "§d - flags <flags> <boolean> §rSet all flags to the boolean");
	}
	goto("wait");
}
arg0 = text.toLowerCase(list.getIndex(args, 0));
if(arg0 == "sell") {
	if(size != 2) {
		msg.prefix(player, prefix_commands, "/plot sell <price>");
		goto("wait");
	}
	sign_loc = player.getTarget(player, 5, false, false);
	block = block.get(sign_loc);
	if(!block.hasTag(sign_tag, block)) {
		msg.prefix(player, prefix_plot, "You need to look at an empty sign.");
		goto("wait");
	}
	if(block.getSign(sign_loc, 0) != "" || block.getSign(sign_loc, 1) != "" || block.getSign(sign_loc, 2) != "" || block.getSign(sign_loc, 3) != "") {
		msg.prefix(player, prefix_plot, "You need to look at an empty sign.");
		goto("wait");
	}
	plot_list = plot.get(sign_loc);
	amount = list.getSize(plot_list);
	if(amount == 0 || amount == 1) {
		msg.prefix(player, prefix_plot, "You aren't on a sub plot.");
		goto("wait");
	}
	if(amount > 2) {
		msg.prefix(player, prefix_plot, "Multiple plots present. Not possible.");
		goto("wait");
	}
	plot_1 = list.getIndex(plot_list, 0);
	plot_2 = list.getIndex(plot_list, 1);
	if(plot.isCity(plot_1)) {
		city_plot = plot_1;
		sell_plot = plot_2;
	} elseif(plot.isCity(plot_2)) {
		sell_plot = plot_1;
		city_plot = plot_2;
	} else {
		msg.prefix(player, prefix_plot, "No city found.");
		goto("wait");
	}
	if(!plot.isLeader(city_plot, player) && !plot.isMod(city_plot, player)) {
		msg.prefix(player, prefix_plot, "You aren't a city plot leader or mod.");
		goto("wait");
	}
	snuvis = list.getIndex(args, 1);
	if(!isDouble(snuvis) || snuvis < 0) {
		msg.prefix(player, prefix_plot, "Positive number expected.");
		goto("wait");
	}
	//Sell Plot
	x1 = plot.getMinX(sell_plot);
	y1 = plot.getMinY(sell_plot);
	z1 = plot.getMinZ(sell_plot);
	x2 = plot.getMaxX(sell_plot);
	y2 = plot.getMaxY(sell_plot);
	z2 = plot.getMaxZ(sell_plot);
	length = math.abs(x1 - x2) + 1;
	width = math.abs(z1 - z2) + 1;
	high = math.abs(y1 - y2) + 1;
	//Change plot settings
	plot.setFree(sell_plot, true);
	plot.setName(sell_plot, "Free Plot");
	plot.removePlayer(sell_plot, player.getName(player));
	//Label Sign
	block.setSign(sign_loc, 0, "§3[§bFree Plot§3]");
	block.setSign(sign_loc, 1, concat("§2", text.number(snuvis)));
	if(high == 256) {
		block.setSign(sign_loc, 2, concat(text.number(length), "x", text.number(width)));
	} else {
		block.setSign(sign_loc, 2, concat(text.number(length), "x", text.number(width), " (Y:", text.number(high), ")"));
	}
	block.setSign(sign_loc, 3, text.number(player.getId(player)));
	msg.prefix(player, prefix_plot, "Free plot for selling created.");
	goto("wait");
}
if(arg0 == "raise") {
	location = entity.getLocation(player);
	plot_list = plot.get(location);
	amount = list.getSize(plot_list);
	if(amount == 0) {
		msg.prefix(player, prefix_plot, "You aren't on a plot.");
		goto("wait");
	}
	plot = list.getIndex(plot_list, 0);
	if(plot.isCity(plot)) {
		msg.prefix(player, prefix_plot, "This plot is already a city.");
		goto("wait");
	}
	if(!plot.isLeader(plot, player)) {
		msg.prefix(player, prefix_plot, "Only the plot leader can do this.");
		goto("wait");
	}
	if(amount > 1) {
		msg.prefix(player, prefix_plot, "Multiple plots present. Not possible.");
		goto("wait");
	}
	x1 = plot.getMinX(plot);
	z1 = plot.getMinZ(plot);
	x2 = plot.getMaxX(plot);
	z2 = plot.getMaxZ(plot);
	length = math.abs(x1 - x2) + 1;
	width = math.abs(z1 - z2) + 1;
	plot_size = length * width;
	if(plot_size < 2500) {
		msg.prefix(player, prefix_plot, "Your plot must be over 2500m2.");
		goto("wait");
	}
	snuvis = 40960;
	if(!hasEnoughMoney(player, snuvis)) {
		msg.prefix(player, prefix_plot, concat("You'll need §6", text.number(snuvis), "§r snuvis for this."));
		goto("wait");
	}
	offerRank(player, "rank.major");
	player.setPlotRaised(player, true);
	subMoney(player, snuvis);
	plot.setCity(plot, true);
	msg.prefix(player, prefix_plot, concat("City created. Spent §6", text.number(snuvis), "§r snuvis."));
	goto("wait");
}
if(arg0 == "leader") {
	if(size < 2) {
		msg.prefix(player, prefix_commands, "/plot leader <player> [plot_id]");
		goto("wait");
	}
	p_name = list.getIndex(args, 1);
	p_uuid = player.getUuid(p_name);
	if(p_uuid == null) {
		msg.prefix(player, prefix_plot, "This player has never been online.");
		goto("wait");
	}
	p_name = player.getName(p_uuid);
	location = entity.getLocation(player);
	world = loc.getWorld(location);
	if(size == 2) {
		plot_list = plot.get(location);
		amount = list.getSize(plot_list);
		if(amount == 0) {
			msg.prefix(player, prefix_plot, "You aren't on a plot.");
			goto("wait");
		}
		plot = list.getIndex(plot_list, 0);
		if(amount > 1) {
			msg.prefix(player, prefix_plot, "Multiple plots present:");
			for(i = 0; i < amount; i++) {
				plot = list.getIndex(plot_list, i);
				plot_id = plot.getId(plot);
				msg.text(player, text.click(" [§cSelect§r] ", concat("/plot leader ", p_name, " ", plot_id)), concat("#", text.number(plot_id), " ", plot.getType(plot), " §6", plot.getName(plot), " §r", plot.getLeaderName(plot)));
			}
			goto("wait");
		}
	} else {
		if(size != 3) {
			msg.prefix(player, prefix_commands, "/plot leader <player> [plot_id]");
			goto("wait");
		}
		plot_id = list.getIndex(args, 2);
		plot = plot.getFromId(plot_id, world);
		if(plot == null) {
			msg.prefix(player, prefix_plot, "Unknown plot or not in this world.");
			goto("wait");
		}
	}
	player_id = player.getId(player);
	if(!perm.has(player, "plot.other")) {
		if(!world.canUsePlots(world)) {
			msg.prefix(player, prefix_perms, "You have no permission for this in this world.");
			goto("wait");
		}
		if(!plot.isLeader(plot, player_id)) {
			msg.prefix(player, prefix_plot, "You aren't the plot leader.");
			goto("wait");
		}
		if(player_name == p_name) {
			msg.prefix(player, prefix_plot, "You are already the plot leader.");
			goto("wait");
		}
	}
	p_id = player.getId(p_uuid);
	if(plot.isLeader(plot, p_id)) {
		msg.prefix(player, prefix_plot, "This player is already the plot leader.");
		goto("wait");
	}
	old_leader = plot.getLeaderId(plot);
	if(old_leader != null) {
		plot.setMod(plot, old_leader);
	}
	plot.setLeader(plot, p_id);
	plot.addPlayer(plot, p_name);
	msg.prefix(player, prefix_plot, concat(p_name, " promoted to plot leader."));
	goto("wait");
}
if(arg0 == "mod") {
	if(size < 2) {
		msg.prefix(player, prefix_commands, "/plot mod <player> [plot_id]");
		goto("wait");
	}
	p_name = list.getIndex(args, 1);
	p_uuid = player.getUuid(p_name);
	if(p_uuid == null) {
		msg.prefix(player, prefix_plot, "This player has never been online.");
		goto("wait");
	}
	p_name = player.getName(p_uuid);
	location = entity.getLocation(player);
	world = loc.getWorld(location);
	if(size == 2) {
		plot_list = plot.get(location);
		amount = list.getSize(plot_list);
		if(amount == 0) {
			msg.prefix(player, prefix_plot, "You aren't on a plot.");
			goto("wait");
		}
		plot = list.getIndex(plot_list, 0);
		if(amount > 1) {
			msg.prefix(player, prefix_plot, "Multiple plots present:");
			for(i = 0; i < amount; i++) {
				plot = list.getIndex(plot_list, i);
				plot_id = plot.getId(plot);
				msg.text(player, text.click(" [§cSelect§r] ", concat("/plot mod ", p_name, " ", plot_id)), concat("#", text.number(plot_id), " ", plot.getType(plot), " §6", plot.getName(plot), " §r", plot.getLeaderName(plot)));
			}
			goto("wait");
		}
	} else {
		if(size != 3) {
			msg.prefix(player, prefix_commands, "/plot mod <player> [plot_id]");
			goto("wait");
		}
		plot_id = list.getIndex(args, 2);
		plot = plot.getFromId(plot_id, world);
		if(plot == null) {
			msg.prefix(player, prefix_plot, "Unknown plot or not in this world.");
			goto("wait");
		}
	}
	player_id = player.getId(player);
	if(!perm.has(player, "plot.other")) {
		if(!world.canUsePlots(world)) {
			msg.prefix(player, prefix_perms, "You have no permission for this in this world.");
			goto("wait");
		}
		if(!plot.isLeader(plot, player_id)) {
			msg.prefix(player, prefix_plot, "You aren't the plot leader.");
			goto("wait");
		}
	}
	p_id = player.getId(p_uuid);
	if(plot.isLeader(plot, p_id)) {
		msg.prefix(player, prefix_plot, "Not possible. Promote another player first /plot leader <player>.");
		goto("wait");
	}
	if(plot.isMod(plot, p_id)) {
		msg.prefix(player, prefix_plot, "This player is already a plot mod.");
		goto("wait");
	}
	plot.setMod(plot, p_id);
	plot.addPlayer(plot, p_name);
	msg.prefix(player, prefix_plot, concat(p_name, " promoted to plot mod."));
	goto("wait");
}
if(arg0 == "chest") {
	if(size < 2) {
		msg.prefix(player, prefix_commands, "/plot chest <player> [plot_id]");
		goto("wait");
	}
	p_name = list.getIndex(args, 1);
	p_uuid = player.getUuid(p_name);
	if(p_uuid == null) {
		msg.prefix(player, prefix_plot, "This player has never been online.");
		goto("wait");
	}
	p_name = player.getName(p_uuid);
	location = entity.getLocation(player);
	world = loc.getWorld(location);
	if(size == 2) {
		plot_list = plot.get(location);
		amount = list.getSize(plot_list);
		if(amount == 0) {
			msg.prefix(player, prefix_plot, "You aren't on a plot.");
			goto("wait");
		}
		plot = list.getIndex(plot_list, 0);
		if(amount > 1) {
			msg.prefix(player, prefix_plot, "Multiple plots present:");
			for(i = 0; i < amount; i++) {
				plot = list.getIndex(plot_list, i);
				plot_id = plot.getId(plot);
				msg.text(player, text.click(" [§cSelect§r] ", concat("/plot chest ", p_name, " ", plot_id)), concat("#", text.number(plot_id), " ", plot.getType(plot), " §6", plot.getName(plot), " §r", plot.getLeaderName(plot)));
			}
			goto("wait");
		}
	} else {
		if(size != 3) {
			msg.prefix(player, prefix_commands, "/plot chest <player> [plot_id]");
			goto("wait");
		}
		plot_id = list.getIndex(args, 2);
		plot = plot.getFromId(plot_id, world);
		if(plot == null) {
			msg.prefix(player, prefix_plot, "Unknown plot or not in this world.");
			goto("wait");
		}
	}
	player_id = player.getId(player);
	if(!perm.has(player, "plot.other")) {
		if(!world.canUsePlots(world)) {
			msg.prefix(player, prefix_perms, "You have no permission for this in this world.");
			goto("wait");
		}
		if(!plot.isLeader(plot, player_id) && !plot.isMod(plot, player_id)) {
			msg.prefix(player, prefix_plot, "You aren't a plot leader or mod.");
			goto("wait");
		}
	}
	p_id = player.getId(p_uuid);
	if(plot.isLeader(plot, p_id) || plot.isMod(plot, p_id)) {
		msg.prefix(player, prefix_plot, "Not possible. Player has higher permissions.");
		goto("wait");
	}
	if(plot.canOpenChests(plot, p_id)) {
		msg.prefix(player, prefix_plot, "This player already can open chests.");
		goto("wait");
	}
	plot.setChest(plot, p_id);
	msg.prefix(player, prefix_plot, concat(p_name, " can now open chests."));
	goto("wait");
}
if(arg0 == "remove") {
	location = entity.getLocation(player);
	world = loc.getWorld(location);
	if(size == 1) {
		plot_list = plot.get(location);
		amount = list.getSize(plot_list);
		if(amount == 0) {
			msg.prefix(player, prefix_plot, "You aren't on a plot.");
			goto("wait");
		}
		plot = list.getIndex(plot_list, 0);
		if(amount > 1) {
			msg.prefix(player, prefix_plot, "Multiple plots present:");
			for(i = 0; i < amount; i++) {
				plot = list.getIndex(plot_list, i);
				plot_id = plot.getId(plot);
				msg.text(player, text.click(" [§cSelect§r] ", concat("/plot remove ", plot_id)), concat("#", text.number(plot_id), " ", plot.getType(plot), " §6", plot.getName(plot), " §r", plot.getLeaderName(plot)));
			}
			goto("wait");
		}
	} else {
		if(size != 2) {
			msg.prefix(player, prefix_commands, "/plot remove [plot_id]");
			goto("wait");
		}
		plot_id = list.getIndex(args, 1);
		plot = plot.getFromId(plot_id, world);
		if(plot == null) {
			msg.prefix(player, prefix_plot, "Unknown plot or not in this world.");
			goto("wait");
		}
	}
	if(!perm.has(player, "plot.other")) {
		if(!world.canUsePlots(world)) {
			msg.prefix(player, prefix_perms, "You have no permission for this in this world.");
			goto("wait");
		}
		player_id = player.getId(player);
		if(!plot.isLeader(plot, player_id)) {
			msg.prefix(player, prefix_plot, "You aren't the plot leader.");
			goto("wait");
		}
	}
	if(plot.isCity(plot)) {
		plot_list = plot.intersecting(world, plot.getMinX(plot), plot.getMinY(plot), plot.getMinZ(plot), plot.getMaxX(plot), plot.getMaxY(plot), plot.getMaxZ(plot));
		iter = list.iterator(plot_list);
		while(hasNext(iter)) {
			sub_plot = next(iter);
			plot.removeAllPlayers(sub_plot);
			plot.remove(sub_plot, world);
		}
	}
	plot.removeAllPlayers(plot);
	plot.delMoveEvent(plot);
	plot.remove(plot, world);
	msg.prefix(player, prefix_plot, concat("Plot removed. #", text.number(plot.getId(plot)), " §6", plot.getName(plot)));
	goto("wait");
}
if(arg0 == "expand") {
	if(size < 2) {
		msg.prefix(player, prefix_commands, "/plot expand <anzahl> [direction] [plot_id]");
		goto("wait");
	}
	location = entity.getLocation(player);
	world = loc.getWorld(location);
	anzahl = list.getIndex(args, 1);
	if(!isDouble(anzahl) || anzahl < 0) {
		msg.prefix(player, prefix_plot, "Positive number expected.");
		goto("wait");
	}
	if(size == 2) {
		yaw = loc.getYaw(location);
		direction = getDirection(yaw);
		if(direction == null) {
			msg.prefix(player, prefix_plot, "Direction of view too imprecise.");
			goto("wait");
		}
		plot_list = plot.get(location);
		amount = list.getSize(plot_list);
		if(amount == 0) {
			msg.prefix(player, prefix_plot, "You aren't on a plot.");
			goto("wait");
		}
		plot = list.getIndex(plot_list, 0);
		if(amount > 1) {
			msg.prefix(player, prefix_plot, "Multiple plots present:");
			for(i = 0; i < amount; i++) {
				plot = list.getIndex(plot_list, i);
				plot_id = plot.getId(plot);
				msg.text(player, text.click(" [§cSelect§r] ", concat("/plot expand ", anzahl, " ", direction, " ", plot_id)), concat("#", text.number(plot_id), " ", plot.getType(plot), " §6", plot.getName(plot), " §r", plot.getLeaderName(plot)));
			}
			goto("wait");
		}
	} else {
		if(size != 4) {
			msg.prefix(player, prefix_commands, "/plot expand <anzahl> [<direction> <plot_id>]");
			goto("wait");
		}
		direction = text.toLowerCase(list.getIndex(args, 2));
		plot_id = list.getIndex(args, 3);
		plot = plot.getFromId(plot_id, world);
		if(plot == null) {
			msg.prefix(player, prefix_plot, "Unknown plot or not in this world.");
			goto("wait");
		}
	}
	if(plot.isSub(plot)) {
		msg.prefix(player, prefix_plot, "Sub plots can't be expanded.");
		goto("wait");
	}
	x1 = plot.getMinX(plot);
	y1 = plot.getMinY(plot);
	z1 = plot.getMinZ(plot);
	x2 = plot.getMaxX(plot);
	y2 = plot.getMaxY(plot);
	z2 = plot.getMaxZ(plot);
	old_length = math.abs(x1 - x2) + 1;
	old_width = math.abs(z1 - z2) + 1;
	if(direction == "east") {
		old_x2 = x2;
		x2 += anzahl;
		list = plot.intersecting(world, x2, y1, z1, old_x2, y2, z2);
	} elseif(direction == "south") {
		old_z2 = z2;
		z2 += anzahl;
		list = plot.intersecting(world, x1, y1, z2, x2, y2, old_z2);
	} elseif(direction == "west") {
		old_x1 = x1;
		x1 -= anzahl;
		list = plot.intersecting(world, old_x1, y1, z1, x1, y2, z2);
	} elseif(direction == "north") {
		old_z1 = z1;
		z1 -= anzahl;
		list = plot.intersecting(world, x1, y1, old_z1, x2, y2, z1);
	} else {
		msg.prefix(player, prefix_plot, "Unknown direction [north/east/south/west].");
		goto("wait");
	}
	if(!perm.has(player, "plot.other")) {
		if(list.getSize(list) > 0) {
			msg.prefix(player, prefix_plot, "New area is intersecting with other plots.");
			goto("wait");
		}
		if(!world.canUsePlots(world)) {
			msg.prefix(player, prefix_perms, "You have no permission for this in this world.");
			goto("wait");
		}
		player_id = player.getId(player);
		if(!plot.isLeader(plot, player_id)) {
			msg.prefix(player, prefix_plot, "You aren't the plot leader.");
			goto("wait");
		}
		//Calc costs
		length = math.abs(x1 - x2) + 1;
		width = math.abs(z1 - z2) + 1;
		snuvis = plot.calcCost(world, length, width) - plot.calcCost(world, old_length, old_width);
		if(!hasEnoughMoney(player, snuvis)) {
			msg.prefix(player, prefix_plot, concat("You'll need §6", text.number(snuvis), "§r snuvis for this."));
			goto("wait");
		}
		subMoney(player, snuvis);
		expand_message = concat("The plot has been expanded. Spent §6", text.number(snuvis), "§r snuvis.");
		if(!player.hasBigPlotCreated(player)) {
			plot_size = length * width;
			if(plot_size >= 900) {
				offerRank(player, "rank.colonizer");
				player.setBigPlotCreated(player, true);
			}
		}
	} else {
		expand_message = concat("The plot has been expanded.");
	}
	//Expand plot
	gs_edge1 = loc.new(world, x1, y1, z1);
	gs_edge2 = loc.new(world, x2, y2, z2);
	new_plot = plot.setEdges(plot, gs_edge1, gs_edge2);
	plot.delMoveEvent(plot);
	plot.setMoveEvent(new_plot, world);
	msg.prefix(player, prefix_plot, expand_message);
	goto("wait");
}
if(arg0 == "share") {
	if(size < 2) {
		msg.prefix(player, prefix_commands, "/plot share <player> [plot_id]");
		goto("wait");
	}
	p_name = list.getIndex(args, 1);
	p_uuid = player.getUuid(p_name);
	if(p_uuid == null) {
		msg.prefix(player, prefix_plot, "This player has never been online.");
		goto("wait");
	}
	p_name = player.getName(p_uuid);
	location = entity.getLocation(player);
	world = loc.getWorld(location);
	if(size == 2) {
		plot_list = plot.get(location);
		amount = list.getSize(plot_list);
		if(amount == 0) {
			msg.prefix(player, prefix_plot, "You aren't on a plot.");
			goto("wait");
		}
		plot = list.getIndex(plot_list, 0);
		if(amount > 1) {
			msg.prefix(player, prefix_plot, "Multiple plots present:");
			for(i = 0; i < amount; i++) {
				plot = list.getIndex(plot_list, i);
				plot_id = plot.getId(plot);
				msg.text(player, text.click(" [§cSelect§r] ", concat("/plot share ", p_name, " ", plot_id)), concat("#", text.number(plot_id), " ", plot.getType(plot), " §6", plot.getName(plot), " §r", plot.getLeaderName(plot)));
			}
			goto("wait");
		}
	} else {
		if(size != 3) {
			msg.prefix(player, prefix_commands, "/plot share <player> [plot_id]");
			goto("wait");
		}
		plot_id = list.getIndex(args, 2);
		plot = plot.getFromId(plot_id, world);
		if(plot == null) {
			msg.prefix(player, prefix_plot, "Unknown plot or not in this world.");
			goto("wait");
		}
	}
	if(!perm.has(player, "plot.other")) {
		if(!world.canUsePlots(world)) {
			msg.prefix(player, prefix_perms, "You have no permission for this in this world.");
			goto("wait");
		}
		player_id = player.getId(player);
		if(!plot.isLeader(plot, player_id) && !plot.isMod(plot, player_id)) {
			msg.prefix(player, prefix_plot, "You aren't a plot leader or mod.");
			goto("wait");
		}
	}
	plot.addPlayer(plot, p_name);
	msg.prefix(player, prefix_plot, concat(p_name, " added to the plot."));
	goto("wait");
}
if(arg0 == "kick") {
	if(size < 2) {
		msg.prefix(player, prefix_commands, "/plot kick <player> [plot_id]");
		goto("wait");
	}
	p_name = list.getIndex(args, 1);
	p_uuid = player.getUuid(p_name);
	if(p_uuid == null) {
		msg.prefix(player, prefix_plot, "This player has never been online.");
		goto("wait");
	}
	p_name = player.getName(p_uuid);
	location = entity.getLocation(player);
	world = loc.getWorld(location);
	if(size == 2) {
		plot_list = plot.get(location);
		amount = list.getSize(plot_list);
		if(amount == 0) {
			msg.prefix(player, prefix_plot, "You aren't on a plot.");
			goto("wait");
		}
		plot = list.getIndex(plot_list, 0);
		if(amount > 1) {
			msg.prefix(player, prefix_plot, "Multiple plots present:");
			for(i = 0; i < amount; i++) {
				plot = list.getIndex(plot_list, i);
				plot_id = plot.getId(plot);
				msg.text(player, text.click(" [§cSelect§r] ", concat("/plot kick ", p_name, " ", plot_id)), concat("#", text.number(plot_id), " ", plot.getType(plot), " §6", plot.getName(plot), " §r", plot.getLeaderName(plot)));
			}
			goto("wait");
		}
	} else {
		if(size != 3) {
			msg.prefix(player, prefix_commands, "/plot kick <player> [plot_id]");
			goto("wait");
		}
		plot_id = list.getIndex(args, 2);
		plot = plot.getFromId(plot_id, world);
		if(plot == null) {
			msg.prefix(player, prefix_plot, "Unknown plot or not in this world.");
			goto("wait");
		}
	}
	if(!perm.has(player, "plot.other")) {
		if(!world.canUsePlots(world)) {
			msg.prefix(player, prefix_perms, "You have no permission for this in this world.");
			goto("wait");
		}
		player_id = player.getId(player);
		if(!plot.isLeader(plot, player_id) && !plot.isMod(plot, player_id)) {
			msg.prefix(player, prefix_plot, "You aren't a plot leader or mod.");
			goto("wait");
		}
		if(player_name == p_name) {
			msg.prefix(player, prefix_plot, "You can't kick yourself.");
			goto("wait");
		}
		p_id = player.getId(p_uuid);
		if(plot.isLeader(plot, p_id)) {
			msg.prefix(player, prefix_plot, "You can't kick the plot-leader.");
			goto("wait");
		}
	}
	plot.removePlayer(plot, p_name);
	msg.prefix(player, prefix_plot, concat(p_name, " removed from this plot."));
	goto("wait");
}
if(arg0 == "name") {
	if(size < 2) {
		msg.prefix(player, prefix_commands, "/plot name [plot_id] <name>");
		goto("wait");
	}
	location = entity.getLocation(player);
	world = loc.getWorld(location);
	//Angegeben wurde ein Name aus einem Wort, ohne Plotid. Der Spieler muss auf einem Plot sein.
	if(size == 2) {
		plot_list = plot.get(location);
		amount = list.getSize(plot_list);
		if(amount == 0) {
			msg.prefix(player, prefix_plot, "You aren't on a plot.");
			goto("wait");
		}
		plot = list.getIndex(plot_list, 0);
		name = list.getIndex(args, 1);
		if(amount > 1) {
			msg.prefix(player, prefix_plot, "Multiple plots present:");
			for(i = 0; i < amount; i++) {
				plot = list.getIndex(plot_list, i);
				plot_id = plot.getId(plot);
				msg.text(player, text.click(" [§cSelect§r] ", concat("/plot name ", plot_id, " ", name)), concat("#", text.number(plot_id), " ", plot.getType(plot), " §6", plot.getName(plot), " §r", plot.getLeaderName(plot)));
			}
			goto("wait");
		}
	}
	if(size > 2) {
		plot_id = list.getIndex(args, 1);
		if(isDouble(plot_id)) {
			//Angegeben wurde eine eine Plotid mit einem Namen aus ein oder mehreren Wörtern
			plot = plot.getFromId(plot_id, world);
			if(plot == null) {
				msg.prefix(player, prefix_plot, "Unknown plot or not in this world.");
				goto("wait");
			}
			name = text.concatList(args, " ", 2, size - 1);
		} else {
			//Angegeben wurde ein Name aus mehreren Wörtern, ohne Plotid. Der Spieler muss auf einem Plot sein.
			name = text.concatList(args, " ", 1, size - 1);
			plot_list = plot.get(location);
			amount = list.getSize(plot_list);
			if(amount == 0) {
				msg.prefix(player, prefix_plot, "You aren't on a plot.");
				goto("wait");
			}
			plot = list.getIndex(plot_list, 0);
			if(amount > 1) {
				msg.prefix(player, prefix_plot, "Multiple plots present:");
				for(i = 0; i < amount; i++) {
					plot = list.getIndex(plot_list, i);
					plot_id = plot.getId(plot);
					msg.text(player, text.click(" [§cSelect§r] ", concat("/plot name ", plot_id, " ", name)), concat("#", text.number(plot_id), " ", plot.getType(plot), " §6", plot.getName(plot), " §r", plot.getLeaderName(plot)));
				}
				goto("wait");
			}
		}
	}
	if(!perm.has(player, "plot.other")) {
		if(!world.canUsePlots(world)) {
			msg.prefix(player, prefix_perms, "You have no permission for this in this world.");
			goto("wait");
		}
		player_id = player.getId(player);
		if(!plot.isLeader(plot, player_id) && !plot.isMod(plot, player_id)) {
			msg.prefix(player, prefix_plot, "You aren't a plot leader or mod.");
			goto("wait");
		}
	}
	plot.setName(plot, name);
	msg.prefix(player, prefix_plot, concat("Plot renamed to ", name, "."));
	goto("wait");
}
if(arg0 == "create" || arg0 == "create3d") {
	player_id = player.getId(player);
	loc1 = map.get(plotpos1, player_id);
	loc2 = map.get(plotpos2, player_id);
	if(loc1 == null || loc2 == null) {
		msg.prefix(player, prefix_plot, "No corner points set.");
		goto("wait");
	}
	world1 = loc.getWorld(loc1);
	if(world1 != loc.getWorld(loc2)) {
		msg.prefix(player, prefix_plot, "Corner points have different worlds.");
		goto("wait");
	}
	x1 = loc.getX(loc1);
	y1 = loc.getY(loc1);
	z1 = loc.getZ(loc1);
	x2 = loc.getX(loc2);
	y2 = loc.getY(loc2);
	z2 = loc.getZ(loc2);
	if(arg0 == "create") {
		loc.setY(loc1, 0);
		loc.setY(loc2, 255);
	}
	create_message = "Plot created.";
	sub_plot = false;
	if(!perm.has(player, "plot.other")) {
		world_name = world.getName(world1);
		if(!world.canUsePlots(world1)) {
			msg.prefix(player, prefix_perms, "You have no permission in this world.");
			goto("wait");
		}
		list = plot.intersecting(world1, x1, y1, z1, x2, y2, z2);
		if(list.getSize(list) > 0) {
			city_plot = list.getIndex(list, 0);
			if(plot.isCity(city_plot)) {
				if(!plot.isLeader(city_plot, player_id) && !plot.isMod(city_plot, player_id)) {
					msg.prefix(player, prefix_plot, "You aren't a plot leader or mod.");
					goto("wait");
				}
				city_id = plot.getId(city_plot);
				if(!loc.hasPlotId(loc1, city_id)) {
					msg.prefix(player, prefix_plot, "The sub plot needs to be surrounded by the city.");
					goto("wait");
				}
				if(!loc.hasPlotId(loc2, city_id)) {
					msg.prefix(player, prefix_plot, "The sub plot needs to be surrounded by the city.");
					goto("wait");
				}
				sub_plot = true;
			} else {
				msg.prefix(player, prefix_plot, "Intersecting plots are not allowed.");
				goto("wait");
			}
		}
		if(!sub_plot) {
			//Calc costs
			length = math.abs(x1 - x2) + 1;
			width = math.abs(z1 - z2) + 1;
			if(length < 3 || width < 3) {
				msg.prefix(player, prefix_plot, "Length and width of the plot must be at least 3.");
				goto("wait");
			}
			snuvis = plot.calcCost(world1, length, width);
			free_plot_used = player.usedHisFreePlot(player_id);
			if(!free_plot_used && world_name != "creative") {
				snuvis -= plot.calcCost(world1, 16, 16);
				if(snuvis < 0) {
					snuvis = 0;
				}
				msg.prefix(player, prefix_plot, "Free plot (16 x 16) to calculation included.");
			}
			if(!hasEnoughMoney(player, snuvis)) {
				msg.prefix(player, prefix_plot, concat("You'll need §6", text.number(snuvis), "§r snuvis for this."));
				goto("wait");
			}
			create_message = concat("Plot created. Spent §6", text.number(snuvis), "§r snuvis.");
			subMoney(player, snuvis);
			if(!free_plot_used && world_name != "creative") {
				player.setUsedFreePlot(player_id, true);
				offerRank(player, "rank.settler");
			}
			if(!player.hasBigPlotCreated(player)) {
				plot_size = length * width;
				if(plot_size >= 900) {
					offerRank(player, "rank.colonizer");
					player.setBigPlotCreated(player, true);
				}
			}
		}
	}
	//Create plot
	map.remove(plotpos1, player_id);
	map.remove(plotpos2, player_id);
	plot = plot.add(loc1, loc2);
	if(sub_plot) {
		plot.setSub(plot, true);
	}
	plot.setMoveEvent(plot, world1);
	plot.setName(plot, concat(player_name, "'s plot"));
	plot.addPlayer(plot, player_name);
	plot.setLeader(plot, player_id);
	msg.prefix(player, prefix_plot, create_message);
	goto("wait");
}
if(arg0 == "pos1" || arg0 == "pos2") {
	loc = entity.getLocation(player);
	loc = getBlockLocation(loc);
	player_id = player.getId(player);
	if(arg0 == "pos1") {
		map.add(plotpos1, player_id, loc);
		pos_string = "Pos1";
	} elseif(arg0 == "pos2") {
		map.add(plotpos2, player_id, loc);
		pos_string = "Pos2";
	}
	x = text.number(loc.getX(loc));
	y = text.number(loc.getY(loc));
	z = text.number(loc.getZ(loc));
	msg.prefix(player, prefix_plot, concat(pos_string, " (", x, "/", y, "/", z, ") set."));
	loc1 = map.get(plotpos1, player_id);
	loc2 = map.get(plotpos2, player_id);
	if(loc1 != null && loc2 != null) {
		world1 = loc.getWorld(loc1);
		snuvis = plot.calcCost(world1, loc1, loc2);
		if(!player.usedHisFreePlot(player_id) && world.getName(world1) != "creative") {
			snuvis -= plot.calcCost(world1, 16, 16);
			if(snuvis < 0) {
				snuvis = 0;
			}
			msg.prefix(player, prefix_plot, "Free plot (16 x 16) to calculation included.");
		}
		if(loc.isCity(loc1) && loc.isCity(loc2)) {
			snuvis = 0;
		}
		msg.prefix(player, prefix_plot, concat("This plot will cost §6", text.number(snuvis), "§r snuvis."));
	}
	goto("wait");
}
if(arg0 == "flags") {
	if(!perm.has(player, "plot.moreinfo")) {
		perm.no(player, "plot.moreinfo");
		goto("wait");
	}
	if(size < 3 || size > 4) {
		msg.prefix(player, prefix_commands, "/plot flags <flags> <boolean> [plot_id]");
		goto("wait");
	}
	flags = list.getIndex(args, 1);
	if(!isDouble(flags) || flags < 0) {
		msg.prefix(player, prefix_commands, "Positive number expected.");
		goto("wait");
	}
	boolean = list.getIndex(args, 2);
	if(!(boolean == true || boolean == false)) {
		msg.prefix(player, prefix_commands, "Boolean expected.");
		goto("wait");
	}
	location = entity.getLocation(player);
	world = loc.getWorld(location);
	if(size == 3) {
		plot_list = plot.get(location);
		amount = list.getSize(plot_list);
		if(amount == 0) {
			msg.prefix(player, prefix_plot, "You aren't on a plot.");
			goto("wait");
		}
		plot = list.getIndex(plot_list, 0);
		if(amount > 1) {
			msg.prefix(player, prefix_plot, "Multiple plots present:");
			for(i = 0; i < amount; i++) {
				plot = list.getIndex(plot_list, i);
				plot_id = plot.getId(plot);
				x = loc.getX(location);
				y = loc.getY(location);
				z = loc.getZ(location);
				msg.text(player, text.click(" [§cSelect§r] ", concat("/plot flags ", flags, " ", boolean, " ", plot_id)), concat("#", text.number(plot_id), " ", plot.getType(plot), " §6", plot.getName(plot), " §r", plot.getLeaderName(plot)));
			}
			goto("wait");
		}
	} else {
		plot_id = list.getIndex(args, 3);
		plot = plot.getFromId(plot_id, world);
		if(plot == null) {
			msg.prefix(player, prefix_plot, "Unknown plot or not in this world.");
			goto("wait");
		}
	}
	flags_list = list.new();
	temp_flags = 0;
	if(flags >= 512) {
		list.add(flags_list, "SUB_PLOT_FLAG");
		temp_flags += 512;
	}
	if(flags >= 256) {
		list.add(flags_list, "FREE_FLAG");
		temp_flags += 256;
	}
	if(flags >= 128) {
		list.add(flags_list, "CITY_FLAG");
		temp_flags += 128;
	}
	if(flags >= 64) {
		list.add(flags_list, "EXPLOSION_FLAG");
		temp_flags += 64;
	}
	if(flags >= 32) {
		list.add(flags_list, "ENTITY_INTERACT_FLAG");
		temp_flags += 32;
	}
	if(flags >= 16) {
		list.add(flags_list, "BLOCK_INTERACT_FLAG");
		temp_flags += 16;
	}
	if(flags >= 8) {
		list.add(flags_list, "HIT_AMBIENT_FLAG");
		temp_flags += 8;
	}
	if(flags >= 4) {
		list.add(flags_list, "BUCKET_FLAG");
		temp_flags += 4;
	}
	if(flags >= 2) {
		list.add(flags_list, "BREAK_FLAG");
		temp_flags += 2;
	}
	if(flags >= 1) {
		list.add(flags_list, "PLACE_FLAG");
		temp_flags += 1;
	}
	plot.setFlags(plot, flags, boolean);
	msg.prefix(player, prefix_plot, "Flags gesetzt.");
	goto("wait");
}
if(arg0 == "list") {
	if(size == 1) {
		p_name = player.getName(player);
	} else {
		if(!perm.has(player, "plot.moreinfo")) {
			perm.no(player, "plot.moreinfo");
			goto("wait");
		}
		p_name = list.getIndex(args, 1);
	}
	p_uuid = player.getUuid(p_name);
	if(p_uuid == null) {
		msg.prefix(player, prefix_plot, "This player has never been online.");
		goto("wait");
	}
	p_name = player.getName(p_uuid);
	msg.prefix(player, prefix_commands, concat(p_name, "'s plots:"));
	world = loc.getWorld(entity.getLocation(player));
	iter = plot.iterator(world, p_uuid);
	while(hasNext(iter)) {
		plot = next(iter);
		msg.text(player, concat(" - #", text.number(plot.getId(plot)), " ", plot.getType(plot), " §6", plot.getName(plot)));
	}
	goto("wait");
}
if(arg0 == "listall") {
	if(!perm.has(player, "plot.moreinfo")) {
		perm.no(player, "plot.moreinfo");
		goto("wait");
	}
	if(size != 1) {
		msg.prefix(player, prefix_commands, "/plot listall");
		goto("wait");
	}
	world = loc.getWorld(entity.getLocation(player));
	msg.prefix(player, prefix_commands, concat("All plots in this world: ", world.getName(world)));
	iterator = plot.iterator(world);
	while(hasNext(iterator)) {
		plot = next(iterator);
		plot_id = plot.getId(plot);
		msg.text(player, concat(" - #", text.number(plot_id), " ", plot.getType(plot), " §6", plot.getName(plot), " §r", plot.getLeaderName(plot)));
	}
	goto("wait");
}
if(arg0 == "moreinfo" || arg0 == "mi") {
	if(!perm.has(player, "plot.moreinfo")) {
		perm.no(player, "plot.moreinfo");
		goto("wait");
	}
	location = entity.getLocation(player);
	world = loc.getWorld(location);
	if(size == 1) {
		plot_list = plot.get(location);
		amount = list.getSize(plot_list);
		if(amount == 0) {
			msg.prefix(player, prefix_plot, "You aren't on a plot.");
			goto("wait");
		}
		plot = list.getIndex(plot_list, 0);
		if(amount > 1) {
			msg.prefix(player, prefix_plot, "Multiple plots present:");
			for(i = 0; i < amount; i++) {
				plot = list.getIndex(plot_list, i);
				plot_id = plot.getId(plot);
				msg.text(player, text.click(" [§cSelect§r] ", concat("/plot moreinfo ", plot_id)), concat("#", text.number(plot_id), " ", plot.getType(plot), " §6", plot.getName(plot)));
			}
			goto("wait");
		}
	} else {
		if(size != 2) {
			msg.prefix(player, prefix_commands, "/plot moreinfo [plot_id]");
			goto("wait");
		}
		plot_id = list.getIndex(args, 1);
		plot = plot.getFromId(plot_id, world);
		if(plot == null) {
			msg.prefix(player, prefix_plot, "Unknown plot or not in this world.");
			goto("wait");
		}
	}
	owners = "";
	owners_list = plot.getOwners(plot);
	copy_list = list.copy(owners_list);
	plot_id = plot.getId(plot);
	msg.prefix(player, prefix_plot, concat("#", text.number(plot_id), " ", plot.getType(plot), " §6", plot.getName(plot)));
	msg.text(player, "   §dWorld: §r", world.getName(world));
	msg.text(player, "   §dPos1: §r", plot.getMinX(plot), " / ", plot.getMinY(plot), " / ", plot.getMinZ(plot));
	msg.text(player, "   §dPos2: §r", plot.getMaxX(plot), " / ", plot.getMaxY(plot), " / ", plot.getMaxZ(plot));
	
	leader_name = plot.getLeaderName(plot);
	if(leader_name == "") {
		leader_name = "-";
	}
	msg.text(player, "   §dLeader: §r", leader_name);
	list.remove(copy_list, player.getUuid(leader_name));
	
	mods_list = plot.getMods(plot);
	mods_amount = list.getSize(mods_list);
	if(mods_amount == 0) {
		mods_string = "-";
	} else {
		iter = list.iterator(mods_list);
		mods_string = "";
		while(hasNext(iter)) {
			p_name = player.getNameFromId(next(iter));
			p_uuid = player.getUuid(p_name);
			list.remove(copy_list, p_uuid);
			if(mods_string == "") {
				mods_string = p_name;
			} else {
				mods_string = concat(mods_string, " / ", p_name);
			}
		}
	}
	msg.text(player, "   §dMods: §r", mods_string);
	
	members_amount = list.getSize(copy_list);
	if(members_amount == 0) {
		members_string = "-";
	} else {
		iter = list.iterator(copy_list);
		members_string = "";
		while(hasNext(iter)) {
			p_name = player.getName(next(iter));
			if(members_string == "") {
				members_string = p_name;
			} else {
				members_string = concat(members_string, " / ", p_name);
			}
		}
	}
	msg.text(player, "   §dMembers: §r", members_string);
	
	chests_list = plot.getChestRanks(plot);
	chests_amount = list.getSize(chests_list);
	if(chests_amount == 0) {
		chests_string = "-";
	} else {
		iter = list.iterator(chests_list);
		chests_string = "";
		while(hasNext(iter)) {
			p_name = player.getNameFromId(next(iter));
			if(chests_string == "") {
				chests_string = p_name;
			} else {
				chests_string = concat(chests_string, " / ", p_name);
			}
		}
	}
	msg.text(player, "   §dOnly chest: §r", chests_string);
	
	flags = plot.getFlags(plot);
	flags_true = list.new();
	flags_false = list.new();
	array = array.new(2);
	array[0] = 512;
	array[1] = "SUB_PLOT_FLAG";
	if(flags >= 512) {
		list.add(flags_true, array);
		flags -= 512;
	} else {
		list.add(flags_false, array);
	}
	array = array.new(2);
	array[0] = 256;
	array[1] = "FREE_FLAG";
	if(flags >= 256) {
		list.add(flags_true, array);
		flags -= 256;
	} else {
		list.add(flags_false, array);
	}
	array = array.new(2);
	array[0] = 128;
	array[1] = "CITY_FLAG";
	if(flags >= 128) {
		list.add(flags_true, array);
		flags -= 128;
	} else {
		list.add(flags_false, array);
	}
	array = array.new(2);
	array[0] = 64;
	array[1] = "EXPLOSION_FLAG";
	if(flags >= 64) {
		list.add(flags_true, array);
		flags -= 64;
	} else {
		list.add(flags_false, array);
	}
	array = array.new(2);
	array[0] = 32;
	array[1] = "ENTITY_INTERACT_FLAG";
	if(flags >= 32) {
		list.add(flags_true, array);
		flags -= 32;
	} else {
		list.add(flags_false, array);
	}
	array = array.new(2);
	array[0] = 16;
	array[1] = "BLOCK_INTERACT_FLAG";
	if(flags >= 16) {
		list.add(flags_true, array);
		flags -= 16;
	} else {
		list.add(flags_false, array);
	}
	array = array.new(2);
	array[0] = 8;
	array[1] = "HIT_AMBIENT_FLAG";
	if(flags >= 8) {
		list.add(flags_true, array);
		flags -= 8;
	} else {
		list.add(flags_false, array);
	}
	array = array.new(2);
	array[0] = 4;
	array[1] = "BUCKET_FLAG";
	if(flags >= 4) {
		list.add(flags_true, array);
		flags -= 4;
	} else {
		list.add(flags_false, array);
	}
	array = array.new(2);
	array[0] = 2;
	array[1] = "BREAK_FLAG";
	if(flags >= 2) {
		list.add(flags_true, array);
		flags -= 2;
	} else {
		list.add(flags_false, array);
	}
	array = array.new(2);
	array[0] = 1;
	array[1] = "PLACE_FLAG";
	if(flags >= 1) {
		list.add(flags_true, array);
	} else {
		list.add(flags_false, array);
	}
	x = loc.getX(location);
	y = loc.getY(location);
	z = loc.getZ(location);
	msg.text(player, "   §dFlags true:");
	iter = list.iterator(flags_true);
	while(hasNext(iter)) {
		array = next(iter);
		flag_number = array[0];
		flag_name = array[1];
		msg.text(player, "    ", text.click(concat(" §d[§r", flag_name, "§d] "), concat("/plot flags ", flag_number, " false ", plot_id)));
	}
	msg.text(player, "   §dFlags false:");
	iter = list.iterator(flags_false);
	while(hasNext(iter)) {
		array = next(iter);
		flag_number = array[0];
		flag_name = array[1];
		msg.text(player, "    ", text.click(concat(" §d[§r", flag_name, "§d] "), concat("/plot flags ", flag_number, " true ", plot_id)));
	}
	goto("wait");
}
if(arg0 == "info" || arg0 == "i") {
	location = entity.getLocation(player);
	list = plot.get(location);
	world = loc.getWorld(location);
	size = list.getSize(list);
	if(size == 0) {
		msg.prefix(player, prefix_plot, "No plots found.");
		goto("wait");
	}
	if(size == 1) {
		msg.prefix(player, prefix_plot, concat(text.number(size), " plot found:"));
	} else {
		msg.prefix(player, prefix_plot, concat(text.number(size), " plots found:"));
	}
	for(i = 0; i < size; i++) {
		plot = list.getIndex(list, i);
		plot_id = plot.getId(plot);
		msg.text(player, concat(" - #", text.number(plot_id), " ", plot.getType(plot), " §6", plot.getName(plot)));
		owners_list = plot.getOwners(plot);
		copy_list = list.copy(owners_list);
		plot_id = plot.getId(plot);
		msg.text(player, "   §dWorld: §r", world.getName(world));
		msg.text(player, "   §dPos1: §r", plot.getMinX(plot), " / ", plot.getMinY(plot), " / ", plot.getMinZ(plot));
		msg.text(player, "   §dPos2: §r", plot.getMaxX(plot), " / ", plot.getMaxY(plot), " / ", plot.getMaxZ(plot));
		
		leader_name = plot.getLeaderName(plot);
		if(leader_name == "") {
			leader_name = "-";
		}
		msg.text(player, "   §dLeader: §r", leader_name);
		list.remove(copy_list, player.getUuid(leader_name));
		
		mods_list = plot.getMods(plot);
		mods_amount = list.getSize(mods_list);
		if(mods_amount == 0) {
			mods_string = "-";
		} else {
			iter = list.iterator(mods_list);
			mods_string = "";
			while(hasNext(iter)) {
				p_name = player.getNameFromId(next(iter));
				p_uuid = player.getUuid(p_name);
				list.remove(copy_list, p_uuid);
				if(mods_string == "") {
					mods_string = p_name;
				} else {
					mods_string = concat(mods_string, " / ", p_name);
				}
			}
		}
		msg.text(player, "   §dMods: §r", mods_string);
		
		members_amount = list.getSize(copy_list);
		if(members_amount == 0) {
			members_string = "-";
		} else {
			iter = list.iterator(copy_list);
			members_string = "";
			while(hasNext(iter)) {
				p_name = player.getName(next(iter));
				if(members_string == "") {
					members_string = p_name;
				} else {
					members_string = concat(members_string, " / ", p_name);
				}
			}
		}
		msg.text(player, "   §dMembers: §r", members_string);
		
		chests_list = plot.getChestRanks(plot);
		chests_amount = list.getSize(chests_list);
		if(chests_amount == 0) {
			chests_string = "-";
		} else {
			iter = list.iterator(chests_list);
			chests_string = "";
			while(hasNext(iter)) {
				p_name = player.getNameFromId(next(iter));
				if(chests_string == "") {
					chests_string = p_name;
				} else {
					chests_string = concat(chests_string, " / ", p_name);
				}
			}
		}
		msg.text(player, "   §dOnly chest: §r", chests_string);
	}
	goto("wait");
}
goto("plothelp");

@stopadventure
removeAdventureDisplay(player);
player.setAdventure(player, false);
msg.prefix(player, "§5Adventure", "Adventure canceled!");
goto("wait");

@speed
if(size < 1 || size > 2) {
	if(perm.has(player, "speed.other")) {
		msg.prefix(player, prefix_commands, "/speed <1-10> [player]");
	} else {
		msg.prefix(player, prefix_commands, "/speed <1-10>");
	}
	goto("wait");
}
speed = list.getIndex(args, 0);
if(!isDouble(speed)) {
	msg.prefix(player, prefix_commands, "Number expected.");
	goto("wait");
}
if(speed < 1) {
	speed = 1;
}
if(speed > 10) {
	speed = 10;
}
if(size == 2) {
	if(!perm.has(player, "speed.other")) {
		perm.no(player, "speed.other");
		goto("wait");
	}
	affectedname = list.getIndex(args, 1);
	affectedplayer = read.player(affectedname);
	if(affectedplayer == null) {
		msg.prefix(player, prefix_commands, "This player is not online.");
		goto("wait");
	}
}
player.setSpeed(affectedplayer, speed);
msg.prefix(affectedplayer, prefix_commands, concat("Set your speed to ", text.number(speed), "."));
if(affectedplayer != player) {
	affectedname = player.getName(affectedplayer);
	msg.prefix(player, prefix_commands, concat(affectedname, " set your speed to ", text.number(speed), "."));
}
goto("wait");

@butcher
loc = entity.getLocation(player);
world = loc.getWorld(loc);
list = world.getEntities(world);
size = list.getSize(list);
killed = 0;
for(i = 0; i < size; i++) {
	element = list.getIndex(list, i);
	if(isLiving(element)) {
		entity_type = entity.getType(element); 
		if(set.contains(butcher_set, entity_type)) {
			entity.remove(element);
			killed++;
		}
	}
}
msg.prefix(player, prefix_commands, concat(text.number(killed), " mobs killed."));
goto("wait");

@enchant
if(size != 2) {
	msg.prefix(player, prefix_commands, "/enchant <enchantment> <level>");
	goto("wait");
}
ench_string = list.getIndex(args, 0);
ench = enchantment.get(ench_string);
if(ench == null) {
	msg.prefix(player, prefix_commands, "Unknown enchantment");
	goto("wait");
}
lvl = list.getIndex(args, 1);
if(!isDouble(lvl) || lvl < 1 || lvl > 100) {
	msg.prefix(sender, prefix_commands, "Number greater than 0 and less than 101 expected.");
	goto("wait");
}
item = living.getHand(player);
if(item.getType(item) == "minecraft:air") {
	msg.prefix(sender, prefix_commands, "You need to hold an item in your hand.");
	goto("wait");
}
enchantment.add(ench, item, lvl);
goto("wait");

@enderchest
if(size < 1 || size > 2) {
	msg.prefix(player, prefix_commands, "/enderchest [player] <from-player>");
	goto("wait");
}
if(size == 1) {
	from_name = list.getIndex(args, 0);
}
elseif(size == 2) {
	affectedname = list.getIndex(args, 0);
	from_name = list.getIndex(args, 1);
	affectedplayer = read.player(affectedname);
	if(affectedplayer == null) {
		msg.prefix(player, prefix_commands, "This player is not online.");
		goto("wait");
	}
}
from_player = read.player(from_name);
if(from_player == null) {
	msg.prefix(player, prefix_commands, "This player is not online.");
	goto("wait");
}
player.openEnderchest(affectedplayer, from_player, concat("Enderchest von ", from_name));
goto("wait");

@gamemode
if(size < 1 || size > 2) {
	msg.prefix(player, prefix_commands, "/gamemode <mode> [player]");
	goto("wait");
}
if(size == 2) {
	if(!perm.has(player, "gamemode.other")) {
		perm.no(player, "gamemode.other");
		goto("wait");
	}
	affectedname = list.getIndex(args, 1);
	affectedplayer = read.player(affectedname);
	if(affectedplayer == null) {
		msg.prefix(player, prefix_commands, "This player is not online.");
		goto("wait");
	}
}
mode = list.getIndex(args, 0);
if(isDouble(mode)) {
	mode = text.number(mode);
} else {
	mode = text.toLowerCase(mode);
}
if(mode == "s" || mode == "0" || mode == "survival") {
	mode = "survival";
} elseif(mode == "c" || mode == "1" || mode == "creative") {
	mode = "creative";
} elseif(mode == "a" || mode == "2" || mode == "adventure") {
	mode = "adventure";
} elseif(mode == "w" || mode == "3" || mode == "spectator") {
	mode = "spectator";
} else {
	msg.prefix(player, prefix_commands, "Unknown gamemode.");
	goto("wait");
}
player.setGamemode(affectedplayer, mode);
if(affectedplayer != player) {
	affectedname = player.getName(affectedplayer);
	msg.prefix(player, prefix_commands, concat("Gamemode of ", affectedname, " set to ", mode, "."));
}
msg.prefix(affectedplayer, prefix_commands, concat("Set your gamemode to ", mode, "."));
goto("wait");

@home
if(size == 0) {
	@homesyntax
	msg.prefix(player, prefix_commands, "/home ...");
	msg.text(player, "§6 - set <name> §rSets a home");
	msg.text(player, "§6 - delete <name> §rDeletes a home");
	if(perm.has(player, "home.other")) {
		msg.text(player, "§6 - list [player] §rLists all homes");
		msg.text(player, "§6 - <name> [player] §rTeleports to a home");
	} else {
		msg.text(player, "§6 - list §rLists your homes");
		msg.text(player, "§6 - <name> §rTeleports to your home");
	}
	goto("wait");
}
arg0 = text.toLowerCase(list.getIndex(args, 0));
if(arg0 == "del" || arg0 == "delete") {
	if(size < 2) {
		goto("homesyntax");
	}
	player_id = player.getId(player);
	name = text.toLowerCase(list.getIndex(args, 1));
	if(!home.exists(player_id, name)) {
		msg.prefix(player, prefix_commands, concat("Home ", name, "doesn't exist."));
		goto("wait");
	}
	home.delete(player_id, name);
	msg.prefix(player, prefix_commands, concat("Home ", name, " deleted."));
	goto("wait");
}
if(arg0 == "list") {
	affecteduuid = player.getUuid(affectedname);
	if(size == 2) {
		if(!perm.has(player, "home.other")) {
			perm.no(player, "home.other");
			goto("wait");
		}
		affectedname = text.toLowerCase(list.getIndex(args, 1));
		affecteduuid = player.getUuid(affectedname);
		if(affecteduuid == null) {
			msg.prefix(player, prefix_commands, "This player has never been online.");
			goto("wait");
		}
	}
	id = player.getId(affecteduuid);
	homes_list = home.getList(id);
	home_amount = list.getSize(homes_list);
	if(home_amount == 0) {
		msg.prefix(player, prefix_commands, "No homes existing.");
	} else {
		msg.prefix(player, prefix_commands, concat("Homes of ", affectedname, ":"));
		for(i = 0; i < home_amount; i++) {
			msg.text(player, concat("§6 - §r", list.getIndex(homes_list, i)));
		}
	}
	goto("wait");
}
location = entity.getLocation(player);
world_name = world.getName(loc.getWorld(entity.getLocation(player)));
if(!world.isSurvName(world_name)) {
	msg.prefix(player, prefix_commands, "You can't use this command in this world.");
	goto("wait");
}
if(arg0 == "set") {
	if(size < 2) {
		goto("homesyntax");
	}
	player_id = player.getId(player);
	homes_list = home.getList(player_id);
	home_amount = list.getSize(homes_list);
	if(perm.has(player, "isAdmin")) {
		max_homes = 100;
	} elseif(perm.has(player, "isMod")) {
		max_homes = 40;
	} elseif(perm.has(player, "isTeam")) {
		max_homes = 20;
	} elseif(perm.has(player, "canTP")) {
		max_homes = 10;
	} else {
		max_homes = 5;
	}
	max_homes += getAdditionalVoteHomes();
	if(home_amount >= max_homes) {
		msg.prefix(player, prefix_commands, concat("You can only set ", text.number(max_homes), " homes."));
		goto("wait");
	}
	name = text.toLowerCase(list.getIndex(args, 1));
	if(name == "set" || name == "del" || name == "delete" || name == "list") {
		msg.prefix(player, prefix_commands, "This name ist not allowed.");
		goto("wait");
	}
	if(!text.onlyletters(name)) {
		msg.prefix(player, prefix_commands, "Only letters allowed.");
		goto("wait");
	}
	if(text.length(name) > 20) {
		msg.prefix(player, prefix_commands, "Maximum 20 letters.");
		goto("wait");
	}
	if(home.exists(player_id, name)) {
		msg.prefix(player, prefix_commands, concat("Home ", name, " already exists."));
		goto("wait");
	}
	home.set(player_id, name, location);
	msg.prefix(player, prefix_commands, concat("Home ", name, " set."));
	goto("wait");
}
//Teleportation
if(size == 2) {
	affectedname = text.toLowerCase(list.getIndex(args, 1));
}
affecteduuid = player.getUuid(affectedname);
if(affecteduuid == null) {
	msg.prefix(player, prefix_commands, "Der Spieler war noch nie online.");
	goto("wait");
}
player_id = player.getID(affecteduuid);
location = home.getLocation(player_id, arg0);
if(location == null) {
	msg.prefix(player, prefix_commands, "Home doesn't exist."); //oder die welt ist nicht geladen
	goto("wait");
}
player.teleport(player, location, true);
goto("wait");

@tpa
if(size != 1) {
	msg.prefix(player, prefix_commands, "/tpa <player>");
	goto("wait");
}
p_name = list.getIndex(args, 0);
p_uuid = player.getUuid(p_name);
if(p_uuid == null) {
	msg.prefix(player, prefix_commands, "This player has never been online.");
	goto("wait");
}
p_name = player.getName(p_uuid);
p = read.player(p_name);
if(p == null) {
	msg.prefix(player, prefix_commands, "This player is not online.");
	goto("wait");
}
if(!player.doesAcceptTpaRequests(p)) {
 	msg.prefix(player, prefix_commands, concat("§c", p_name, "§r rejects teleport requests."));
	goto("wait");
}
if(!player.canTeleport(p)) {
	msg.prefix(player, prefix_commands, "This player can't teleport now.");
	goto("wait");
}
world_name = world.getName(loc.getWorld(entity.getLocation(player)));
if(world.isGamesName(world_name)) {
	msg.prefix(player, prefix_commands, "You can't teleport in this world.");
	goto("wait");
}
world_name = world.getName(loc.getWorld(entity.getLocation(p)));
if(world.isGamesName(world_name)) {
	msg.prefix(player, prefix_commands, "You can't teleport to this world.");
	goto("wait");
}
addTpaRequest(player.getUuid(player), p_uuid);
msg.text(player, concat("§6Teleport-Request: [§c", player_name, "§6 -> §c ", p_name, "§6]"));
msg.text(p, concat("§6Teleport-Request: [§c", player_name, "§6 -> §c ", p_name, "§6] "), text.click("§6[§aAccept§6]", concat("/tpaccept ", player_name)));
goto("wait");

@tpahere
if(size != 1) {
	msg.prefix(player, prefix_commands, "/tpahere <player>");
	goto("wait");
}
p_name = list.getIndex(args, 0);
p_uuid = player.getUuid(p_name);
if(p_uuid == null) {
	msg.prefix(player, prefix_commands, "This player has never been online.");
	goto("wait");
}
p_name = player.getName(p_uuid);
p = read.player(p_name);
if(p == null) {
	msg.prefix(player, prefix_commands, "This player is not online.");
	goto("wait");
}
if(!player.canTeleport(p)) {
	msg.prefix(player, prefix_commands, "This player can't teleport now.");
	goto("wait");
}
if(!player.doesAcceptTpaRequests(p)) {
	msg.prefix(player, prefix_commands, concat("§c", p_name, "§r rejects teleport requests."));
	goto("wait");
}
world_name = world.getName(loc.getWorld(entity.getLocation(player)));
if(world.isGamesName(world_name)) {
	msg.prefix(player, prefix_commands, concat("§c", p_name, "§r isn't allowed to teleport to this world."));
	goto("wait");
}
world_name = world.getName(loc.getWorld(entity.getLocation(p)));
if(world.isGamesName(world_name)) {
	msg.prefix(player, prefix_commands, concat("§c", p_name, "§r isn't allowed to teleport from their world."));
	goto("wait");
}
addTpaRequest(p_uuid, player.getUuid(player));
msg.text(player, concat("§6Teleport-Request: [§c", p_name, "§6 -> §c ", player_name, "§6]"));
msg.text(p, concat("§6Teleport-Request: [§c", p_name, "§6 -> §c ", player_name, "§6] "), text.click("§6[§aAccept§6]", concat("/tpaccepthere ", player_name)));
goto("wait");

@tpaccept
if(size != 1) {
	msg.prefix(player, prefix_commands, "/tpaccept <player>");
	goto("wait");
}
p_name = list.getIndex(args, 0);
p_uuid = player.getUuid(p_name);
if(p_uuid == null) {
	msg.prefix(player, prefix_commands, "This player has never been online.");
	goto("wait");
}
p_name = player.getName(p_uuid);
p = read.player(p_name);
if(p == null) {
	msg.prefix(player, prefix_commands, "This player is not online.");
	goto("wait");
}
if(!player.canTeleport(player)) {
	msg.prefix(player, prefix_commands, "This player can't teleport to you now.");
	goto("wait");
}
if(!player.canTeleport(p)) {
	msg.prefix(player, prefix_commands, "This player can't teleport to you now.");
	//Kein return. Spieler A bekommt cancel adventure und Spieler B wird informiert.
}
world_name = world.getName(loc.getWorld(entity.getLocation(player)));
if(world.isGamesName(world_name)) {
	msg.prefix(player, prefix_commands, concat("§c", p_name, "§r isn't allowed to teleport to your world."));
	goto("wait");
}
world_name = world.getName(loc.getWorld(entity.getLocation(p)));
if(world.isGamesName(world_name)) {
	msg.prefix(player, prefix_commands, concat("§c", p_name, "§r isn't allowed to teleport from their world."));
	goto("wait");
}
player_uuid = player.getUuid(player);
if(!hasTpaRequest(p_uuid, player_uuid)) {
	msg.prefix(player, prefix_commands, "No outstanding teleport-request.");
	goto("wait");
}
location = entity.getLocation(player);
player.teleport(p, location, true);
goto("wait");

@tpaccepthere
if(size != 1) {
	msg.prefix(player, prefix_commands, "/tpaccepthere <player>");
	goto("wait");
}
p_name = list.getIndex(args, 0);
p_uuid = player.getUuid(p_name);
if(p_uuid == null) {
	msg.prefix(player, prefix_commands, "This player has never been online.");
	goto("wait");
}
p_name = player.getName(p_uuid);
p = read.player(p_name);
if(p == null) {
	msg.prefix(player, prefix_commands, "This player is not online.");
	goto("wait");
}
if(!player.canTeleport(player)) {
	msg.prefix(p, prefix_commands, "This player can't teleport to you now.");
	//Kein return. Spieler A bekommt cancel adventure und Spieler B wird informiert.
}
if(!player.canTeleport(p)) {
	msg.prefix(player, prefix_commands, "You must not teleport to this player now.");
	goto("wait");
}
world_name = world.getName(loc.getWorld(entity.getLocation(player)));
if(world.isGamesName(world_name)) {
	msg.prefix(player, prefix_commands, "You can't teleport in this world.");
	goto("wait");
}
world_name = world.getName(loc.getWorld(entity.getLocation(p)));
if(world.isGamesName(world_name)) {
	msg.prefix(player, prefix_commands, "You can't teleport to this world.");
	goto("wait");
}
player_uuid = player.getUuid(player);
if(!hasTpaRequest(player_uuid, p_uuid)) {
	msg.prefix(player, prefix_commands, "No outstanding teleport-request.");
	goto("wait");
}
location = entity.getLocation(p);
player.teleport(player, location, true);
goto("wait");

@teleport
if(size < 1 || size > 2) {
	if(perm.has(player, "teleport.other")) {
		msg.prefix(player, prefix_commands, "/teleport [player] <to-player>");
	} else {
		msg.prefix(player, prefix_commands, "/teleport <player>");
	}
	goto("wait");
}
if(size == 1) {
	to_name = list.getIndex(args, 0);
}
elseif(size == 2) {
	if(!perm.has(player, "teleport.other")) {
		perm.no(player, "teleport.other");
		goto("wait");
	}
	affectedname = list.getIndex(args, 0);
	affectedplayer = read.player(affectedname);
	//Damit der ganze Spielername und nicht nur der eingegebene angezeigt wird
	to_name = list.getIndex(args, 1);
	if(affectedplayer == null) {
		msg.prefix(player, prefix_commands, "This player is not online.");
		goto("wait");
	}
}
if(player.hasMinigame(affectedplayer)) {
	if(size == 2) {
		msg.prefix(player, prefix_commands, "This player can't be teleported now.");
		goto("wait");
	}
	msg.prefix(player, prefix_commands, "You can't teleport now.");
	goto("wait");
}
to_player = read.player(to_name);
if(to_player == null) {
	msg.prefix(player, prefix_commands, "This player is not online.");
	goto("wait");
}
//Damit der ganze Spielername und nicht nur der eingegebene angezeigt wird
to_name = player.getName(to_player);
location = entity.getLocation(to_player);
if(player.teleport(affectedplayer, location, true)) {
	if(player != affectedplayer) {
		affectedname = player.getName(affectedplayer);
		msg.prefix(player, prefix_commands, concat("Teleported ", affectedname, " to ", to_name, "."));
	}
	msg.prefix(affectedplayer, prefix_commands, concat("Teleported you to ", to_name, "."));
}
goto("wait");

@say
if(size == 0) {
	msg.prefix(sender, prefix_commands, "/say <text>");
	goto("wait");
}
message = text.concatList(args, " ", 0, size - 1);
msg.server(message);
goto("wait");

@warp
if(size == 0) {
	@warpsyntax
	msg.prefix(player, prefix_commands, "/warp ...");
	if(perm.has(player, "warp.create")) {
		msg.text(player, "§6 - set [group] <warp> §rSets a warp");
		msg.text(player, "§6 - delete [group] <warp> §rDeletes a warp");
		msg.text(player, "§6 - [group] <warp> §rTeleports to a warp");
		msg.text(player, "§6 - list [group] §rLists all warps");
		msg.text(player, "§6 - groups §rLists all warp groups");
	} else {
		msg.text(player, "§6 - <warp> §rTeleports to a warp");
		msg.text(player, "§6 - list §rLists all warps");
	}
	goto("wait");
}
arg0 = text.toLowerCase(list.getIndex(args, 0));
if(arg0 == "delete") {
	if(!perm.has(player, "warp.create")) {
		perm.no(player, "warp.create");
		goto("wait");
	}
	if(size < 2) {
		goto("warpsyntax");
	}
	if(size == 2) {
		warp_name = text.toLowerCase(list.getIndex(args, 1));
		warp_group = "default";
	} else {
		warp_group = text.toLowerCase(list.getIndex(args, 1));
		warp_name = text.toLowerCase(list.getIndex(args, 2));
	}
	if(warp.delete(warp_group, warp_name)) {
		msg.prefix(player, prefix_commands, concat("Warp ", warp_name, " in group ", warp_group, " deleted."));
	} else {
		msg.prefix(player, prefix_commands, "Warpname doesn't exist.");
	}
	goto("wait");
}
if(arg0 == "list") {
	if(size == 1) {
		warp_group = "default";
	} else {
		if(!perm.has(player, "warp.create")) {
			perm.no(player, "warp.create");
			goto("wait");
		}
		warp_group = text.toLowerCase(list.getIndex(args, 1));
	}
	warps_list = warp.getList(warp_group);
	if(list.getSize(warps_list) == 0) {
		msg.prefix(player, prefix_commands, "No warps existing.");
	} else {
		msg.prefix(player, prefix_commands, concat("§6", warp_group, "§r warps:"));
		for(i = 0; i < list.getSize(warps_list); i++) {
			msg.text(player, concat("§6 - §r", list.getIndex(warps_list, i)));
		}
	}
	goto("wait");
}
if(arg0 == "groups") {
	if(!perm.has(player, "warp.create")) {
		perm.no(player, "warp.create");
		goto("wait");
	}
	groups_list = warp.getGroups();
	msg.prefix(player, prefix_commands, "All warp groups:");
	for(i = 0; i < list.getSize(groups_list); i++) {
		msg.text(player, concat("§6 - §r", list.getIndex(groups_list, i)));
	}
	goto("wait");
}
if(arg0 == "set") {
	if(!perm.has(player, "warp.create")) {
		perm.no(player, "warp.create");
		goto("wait");
	}
	if(size < 2) {
		goto("warpsyntax");
	}
	if(size == 2) {
		warp_name = text.toLowerCase(list.getIndex(args, 1));
		warp_group = "default";
	} else {
		warp_group = text.toLowerCase(list.getIndex(args, 1));
		warp_name = text.toLowerCase(list.getIndex(args, 2));
	}
	if(warp.exists(warp_group, warp_name)) {
		msg.prefix(player, prefix_commands, "Warpname already exists.");
		goto("wait");
	}
	warp.create(warp_group, warp_name, entity.getLocation(player));
	msg.prefix(player, prefix_commands, concat("Warp ", warp_name, " in group ", warp_group, " set."));
	goto("wait");
}
//Teleportation
if(size == 1) {
	warp_name = arg0;
	warp_group = "default";
} else {
	if(!perm.has(player, "warp.create")) {
		perm.no(player, "warp.create");
		goto("wait");
	}
	warp_name = text.toLowerCase(list.getIndex(args, 1));
	warp_group = arg0;
}
warp_loc = warp.get(warp_group, warp_name);
if(warp_loc == null) {
	msg.prefix(player, prefix_commands, "Warpname doesn't exist.");
	goto("wait");
}
if(!perm.has(player, "warp.create")) {
	world_name = world.getName(loc.getWorld(entity.getLocation(player)));
	if(world.isGamesName(world_name)) {
		msg.prefix(player, prefix_commands, "You can't teleport in this world.");
		goto("wait");
	}
	world_name = world.getName(loc.getWorld(warp_loc));
	if(world.isGamesName(world_name)) {
		msg.prefix(player, prefix_commands, "You can't teleport to this world.");
		goto("wait");
	}
}
if(player.teleport(player, warp_loc, true))  {
	msg.prefix(player, prefix_commands, concat("You have been teleported to warp §7", warp_name, "."));
}
goto("wait");

@databank
if(size == 0) {
	@databankhelp
	msg.prefix(player, prefix_commands, "/databank...");
	msg.text(player, "§6 - showtables §rShows all tables");
	msg.text(player, "§6 - showfields §rShows fields from a table");
	msg.text(player, "§6 - showdataypes §rShows dataypes from a table");
	goto("wait");
}
arg0 = text.toLowerCase(list.getIndex(args, 0));
if(arg0 == "showtables") {
	msg.text(player, getSpacer());
	stmt = databank.prepare("SHOW TABLES");
	result = databank.execute(stmt);
	while(databank.next(result)) {
		msg.text(player, databank.getString(result, 1));
	}
	databank.close(result);
	databank.close(stmt);
	goto("wait");
}
if(arg0 == "showfields") {
	if(size < 2) {
		msg.prefix(player, prefix_commands, "/databank showfields <table>");
		goto("wait");
	}
	table = list.getIndex(args, 1);
	if(!databank.isExistingTable(table)) {
		msg.prefix(player, prefix_commands, "This in no existing table.");
		goto("wait");
	}
	msg.text(player, getSpacer());
	fields = databank.getTableFields(table);
	iter = list.iterator(fields);
	while(hasNext(iter)) {
		msg.text(player, next(iter));
	}
	goto("wait");
}
if(arg0 == "showdataypes") {
	if(size < 2) {
		msg.prefix(player, prefix_commands, "/databank showdataypes <table>");
		goto("wait");
	}
	table = list.getIndex(args, 1);
	if(!databank.isExistingTable(table)) {
		msg.prefix(player, prefix_commands, "This in no existing table.");
		goto("wait");
	}
	msg.text(player, getSpacer());
	msg.text(player, databank.getTableDatatypes(table));
	goto("wait");
}
goto("databankhelp");

@seen
if(size != 1) {
	msg.prefix(player, prefix_commands, "/seen <player>");
	goto("wait");
}
seen_name = list.getIndex(args, 0);
seen_uuid = player.getUuid(seen_name);
if(seen_uuid == null) {
	msg.prefix(player, prefix_commands, "Dieser Spieler war noch nie online.");
	goto("wait");
}
if(read.player(seen_name) != null) {
	msg.prefix(player, prefix_commands, "Dieser Spieler ist gerade online.");
	goto("wait");
}
seenStatement = databank.prepare("SELECT logouttime FROM logoutdata WHERE player_id = ?;");
databank.setInt(seenStatement, 1, player.getId(seen_uuid));
result = databank.execute(seenStatement);
varset = false;
while(databank.next(result)) {
	time = databank.getLong(result, 1);
	calendar = time.new(time);
	year = text.number(time.getYear(calendar));
	month = text.number(time.getMonth(calendar));
	day = text.number(time.getDay(calendar));
	minute = text.number(time.getMinute(calendar));
	hour = text.number(time.getHour(calendar));
	month = correctTimeFormat(month);
	day = correctTimeFormat(day);
	hour = correctTimeFormat(hour);
	minute = correctTimeFormat(minute);
	dateformat = concat(day, ".", month, ".", year);
	clockformat = concat(hour, ":", minute);
    msg.prefix(player, prefix_commands, concat(seen_name, " war zuletzt am §e", dateformat, "§r um §e",  clockformat, " Uhr §ronline."));
	varset = true;
}
databank.close(result);
databank.close(seenStatement);
if(!varset) {
	msg.prefix(player, prefix_commands, "Keine Daten vorhanden.");
	goto("wait");
}
goto("wait");

@lastseen
if(size != 1) {
	msg.prefix(sender, prefix_commands, "/lastseen <amount>");
	goto("wait");
}
amount = list.getIndex(args, 0);
if(!isDouble(amount)) {
	msg.prefix(sender, prefix_commands, "Number expected.");
	goto("wait");
}
if(amount < 1) {
	msg.prefix(sender, prefix_commands, "Positive number expected.");
	goto("wait");
}
msg.prefix(sender, prefix_commands, "These players were last seen:");
table = table.new("§f", 12, 12);
msg.text(sender, table.getStart(table));
msg.text(sender, table.get(table, "Player", "Date"));
msg.text(sender, table.getMiddle(table));
lastseenStatement = databank.prepare("SELECT player_id, logouttime FROM logoutdata ORDER BY logouttime DESC LIMIT ?;");
databank.setInt(lastseenStatement, 1, amount);
result = databank.execute(lastseenStatement);
while(databank.next(result)) {
	id = databank.getInt(result, 1);
	time = databank.getLong(result, 2);
	msg.text(sender, table.get(table, concat("§a", player.getNameFromId(id)), concat("§e", getTimeString(time))));
}
msg.text(sender, table.getEnd(table));
databank.close(result);
databank.close(lastseenStatement);
goto("wait");

@feed
if(size > 1) {
	msg.prefix(player, prefix_commands, "/feed [player]");
	goto("wait");
}
if(size == 1) {
	affectedname = list.getIndex(args, 0);
	affectedplayer = read.player(affectedname);
	if(affectedplayer == null) {
		msg.prefix(player, prefix_commands, "This player is not online.");
		goto("wait");
	}
	if(player != affectedplayer) {
		affectedname = player.getName(affectedplayer);
		msg.prefix(player, prefix_commands, concat("Der Hunger von ", affectedname, " wurde gestillt."));
	}
}

player.setHunger(affectedplayer, 20);
player.setSaturation(affectedplayer, 5);
msg.prefix(affectedplayer, prefix_commands, "Dein Hunger wurde gestillt.");
goto("wait");

@tempfly
if(size < 2) {
	msg.prefix(sender, prefix_commands, "/tempfly <player> <sec>");
	goto("wait");
}
p_name = list.getIndex(args, 0);
if(!checkIfEverOnline(p_name)) {
	msg.prefix(sender, prefix_commands, "This player has never been online.");
	goto("wait");
}
p = read.player(p_name);
if(p == null) {
	msg.prefix(sender, prefix_commands, "This player is not online.");
	goto("wait");
}
p_name = player.getName(player.getUuid(p_name));
if(player.hasMinigame(p)) {
	msg.prefix(player, prefix_commands, "This player can't fly now.");
	goto("wait");
}
sec = list.getIndex(args, 1);
if(!isDouble(sec) || sec < 0) {
	msg.prefix(sender, prefix_commands, "Positive number expected.");
	goto("wait");
}
msg.prefix(sender, prefix_commands, concat(p_name, " can now fly for ", text.number(sec), " seconds."));
msg.prefix(p, prefix_commands, concat("You can now fly for ", text.number(sec), " seconds."));
player.setFly(p, true);
duration = sec * 20;
data.setTimer(p, "fly", duration);
status.addTimed(player, 55, duration, "Fly");
goto("wait");

@fly
if(size > 2) {
	msg.prefix(player, prefix_commands, "/fly [player] [on/off]");
	goto("wait");
}
if(size >= 1) {
	if(!perm.has(player, "fly.other")) {
		perm.no(player, "fly.other");
		goto("wait");
	}
	affectedname = list.getIndex(args, 0);
	affectedplayer = read.player(affectedname);
	if(affectedplayer == null) {
		msg.prefix(player, prefix_commands, "This player is not online.");
		goto("wait");
	}
}
world_name = world.getName(loc.getWorld(entity.getLocation(player)));
if(world.isGamesName(world_name)) {
	if(player.hasMinigame(affectedplayer) || (perm.has(affectedplayer, "fly") && !perm.has(affectedplayer, "isTeam"))) {
		if(size == 2) {
			msg.prefix(player, prefix_commands, "This player can't fly now.");
		} else {
			msg.prefix(player, prefix_commands, "You can't fly now.");
		}
		goto("wait");
	}
}
if(size == 2) {
	boolean = list.getIndex(args, 1);
	if(boolean == "on") {
		fly = true;
	} elseif(boolean == "off") {
		fly = false;
	} else {
		msg.prefix(player, prefix_commands, "/fly [player] [on/off]");
		goto("wait");
	}
} else {
	if(player.hasFly(affectedplayer)) {
		fly = false;
	} else {
		fly = true;
	}
}
player.setFly(affectedplayer, fly);
if(fly) {
	msg.prefix(affectedplayer, prefix_commands, "You can fly now.");
	if(player != affectedplayer) {
		affectedname = player.getName(affectedplayer);
		msg.prefix(player, prefix_commands, concat(affectedname, " can fly now."));
	}
} else {
	msg.prefix(affectedplayer, prefix_commands, "You can't fly anymore.");
	if(player != affectedplayer) {
		affectedname = player.getName(affectedplayer);
		msg.prefix(player, prefix_commands, concat(affectedname, " can't fly anymore."));
	}
}
goto("wait");

@tppos
if(size < 3 || size > 5) {
	msg.prefix(player, prefix_commands, "/tppos <x> <y> <z> [world] [player]");
	goto("wait");
}

x = list.getIndex(args, 0);
y = list.getIndex(args, 1);
z = list.getIndex(args, 2);

if(!isDouble(x) || !isDouble(y) || !isDouble(z)) {
	msg.prefix(player, prefix_commands, "x/y/z müssen Zahlen sein.");
	goto("wait");
}

if(size >= 4) {
	worldname = list.getIndex(args, 3);
	world = world.get(worldname);
	if(world == null) {
		msg.prefix(player, prefix_commands, "This world is not loaded.");
		goto("wait");
	}
} else {
	world = loc.getWorld(entity.getLocation(player));
}
if(x < -32000) {
	x = -32000;
} elseif(x > 32000) {
	x = 32000;
}
if(y < 0) {
	y = 0;
} elseif(y > 255) {
	y = 255;
}
if(z < -32000) {
	z = -32000;
} elseif(z > 32000) {
	z = 32000;
}
location = loc.new(world, x, y, z);
if(size == 5) {
	affectedname = list.getIndex(args, 4);
	affectedplayer = read.player(affectedname);
	if(affectedplayer == null) {
		msg.prefix(player, prefix_commands, "This player is not online.");
		goto("wait");
	}
}
if(player.hasMinigame(affectedplayer)) {
	if(size == 5) {
		msg.prefix(player, prefix_commands, "This player can't be teleported now.");
		goto("wait");
	}
	msg.prefix(player, prefix_commands, "You can't teleport now.");
	goto("wait");
}
if(player.teleport(affectedplayer, location, true)) {
	if(player != affectedplayer) {
		affectedname = player.getName(affectedplayer);
		msg.prefix(player, prefix_commands, concat(affectedname, " was teleported."));
	}
}
goto("wait");

@back
if(size > 0) {
	msg.prefix(player, prefix_commands, "/back");
	goto("wait");
}
if(!player.canTeleport(player)) {
	msg.prefix(player, prefix_commands, "You can't teleport now.");
	goto("wait");
}
hasPerms = perm.has(player, "isTeam");
if(!hasPerms) {
	world_name = world.getName(loc.getWorld(entity.getLocation(player)));
	if(world.isGamesName(world_name) || world.isStoryName(world_name)) {
		msg.prefix(player, prefix_commands, "You can't use /back in this world.");
		goto("wait");
	}
}
location = player.getBackPos(player);
if(location == null) {
	msg.prefix(player, prefix_commands, "No back-location available.");
	goto("wait");
}
world = loc.getWorld(location);
if(world == null) {
	msg.prefix(player, prefix_commands, "This world is not loaded.");
	goto("wait");
}
if(!hasPerms) {
	world_name = world.getName(world);
	if(world.isGamesName(world_name)) {
		msg.prefix(player, prefix_commands, "You can't teleport to this world.");
		goto("wait");
	}
}
player.teleport(player, location, true);
goto("wait");

@clan
if(size == 0) {
	@clanhelp
	msg.prefix(player, prefix_clan, "§r/clan...");
	msg.text(player, "§2 - info [id/name/tag] §rReturns info about a clan");
	msg.text(player, "§2 - list §rLists all clans");
	msg.text(player, "");
	msg.text(player, "§2 - create <name> <tag> §rCreates a clan. Costs §64096 §rsnuvis.");
	msg.text(player, "§2 - invite <name> §rInvites a player");
	msg.text(player, "§2 - accept <id/name/tag> §rAccepts an invitation");	
	msg.text(player, "");
	msg.text(player, "§2 - kick <name> §rKicks a player");
	msg.text(player, "§2 - leader <name> §rPromote to clan-leader");
	msg.text(player, "§2 - mod <name> §rPromote to clan-mod");
	msg.text(player, "§2 - degrade <name> §rDemote a clan-mod");
	msg.text(player, "§2 - leave §rLeave a clan");
	msg.text(player, "");
	msg.text(player, "§2 - rename <name> <tag> §rRenames a clan. Costs §664 §rsnuvis.");
	msg.text(player, "§2 - setspawn §rSets a clan-spawn");
	msg.text(player, "§2 - spawn §rTeleports to clan-spawn");
	msg.text(player, "§2 - disband §rDisband a clan");
	msg.text(player, "");
	msg.text(player, "§2 - deposit <money> §rDeposit money to the clan account");
	msg.text(player, "§2 - withdraw <money> §rWithdraw money from the clan account");
	msg.text(player, "§2 - msg <message> §rSends a clan-message");
	msg.text(player, "§2 - mail <message> §rSends a clan-mail");
	msg.text(player, "§2 - shout <message> §rSends a message to all online players. Costs §664 §rsnuvis.");
	msg.text(player, "§2 - party §rInvites all online members to a party");
	goto("wait");
}
arg0 = text.toLowerCase(list.getIndex(args, 0));
if(arg0 == "invite") {
	if(size != 2) {
		msg.prefix(player, prefix_commands, "/clan invite <name>");
		goto("wait");
	}
	if(!player.isInClan(player)) {
		msg.prefix(player, prefix_clan, "You are not in a clan.");
		goto("wait");
	}
	if(!player.isClanLeader(player) && !player.isClanMod(player)) {
		msg.prefix(player, prefix_clan, "You have no permission for this.");
		goto("wait");
	}
	p_name = list.getIndex(args, 1);
	if(text.toLowerCase(player.getName(player)) == text.toLowerCase(p_name)) {
		msg.prefix(player, prefix_clan, "You can't invite yourself.");
		goto("wait");
	}
	if(!checkIfEverOnline(p_name)) {
		msg.prefix(sender, prefix_clan, "This player has never been online.");
		goto("wait");
	}
	if(!isOnline(p_name)) {
		msg.prefix(player, prefix_clan, "This player has to be online.");
		goto("wait");
	}
	p = read.player(p_name);
	if(player.isClanMember(player)) {
		msg.prefix(player, prefix_clan, "This player is already in a clan.");
		goto("wait");
	}
	clan_id = player.getClanId(player);
	p_id = player.getId(p);
	if(player.hasClanInvitation(p_id, clan_id)) {
		msg.prefix(player, prefix_clan, "This player already has an invitation from your clan.");
		goto("wait");
	}
	player.addClanInvitation(p_id, clan_id);
	clan_name = clan.getName(clan_id);
	msg.prefix(player, prefix_clan, text.concat("You invited §7", p_name, "§r to your clan."));
	msg.prefix(p, prefix_clan, text.concat("You got an clan invitation by §7", clan_name, "§r."));
	msg.text(p, text.click("§r[§aAccept§r]", concat("/clan accept ", clan_id)));
	sgoto(6000, "remove_clan_invitation"); //5 Minuten
	goto("wait");
}
if(arg0 == "accept") {
	if(size != 2) {
		msg.prefix(player, prefix_commands, "/clan accept <id/name/tag>");
		goto("wait");
	}
	if(player.isInClan(player)) {
		msg.prefix(player, prefix_clan, "You are already in a clan.");
		goto("wait");
	}
	arg1 = list.getIndex(args, 1);
	if(isDouble(arg1)) {
		clan_id = arg1;
		clan_name = clan.getName(clan_id);
		if(clan_name == null) {
			msg.prefix(player, prefix_clan, "Unknown clan.");
			goto("wait");
		}
	} else {
		clan_id = clan.getIdFromName(arg1);
		if(clan_id == null) {
			clan_id = clan.getIdFromTag(arg1);
			if(clan_id == null) {
				msg.prefix(player, prefix_clan, "Unknown clan.");
				goto("wait");
			}
		}
	}
	player_id = player.getId(player);
	if(!player.hasClanInvitation(player_id, clan_id)) {
		msg.prefix(player, prefix_clan, "You have no invitation from this clan.");
		goto("wait");
	}
	clan.addMember(clan_id, player, "member");
	player.setHeadName(player);
	clan.msg.text(clan_id, text.concat("§7", player.getName(player), "§r joined the clan."));
	msg.prefix(player, prefix_clan, text.concat("You joined §7", clan_name, "§r."));
	clan_size = clan.getMembersAmount(clan_id);
	if(clan_size >= 15) {
		rank.offerClan(clan_id, "rank.lord");
	} elseif(clan_size >= 10) {
		rank.offerClan(clan_id, "rank.chief");
	} elseif(clan_size >= 5) {
		rank.offerClan(clan_id, "rank.commander");
	}
	goto("wait");
}
if(arg0 == "create") {
	if(size != 3) {
		msg.prefix(player, prefix_commands, "/clan create <name> <tag>");
		goto("wait");
	}
	if(player.isInClan(player)) {
		msg.prefix(player, prefix_clan, "You are already in a clan.");
		goto("wait");
	}
	clan_name = list.getIndex(args, 1);
	if(text.length(clan_name) > 20) {
		msg.prefix(player, prefix_clan, "Maximum 20 letters allowed for name.");
		goto("wait");
	}
	if(!text.onlyletters(clan_name)) {
		msg.prefix(player, prefix_clan, "Only letters are allowed.");
		goto("wait");
	}
	if(clan.isExistingName(clan_name)) {
		msg.prefix(player, prefix_clan, "This name already exists.");
		goto("wait");
	}
	clan_tag = list.getIndex(args, 2);
	tag_length = text.length(clan_tag);
	if(tag_length < 3 || tag_length > 4) {
		msg.prefix(player, prefix_clan, "3 to 4 letters allowed for tag.");
		goto("wait");
	}
	if(!text.onlyletters(clan_tag)) {
		msg.prefix(player, prefix_clan, "Only letters are allowed.");
		goto("wait");
	}
	if(clan.isExistingTag(clan_tag)) {
		msg.prefix(player, prefix_clan, "This tag already exists.");
		goto("wait");
	}
	if(!hasEnoughMoney(player, 4096)) { //1 Goldmünze
		msg.prefix(player, prefix_clan, "You need 4096 snuvis (1 gold coin).");
		goto("wait");
	}
	subMoney(player, 4096);
	clan_id = clan.create(clan_name, clan_tag);
	clan.addMember(clan_id, player, "leader");
	player.setHeadName(player);
	msg.prefix(player, prefix_clan, "Clan successful created.");
	goto("wait");
}
if(arg0 == "info") {
	if(size == 1) {
		if(!player.isInClan(player)) {
			msg.prefix(player, prefix_commands, "/clan info <id/name/tag>");
			goto("wait");
		}
		clan_id = player.getClanId(player);
		clan_name = clan.getName(clan_id);
		clan_tag = clan.getTag(clan_id);
	}
	if(size == 2) {
		arg1 = list.getIndex(args, 1);
		if(isDouble(arg1)) {
			clan_id = arg1;
			clan_name = clan.getName(clan_id);
			if(clan_name == null) {
				msg.prefix(player, prefix_clan, "Unknown clan.");
				goto("wait");
			}
		} else {
			clan_id = clan.getIdFromName(arg1);
			if(clan_id == null) {
				clan_id = clan.getIdFromTag(arg1);
				if(clan_id == null) {
					msg.prefix(player, prefix_clan, "Unknown clan.");
					goto("wait");
				}
			}
			clan_name = clan.getName(clan_id);
		}
		clan_tag = clan.getTag(clan_id);
	}
	list = clan.getMembersList(clan_id);
	mod_list = list.new();
	members_list = list.new();
	iter = list.iterator(list);
	while(hasNext(iter)) {
		player_uuid = next(iter);
		player_name = player.getName(player_uuid);
		player_id = player.getId(player_uuid);
		if(player.isClanLeader(player_id)) {
			leader = player_name;
		} else {
			if(player.isClanMod(player_id)) {
				list.add(mod_list, player_name);
			} else {
				list.add(members_list, player_name);
			}
		}
	}
	if(list.getSize(mod_list) == 0) {
		mods = "-";
	} else {
		mods = text.concatList(mod_list, ", ", 0, list.getSize(mod_list) - 1);
	}
	if(list.getSize(members_list) == 0) {
		members = "-";
	} else {
		members = text.concatList(members_list, ", ", 0, list.getSize(members_list) - 1);
	}
	msg.text(player, text.concat("§6§lClan §r", clan_name, " (", clan_tag, " #ID:", text.number(clan_id), ")"));
	msg.text(player, "§6Leader");
	msg.text(player, "§r", leader);
	msg.text(player, "§6Mods");
	msg.text(player, "§r", mods);
	msg.text(player, "§6Members");
	msg.text(player, "§r", members);
	msg.text(player, "§6Money");
	msg.text(player, text.number(clan.getMoney(clan_id)));
	goto("wait");
}
if(arg0 == "rename") {
	if(!player.isInClan(player)) {
		msg.prefix(player, prefix_clan, "You are not in a clan.");
		goto("wait");
	}
	if(!player.isClanLeader(player)) {
		msg.prefix(player, prefix_clan, "You are not a clan leader.");
		goto("wait");
	}
	if(size != 3) {
		msg.prefix(player, prefix_commands, "/clan rename <name> <tag>");
		goto("wait");
	}
	clan_name = list.getIndex(args, 1);
	if(text.length(clan_name) > 20) {
		msg.prefix(player, prefix_clan, "Maximum 20 letters allowed for name.");
		goto("wait");
	}
	if(!text.onlyletters(clan_name)) {
		msg.prefix(player, prefix_clan, "Only letters are allowed.");
		goto("wait");
	}
	if(clan.isExistingName(clan_name)) {
		msg.prefix(player, prefix_clan, "This name already exists.");
		goto("wait");
	}
	clan_tag = list.getIndex(args, 2);
	tag_length = text.length(clan_tag);
	if(tag_length < 3 || tag_length > 4) {
		msg.prefix(player, prefix_clan, "3 to 4 letters allowed for tag.");
		goto("wait");
	}
	if(!text.onlyletters(clan_tag)) {
		msg.prefix(player, prefix_clan, "Only letters are allowed.");
		goto("wait");
	}
	if(clan.isExistingTag(clan_tag)) {
		msg.prefix(player, prefix_clan, "This tag already exists.");
		goto("wait");
	}
	clan_id = player.getClanId(player);
	if(clan.getMoney(clan_id) < 64) {
		msg.prefix(player, prefix_clan, "Your clan needs 64 snuvis.");
		goto("wait");
	}
	clan.subMoney(clan_id, 64);
	clan.setName(clan_id, clan_name);
	clan.setTag(clan_id, clan_tag);
	clan.msg.text(clan_id, text.concat("Clan renamed to §7", clan_name, "§r."));
	//New tag for online players
	clan.updateHeadNames(clan_id);
	goto("wait");
}
if(arg0 == "msg") {
	if(!player.isInClan(player)) {
		msg.prefix(player, prefix_clan, "You are not in a clan.");
		goto("wait");
	}
	if(size < 2) {
		msg.prefix(player, prefix_commands, "/clan msg <message>");
		goto("wait");
	}
	clan_id = player.getClanId(player);
	clan.msg.text(clan_id, text.concat(player.getName(player), ": ", text.concatList(args, " ", 1, size - 1)));
	goto("wait");
}
if(arg0 == "mail") {
	if(!player.isInClan(player)) {
		msg.prefix(player, prefix_clan, "You are not in a clan.");
		goto("wait");
	}
	if(size < 2) {
		msg.prefix(player, prefix_commands, "/clan mail <message>");
		goto("wait");
	}
	if(player.isClanMember(player)) {
		msg.prefix(player, prefix_commands, "You have no permission for this.");
		goto("wait");
	}
	clan_id = player.getClanId(player);
	clan.mail(clan_id, player.getName(player), text.concatList(args, " ", 1, size - 1));
	goto("wait");
}
if(arg0 == "shout") {
	if(!player.isInClan(player)) {
		msg.prefix(player, prefix_clan, "You are not in a clan.");
		goto("wait");
	}
	if(size < 2) {
		msg.prefix(player, prefix_commands, "/clan shout <message>");
		goto("wait");
	}
	if(player.isClanMember(player)) {
		msg.prefix(player, prefix_commands, "You have no permission for this.");
		goto("wait");
	}
	clan_id = player.getClanId(player);
	if(clan.getMoney(clan_id) < 64) {
		msg.prefix(player, prefix_clan, "Your clan needs 64 snuvis.");
		goto("wait");
	}
	clan.subMoney(clan_id, 64);
	msg.prefix("online", prefix_clan, text.concat(clan.getTag(clan_id), ": ", text.concatList(args, " ", 1, size - 1)));
	goto("wait");
}
if(arg0 == "deposit") {
	if(!player.isInClan(player)) {
		msg.prefix(player, prefix_clan, "You are not in a clan.");
		goto("wait");
	}
	if(size != 2) {
		msg.prefix(player, prefix_commands, "/clan deposit <money>");
		goto("wait");
	}
	money = list.getIndex(args, 1);
	if(!isDouble(money) || money < 0) {
		msg.prefix(player, prefix_clan, "Positive number expected.");
		goto("wait");
	}
	if(!hasEnoughMoney(player, money)) {
		msg.prefix(player, prefix_clan, "You can't transfer more money than you have.");
		goto("wait");
	}
	clan_id = player.getClanId(player);
	clan.addMoney(clan_id, money);
	subMoney(player, money);
	clan.msg.text(clan_id, text.concat("§7", player.getName(player), "§r transferred §7", text.number(money), "§r snuvis."));
	goto("wait");
}
if(arg0 == "party") {
	counter = 0;
	clan_id = player.getClanId(player);
	list = clan.getMembersList(clan_id);
	iter = list.iterator(list);
	while(hasNext(iter)) {
		p = player.get(next(iter));
		if(p != null) {
			temp = party.invitePlayer(player, p);
			if(temp == true) {
				counter++;
			}
		}
	}
	msg.prefix(player, prefix_clan, concat(text.number(counter), " online clan members invited to a party."));
	goto("wait");
}
if(arg0 == "withdraw") {
	if(!player.isInClan(player)) {
		msg.prefix(player, prefix_clan, "You are not in a clan.");
		goto("wait");
	}
	if(!player.isClanLeader(player)) {
		msg.prefix(player, prefix_clan, "You are not a clan leader.");
		goto("wait");
	}
	if(size != 2) {
		msg.prefix(player, prefix_commands, "/clan withdraw <money>");
		goto("wait");
	}
	money = list.getIndex(args, 1);
	if(!isDouble(money) || money < 0) {
		msg.prefix(player, prefix_clan, "Positive number expected.");
		goto("wait");
	}
	clan_id = player.getClanId(player);
	clan_money = clan.getMoney(clan_id);
	if(clan_money < money) {
		msg.prefix(player, prefix_clan, text.concat("There are only §7", text.number(clan_money), "§r snuvis on the clan account."));
		goto("wait");
	}
	clan.subMoney(clan_id, money);
	addMoney(player, money);
	msg.prefix(player, prefix_clan, text.concat("You have withdrawn §7", text.number(money), "§r snuvis."));
	goto("wait");
}
if(arg0 == "leader") {
	if(!player.isInClan(player)) {
		msg.prefix(player, prefix_clan, "You are not in a clan.");
		goto("wait");
	}
	if(!player.isClanLeader(player)) {
		msg.prefix(player, prefix_clan, "You are not a clan leader.");
		goto("wait");
	}
	if(size != 2) {
		msg.prefix(player, prefix_commands, "/clan leader <name>");
		goto("wait");
	}
	p_name = list.getIndex(args, 1);
	if(!checkIfEverOnline(p_name)) {
		msg.prefix(player, prefix_clan, "This player has never been online.");
		goto("wait");
	}
	if(text.toLowerCase(player.getName(player)) == text.toLowerCase(p_name)) {
		msg.prefix(player, prefix_clan, "You can't do this for yourself.");
		goto("wait");
	}
	p_uuid = player.getUuid(p_name);
	p_id = player.getId(p_uuid);
	if(!player.isSameClan(player, p_id)) {
		msg.prefix(player, prefix_clan, "This player is not in your clan.");
		goto("wait");
	}
	player.setClanRole(p_id, "leader");
	player.setClanRole(player, "mod");
	clan_id = player.getClanId(player);
	clan.msg.text(clan_id, text.concat("§7", p_name, "§r was set to clan leader."));
	goto("wait");
}
if(arg0 == "mod") {
	if(!player.isInClan(player)) {
		msg.prefix(player, prefix_clan, "You are not in a clan.");
		goto("wait");
	}
	if(!player.isClanLeader(player)) {
		msg.prefix(player, prefix_clan, "You are not a clan leader.");
		goto("wait");
	}
	if(size != 2) {
		msg.prefix(player, prefix_commands, "/clan leader <name>");
		goto("wait");
	}
	p_name = list.getIndex(args, 1);
	if(!checkIfEverOnline(p_name)) {
		msg.prefix(player, prefix_clan, "This player has never been online.");
		goto("wait");
	}
	if(text.toLowerCase(player.getName(player)) == text.toLowerCase(p_name)) {
		msg.prefix(player, prefix_clan, "You can't do this for yourself.");
		goto("wait");
	}
	p_uuid = player.getUuid(p_name);
	p_id = player.getId(p_uuid);
	if(!player.isSameClan(player, p_id)) {
		msg.prefix(player, prefix_clan, "This player is not in your clan.");
		goto("wait");
	}
	player.setClanRole(p_id, "mod");
	clan_id = player.getClanId(player);
	clan.msg.text(clan_id, text.concat("§7", p_name, "§r was set to clan mod."));
	goto("wait");
}
if(arg0 == "degrade") {
	if(!player.isInClan(player)) {
		msg.prefix(player, prefix_clan, "You are not in a clan.");
		goto("wait");
	}
	if(!player.isClanLeader(player)) {
		msg.prefix(player, prefix_clan, "You are not a clan leader.");
		goto("wait");
	}
	if(size != 2) {
		msg.prefix(player, prefix_commands, "/clan degrade <name>");
		goto("wait");
	}
	p_name = list.getIndex(args, 1);
	if(!checkIfEverOnline(p_name)) {
		msg.prefix(player, prefix_clan, "This player has never been online.");
		goto("wait");
	}
	if(text.toLowerCase(player.getName(player)) == text.toLowerCase(p_name)) {
		msg.prefix(player, prefix_clan, "You can't do this for yourself.");
		goto("wait");
	}
	p_uuid = player.getUuid(p_name);
	p_id = player.getId(p_uuid);
	if(!player.isSameClan(player, p_id)) {
		msg.prefix(player, prefix_clan, "This player is not in your clan.");
		goto("wait");
	}
	player.setClanRole(p_id, "member");
	clan_id = player.getClanId(player);
	clan.msg.text(clan_id, text.concat("§7", p_name, "§r was degraded."));
	goto("wait");
}
if(arg0 == "kick") {
	if(!player.isInClan(player)) {
		msg.prefix(player, prefix_clan, "You are not in a clan.");
		goto("wait");
	}
	if(!player.isClanLeader(player) && !player.isClanMod(player)) {
		msg.prefix(player, prefix_clan, "You have no permission for this.");
		goto("wait");
	}
	if(size != 2) {
		msg.prefix(player, prefix_commands, "/clan kick <name>");
		goto("wait");
	}
	p_name = list.getIndex(args, 1);
	if(!checkIfEverOnline(p_name)) {
		msg.prefix(player, prefix_clan, "This player has never been online.");
		goto("wait");
	}
	if(text.toLowerCase(player.getName(player)) == text.toLowerCase(p_name)) {
		msg.prefix(player, prefix_clan, "You can't do this for yourself.");
		goto("wait");
	}
	p_uuid = player.getUuid(p_name);
	p_id = player.getId(p_uuid);
	if(!player.isSameClan(player, p_id)) {
		msg.prefix(player, prefix_clan, "This player is not in your clan.");
		goto("wait");
	}
	if(player.isClanLeader(p_id)) {
		msg.prefix(player, prefix_clan, "You can't kick the leader.");
		goto("wait");
	}
	if(player.isClanMod(player) && player.isClanMod(p_id)) {
		msg.prefix(player, prefix_clan, "You can't kick another mod.");
		goto("wait");
	}
	clan_id = player.getClanId(player);
	clan.msg.text(clan_id, text.concat("§7", p_name, "§r got kicked out of the clan."));
	clan.removeMember(clan_id, p_id);
	p = read.player(p_name);
	if(p_name != null) {
		player.setHeadName(p);
	}
	goto("wait");
}
if(arg0 == "disband") {
	if(!player.isInClan(player)) {
		msg.prefix(player, prefix_clan, "You are not in a clan.");
		goto("wait");
	}
	if(!player.isClanLeader(player)) {
		msg.prefix(player, prefix_clan, "You are not a clan leader.");
		goto("wait");
	}
	clan_id = player.getClanId(player);
	clan.msg.text(clan_id, "Clan disbanded.");
	list = clan.getMembersList(clan_id);
	clan.delete(clan_id);
	iter = list.iterator(list);
	while(hasNext(iter)) {
		p = player.get(next(iter));
		if(p != null) {
			player.setHeadName(p);
		}
	}
	goto("wait");
}
if(arg0 == "leave") {
	if(!player.isInClan(player)) {
		msg.prefix(player, prefix_clan, "You are not in a clan.");
		goto("wait");
	}
	if(player.isClanLeader(player)) {
		msg.prefix(player, prefix_clan, "You have to set another leader first.");
		goto("wait");
	}
	clan_id = player.getClanId(player);
	clan.msg.text(clan_id, text.concat("§7", player.getName(player), "§r left the clan."));
	clan.removeMember(clan_id, player);
	player.setHeadName(player);
	goto("wait");
}
if(arg0 == "list") {
	table = table.new("§b", 2, 6, 4, 5);
	msg.text(player, table.getStart(table));
	msg.text(player, table.get(table, "§2ID", "§2Name", "§2Tag", "§2Members"));
	msg.text(player, table.getMiddle(table));
	
	list = clan.getIdList();
	iter = list.iterator(list);
	while(hasNext(iter)) {
		clan_id = next(iter);
		name = clan.getName(clan_id);
		tag = clan.getTag(clan_id);
		amount = clan.getMembersAmount(clan_id);
		msg.text(player, table.get(table, text.number(clan_id), name, tag, text.number(amount)));
	}
	msg.text(player, table.getEnd(table));
	goto("wait");
}
if(arg0 == "setspawn") {
	if(!player.isInClan(player)) {
		msg.prefix(player, prefix_clan, "You are not in a clan.");
		goto("wait");
	}
	if(!player.isClanLeader(player) && !player.isClanMod(player)) {
		msg.prefix(player, prefix_clan, "You have no permission for this.");
		goto("wait");
	}
	clan_id = player.getClanId(player);
	clan.setSpawn(clan_id, entity.getLocation(player));
	msg.prefix(player, prefix_clan, "New clan spawn set.");
	goto("wait");
}
if(arg0 == "spawn") {
	if(!player.isInClan(player)) {
		msg.prefix(player, prefix_clan, "You are not in a clan.");
		goto("wait");
	}
	clan_id = player.getClanId(player);
	spawn_loc = clan.getSpawn(clan_id);
	if(spawn_loc == null) {
		msg.prefix(player, prefix_clan, "No clan spawn set.");
		goto("wait");
	}
	if(!perm.has(player, "isTeam")) {
		world_name = world.getName(loc.getWorld(entity.getLocation(player)));
		if(world.isGamesName(world_name)) {
			msg.prefix(player, prefix_commands, "You can't teleport in this world.");
			goto("wait");
		}
	}
	player.teleport(player, spawn_loc, true);
	goto("wait");
}
goto("clanhelp");

@remove_clan_invitation
list.removeIndex(clan_invitations, 0);
goto("wait");

@color
msg.text(player, getSpacer());
msg.text(player, "  §0&0  §1&1  §2&2  §3&3  §4&4  §5&5  §6&6  §7&7");
msg.text(player, "  §8&8  §9&9  §a&a  §b&b  §c&c  §d&d  §e&e  §f&f");
msg.text(player, "  &l §l(bold)");
msg.text(player, "  &m §m(strikethrough)");
msg.text(player, "  &n §n(underline)");
msg.text(player, "  &o §o(italic)");
goto("wait");

@setspawn
if(size != 1) {
	@setspawnhelp
	msg.prefix(player, prefix_commands, "/setspawn ...");
	msg.text(player, "§6 - server");
	msg.text(player, "§6 - games");
	msg.text(player, "§6 - creative");
	msg.text(player, "§6 - story");
	goto("wait");
}
arg0 = text.toLowerCase(list.getIndex(args, 0));
new_spawn = text.location(entity.getLocation(player));
config = getScriptVar("server_config");
if(arg0 == "games") {
	config.set(config, "gamesspawn", new_spawn);
	msg.prefix(player, prefix_commands, "New spawn for gaming world set.");
} elseif(arg0 == "server") {
	config.set(config, "serverspawn", new_spawn);
	msg.prefix(player, prefix_commands, "New main Spawn set.");
} elseif(arg0 == "creative") {
	config.set(config, "creativespawn", new_spawn);
	msg.prefix(player, prefix_commands, "New spawn for creative world set.");
} elseif(arg0 == "story") {
	config.set(config, "storyspawn", new_spawn);
	msg.prefix(player, prefix_commands, "New spawn for story world set.");
} else {
	goto("setspawnhelp");
}
config.saveAsync(config);
goto("wait");

@heal
if(size > 1) {
	msg.prefix(player, prefix_commands, "/heal [player]");
	goto("wait");
}
if(size == 1) {
	affectedname = list.getIndex(args, 0);
	affectedplayer = read.player(affectedname);
	if(affectedplayer == null) {
		msg.prefix(player, prefix_commands, "This player is not online.");
		goto("wait");
	}
	if(player != affectedplayer) {
		affectedname = player.getName(affectedplayer);
		msg.prefix(player, prefix_commands, concat(affectedname, " was healed."));
	}
}
living.heal(affectedplayer, 50);
player.setHunger(affectedplayer, 20);
player.setSaturation(affectedplayer, 5);
entity.clearEffects(affectedplayer);
entity.setBurning(affectedplayer, 0);
msg.prefix(affectedplayer, prefix_commands, "You have been healed.");
goto("wait");

@inv
if(size == 0) {
	@invhelp
	msg.prefix(player, prefix_commands, "/inv ...");
	if(perm.has(player, "inv.ignore")) {
		msg.text(player, "§6 - ignore §rToggles inventory change on world change");
	}
	if(perm.has(player, "inv.see")) {
		msg.text(player, "§6 - see <player> §rOpens a player's inventory");
	}
	if(perm.has(player, "inv.reload")) {
		msg.text(player, "§6 - reload <player> §rReloads a player's inventory");
	}
	if(perm.has(player, "inv.saveFor")) {
		msg.text(player, "§6 - saveFor <player> <world> §rSaves your inventory for a player");
	}
	if(perm.has(player, "inv.loadFrom")) {
		msg.text(player, "§6 - loadFrom <player> <world> §rLoads a player's inventory for you");
	}
	goto("wait");
}
arg0 = text.toLowerCase(list.getIndex(args, 0));
if(arg0 == "ignore") {
	if(!perm.has(player, "inv.ignore")) {
		perm.no(player, "inv.ignore");
		goto("wait");
	}
	ignore = player.hasInvIgnore(player);
	if(ignore == null) {
		ignore = false;
	}
	if(ignore) {
		msg.prefix(player, prefix_commands, "Your inventory will change on joining another world.");
	} else {
		msg.prefix(player, prefix_commands, "You'll keep your inventory on joining another world.");
	}
	player.invIgnore(player, !ignore);
	goto("wait");
}
if(arg0 == "see") {
	if(!perm.has(player, "inv.see")) {
		perm.no(player, "inv.see");
		goto("wait");
	}
	if(size < 2) {
		msg.prefix(player, prefix_commands, "/inv see <player>");
		goto("wait");
	}
	p_name = list.getIndex(args, 1);
	p_uuid = player.getUuid(p_name);
	if(p_uuid == null) {
		msg.prefix(player, prefix_commands, "This player has never been online.");
		goto("wait");
	}
	p = read.player(p_name);
	if(p == null) {
		msg.prefix(player, prefix_commands, "This player is not online.");
		goto("wait");
	}
	inv.show(p, player);
	goto("wait");
}
if(arg0 == "reload") {
	if(!perm.has(player, "inv.reload")) {
		perm.no(player, "inv.reload");
		goto("wait");
	}
	if(size < 2) {
		msg.prefix(player, prefix_commands, "/inv reload <player>");
		goto("wait");
	}
	p_name = list.getIndex(args, 1);
	p_uuid = player.getUuid(p_name);
	if(p_uuid == null) {
		msg.prefix(player, prefix_commands, "This player has never been online.");
		goto("wait");
	}
	p = read.player(p_name);
	if(p == null) {
		msg.prefix(player, prefix_commands, "This player is not online.");
		goto("wait");
	}
	world = loc.getWorld(entity.getLocation(p));
	inv.loadFromPlayer(p, p, world);
	msg.prefix(player, prefix_commands, "Inventory reloaded.");
	goto("wait");
}
if(arg0 == "savefor") {
	if(size != 1 && size != 3) {
		msg.prefix(player, prefix_commands, "/inv saveFor <player> <world>");
		goto("wait");
	}
	if(size == 1) {
		for_player_or_id = player.getId(player);
		world = loc.getWorld(entity.getLocation(player));
	}
	if(size == 3) {
		if(!perm.has(player, "inv.saveFor")) {
			perm.no(player, "inv.saveFor");
			goto("wait");
		}
		p_name = list.getIndex(args, 1);
		p_uuid = player.getUuid(p_name);
		if(p_uuid == null) {
			msg.prefix(player, prefix_commands, "This player has never been online.");
			goto("wait");
		}
		p = read.player(p_name);
		if(p != null) {
			msg.prefix(player, prefix_commands, "This player is online. Use /invsee");
			goto("wait");
		}
		for_player_or_id = player.getId(p_uuid);
		world_name = list.getIndex(args, 2);
		world = world.get(world_name);
		if(world == null) {
			msg.prefix(player, prefix_world, "This world is not loaded.");
			goto("wait");
		}
	}
	inv.saveForPlayer(player, for_player_or_id, world);
	msg.prefix(player, prefix_commands, "Inventory saved.");
	goto("wait");
}
if(arg0 == "loadfrom") {
	if(size != 1 && size != 3) {
		msg.prefix(player, prefix_commands, "/inv loadFrom <player> <world>");
		goto("wait");
	}
	if(size == 1) {
		from_player_or_id = player.getId(player);
		world = loc.getWorld(entity.getLocation(player));
	}
	if(size == 3) {
		if(!perm.has(player, "inv.loadFrom")) {
			perm.no(player, "inv.loadFrom");
			goto("wait");
		}
		p_name = list.getIndex(args, 1);
		p_uuid = player.getUuid(p_name);
		if(p_uuid == null) {
			msg.prefix(player, prefix_commands, "This player has never been online.");
			goto("wait");
		}
		p = read.player(p_name);
		if(p != null) {
			msg.prefix(player, prefix_commands, "§cThis player is online. Loaded inventory can differ from /inv see!");
		}
		from_player_or_id = player.getId(p_uuid);
		world_name = list.getIndex(args, 2);
		world = world.get(world_name);
		if(world == null) {
			msg.prefix(player, prefix_world, "This world is not loaded.");
			goto("wait");
		}
	}
	inv.loadFromPlayer(player, from_player_or_id, world);
	msg.prefix(player, prefix_commands, "Inventory loaded.");
	goto("wait");
}
goto("wait");

@boost
entity.throw(player, 0, 5, 0);
goto("wait");

@memory
msg.prefix(player, prefix_commands, concat("Used RAM: ", text.number(usedMemory()), " / ", text.number(math.round(allocatedMemory())), " MB"));
goto("wait");

@world
if(size == 0) {
	@world_syntax
	msg.prefix(player, prefix_world, "/world ...");
	msg.text(player, "§b - info §rShows info about a world");
	msg.text(player, "§b - tp <world> [player] §rTeleports a player to a world");
	msg.text(player, "§b - list §rShows all loaded worlds");
	msg.text(player, "§b - setspawn §rSets the world's spawn");
	msg.text(player, "§b - diffi <world> <diffi> §rSets the world's difficulty");
	goto("wait");
}
arg0 = text.toLowerCase(list.getIndex(args, 0));
if(arg0 == "info") {
	msg.text(player, getSpacer());
	world = loc.getWorld(entity.getLocation(player));
	msg.text(player, "§6World: §r", world.getName(world));
	msg.text(player, "§6Rain: §r", world.hasStorm(world));
	time = world.getTime(world);
	while(time >= 24000) {
		time -= 24000;
	}
	msg.text(player, "§6Time: §r", text.number(time));
	goto("wait");
}
if(arg0 == "tp") {
	if(size < 2 || size > 3) {
		msg.prefix(player, prefix_world, "/world tp <world> [player]");
		goto("wait");
	}
	if(size >= 2) {
		world_name = text.toLowerCase(list.getIndex(args, 1));
		world = world.get(world_name);
		if(world == null) {
			msg.prefix(player, prefix_world, "This world is not loaded.");
			goto("wait");
		}
	}
	if(size == 3) {
		affectedname = list.getIndex(args, 2);
		affectedplayer = read.player(affectedname);
		if(affectedplayer == null) {
			msg.prefix(player, prefix_world, "This player is not online.");
			goto("wait");
		}
	}
	if(!player.canTeleport(affectedplayer)) {
		if(size == 3) {
			msg.prefix(player, prefix_commands, "This player can't be teleported now.");
			goto("wait");
		}
		msg.prefix(player, prefix_commands, "You can't teleport now.");
		goto("wait");
	}
	if(player != affectedplayer) {
		affectedname = player.getName(affectedplayer);
		msg.prefix(player, prefix_world, concat(affectedname, " was teleported to the spawn of the world ", world_name, "."));
	}
	if(world_name == "games") {
		loc = world.getGamesSpawn();
	} elseif(world_name == "creative") {
		loc = world.getCreativeSpawn();
	} elseif(world_name == "story") {
		loc = world.getStorySpawn();
	} else {
		loc = world.getSpawn(world);
	}
	player.teleport(affectedplayer, loc, true);
	goto("wait");
}
if(arg0 == "list") {
	msg.prefix(player, prefix_world, "Loaded worlds:");
	worldlist = world.getAll();
	for(i = 0; i < list.getSize(worldlist); i++) {
		msg.text(player, " - ", world.getName(list.getIndex(worldlist, i)));
	}
	msg.text(player, getSpacer());
	goto("wait");
}
if(arg0 == "setspawn") {
	location = entity.getLocation(player);
	world.setSpawn(location, 0);
	msg.prefix(player, prefix_world, concat("New spawn of the world ", world.getName(loc.getWorld(location)), " set."));
	goto("wait");
}
if(arg0 == "diffi") {
	if(size != 3) {
		msg.prefix(player, prefix_world, "/world diffi <world> <diffi>");
		goto("wait");
	}
	worldname = list.getIndex(args, 1);
	world = world.get(worldname);
	if(world == null) {
		msg.prefix(player, prefix_world, "This world is not loaded.");
		goto("wait");
	}
	diffi_string = list.getIndex(args, 2);
	if(diffi_string != "PEACEFUL" || diffi_string != "EASY" || diffi_string != "NORMAL" || diffi_string != "HARD") {
		msg.prefix(player, prefix_world, "False input.");
		goto("wait");
	}
	world.setDiffi(world, diffi_string);
	msg.prefix(player, prefix_world, "Difficulty changed.");
	goto("wait");
}
goto("world_syntax");

@yeet
if(size == 0){
	msg.prefix(player, prefix_commands, "/yeet <strength>");
	goto("wait");
}
yeet_strength = list.getIndex(args, 0);
yeet(player,math.abs(yeet_strength));
msg.text(player, "§4YEET");
goto("wait");

@giveup
script_id = quest.getFromPlayer(player);
if(script_id == null) {
	msg.prefix(player, prefix_quest, "You are not in a quest.");
	goto("wait");
}
script = script.getFromId(script_id);
if(script == null) {
	snuvi.debug("Player used giveup on corrupt quest");
	quest.removePlayer(player); //in case of corrupt quest
	msg.prefix(player, prefix_quest, "You have no quest.");
	goto("wait");
}
setScriptVar("player", player);
modTimer.scriptCallEvent("quest_term", script);
quest.term(script, player);
msg.prefix(player, prefix_quest, "Quest termed.");
goto("wait");

@leave
set = player.getMinigameIds(player);
iter = set.iterator(set);
if(hasNext(iter)) {
	script_id = next(iter);
	script = script.getFromId(script_id);
	if(script == null) {
		snuvi.debug(concat("Player left game without existing gamescript ", set));
		msg.prefix(player, prefix_commands, "An error occured and some displays may not have been reset. So please panic and call for an admin! No, please don't do that.");
		player.resetMinigames(player);
		entity.teleport(player, gamesspawn);
		goto("wait");
	}
	minigame.hub(script, player);
	goto("wait");
}
msg.prefix(player, "§dScript", "You are not in a minigame.");
goto("wait");

function minigame.hub(script, player) {
	script.setVar(script, "player", player);
	modTimer.scriptCallEvent("player_giveup", script);
}

@jail
if(size != 1) {
	msg.prefix(player, prefix_commands, "/jail <player>");
} else {
	p_name = list.getIndex(args, 0);
	if(!checkIfEverOnline(p_name)) {
		msg.prefix(player, prefix_jail, "This player has never been online.");
		goto("wait");
	}
	p_uuid = player.getUuid(p_name);
	if(isJailed(p_uuid)) {
		msg.prefix(player, prefix_jail, "This player is already jailed.");
		goto("wait");
	}
	if(player_name == p_name) {
		msg.prefix(player, prefix_jail, "Self-Jailing isn't a good idea.");
		goto("wait");
	}
	if(!isOnline(p_name)) {
		msg.prefix(player, prefix_jail, "This player is not online.");
		goto("wait");
	}
	p = read.player(p_name);
	if(perm.has(p, "jail")) {
		msg.prefix(player, prefix_jail, "You can't jail this player.");
		goto("wait");
	}
	list.add(jailed_list, p_uuid);
	msg.prefix(player, prefix_jail, concat(p_name, " wurde gejailt"));
	showJail(p_name);
	if(!jail_loop_active) {
		sgoto(5, "jailloop");
	}
}
goto("wait");

@unjail
if(size != 1) {
	msg.prefix(player, prefix_commands, "/unjail <player>");
} else {
	p_name = list.getIndex(args, 0);
	if(!checkIfEverOnline(p_name)) {
		msg.prefix(player, prefix_jail, "This player has never been online.");
		goto("wait");
	}
	p_uuid = player.getUuid(p_name);
	if(!isJailed(p_uuid)) {
		msg.prefix(player, prefix_jail, "This player is not jailed.");
		goto("wait");
	}
	list.remove(jailed_list, p_uuid);
	msg.prefix(player, prefix_jail, "You freed this player from jail.");
}
goto("wait");

function inv.show(from_player, to_player) {
	player_inv = player.getInv(from_player);
	//inv = inv.new("333303000 333333333 333333333 333333333 000000000 333333333");
	inv = inv.new("333303000333333333333333333333333333000000000333333333");
	set.add($invseeids, inv.getId(inv));
	inv.setItem(inv, 0, living.getEquip(from_player, "head"));
	inv.setItem(inv, 1, living.getEquip(from_player, "chest"));
	inv.setItem(inv, 2, living.getEquip(from_player, "legs"));
	inv.setItem(inv, 3, living.getEquip(from_player, "feet"));
	inv.setItem(inv, 4, living.getEquip(from_player, "offhand"));
	for(slot = 0; slot <= 8; slot++) {
		inv.setItem(inv, slot + 32, inv.getItem(player_inv, slot));
	}
	for(slot = 0; slot <= 26; slot++) {
		inv.setItem(inv, slot + 5, inv.getItem(player_inv, slot + 9));
	}
	inv.open(inv, to_player, concat("Inventory of ", player.getName(from_player)));
}

function isAWallSign(location) {
	return block.hasTag($wall_signs_tag, block.get(location));
}

function rank.add(index, tech_rank, chat_rank) {
	$rank_array[index, 0] = tech_rank;
	$rank_array[index, 1] = chat_rank;
}

//--------------------------------------------------
//Tip-Utils
//--------------------------------------------------

function tip.setLoop(tipp_key, boolean) {
	stmt = databank.prepare("UPDATE tipps SET tipp_loop = ? WHERE tipp_key = ?;");
	databank.setBool(stmt, 1, boolean);
	databank.setString(stmt, 2, tipp_key);
	databank.workerExecute(stmt);
}

function tip.remove(tipp_key) {
	stmt = databank.prepare("DELETE FROM tipps WHERE tipp_key = ?;");
	databank.setString(stmt, 1, tipp_key);
	databank.workerExecute(stmt);
}

function tip.getAll() {
	list = list.new();
	smt = databank.prepare("SELECT * FROM tipps;");
	result = databank.execute(smt);
	while(databank.next(result)) {
		a = array.new(3);
		a[0] = databank.getString(result, 1);
		a[1] = databank.getString(result, 2);
		a[2] = databank.getBool(result, 3);
		list.add(list, a);
	}
	databank.close(smt);
	databank.close(result);
	return list;
}

//--------------------------------------------------
//Databank-Utils
//--------------------------------------------------

function databank.isExistingTable(table) {
	temp = false;
	stmt = databank.prepare("SHOW TABLES");
	result = databank.execute(stmt);
	while(databank.next(result)) {
		if(table == databank.getString(result, 1)) {
			temp = true;
			break;
		}
	}
	databank.close(result);
	databank.close(stmt);
	return temp;
}

function databank.getTableFields(table) {
	fields = list.new();
	stmt = databank.prepare(concat("SHOW FIELDS FROM ", table));
	result = databank.execute(stmt);
	while(databank.next(result)) {
		list.add(fields, databank.getString(result, 1));
	}
	databank.close(result);
	databank.close(stmt);
	return fields;
}

function databank.getTableDatatypes(table) {
	stmt = databank.prepare(concat("SHOW CREATE TABLE ", table));
	result = databank.execute(stmt);
	if(databank.next(result)) {
		temp = databank.getString(result, 2);
	}
	databank.close(result);
	databank.close(stmt);
	return temp;
}

//--------------------------------------------------
//Tipp-Utils
//--------------------------------------------------

function tipp.register(tipp_key, tipp_value) {
	stmt = databank.prepare("INSERT INTO tipps (tipp_key, tipp_value) VALUES (?,?) ON DUPLICATE KEY UPDATE tipp_value = ?");
	databank.setString(stmt, 1, tipp_key);
	databank.setString(stmt, 2, tipp_value);
	databank.setString(stmt, 3, tipp_value);
	databank.workerExecute(stmt);
}

function tipp.get(tipp_key) {
	tipp_value = null;
	stmt = databank.prepare("SELECT tipp_value FROM tipps WHERE tipp_key = ?;");
	databank.setString(stmt, 1, tipp_key);
	result = databank.execute(stmt);
	while(databank.next(result)) {
		tipp_value = databank.getString(result, 1);
	}
	databank.close(result);
	databank.close(stmt);
	return tipp_value;
}

//--------------------------------------------------
//Warp-Utils
//--------------------------------------------------

function warp.create(warp_group, warp_name, location) {
	config = config.new(concat("scripts/configs/warps/", warp_group), warp_name);
	config.set(config, "world", world.getName(loc.getWorld(location)));
	config.set(config, "x", loc.getX(location));
	config.set(config, "y", loc.getY(location));
	config.set(config, "z", loc.getZ(location));
	config.set(config, "yaw", loc.getYaw(location));
	config.set(config, "pitch", loc.getPitch(location));
	config.saveAsync(config);
}

function warp.exists(warp_group, warp_name) {
	config = config.new(concat("scripts/configs/warps/", warp_group), warp_name);
	return config.exists(config);
}

function warp.getGroups() {
	file = file.new("scripts/configs/warps");
	file_list = file.getList(file);
	groups_list = list.new();
	iter = list.iterator(file_list);
	while(hasNext(iter)) {
		warp = file.getName(next(iter));
		list.add(groups_list, warp);
	}
	return groups_list;
}

function warp.get(warp_group, warp_name) {
	config = config.new(concat("scripts/configs/warps/", warp_group), warp_name);
	if(config.exists(config)) {
		config.load(config);
	}
	world_name = text.convert(config.getString(config, "world", "null"));
	if(world_name == null) {
		return null;
	}
	world = world.get(world_name);
	x = config.getDouble(config, "x", 0);
	y = config.getDouble(config, "y", 100);
	z = config.getDouble(config, "z", 0);
	yaw = config.getDouble(config, "yaw", 0);
	pitch = config.getDouble(config, "pitch", 0);
	location = loc.new(world, x, y, z, yaw, pitch);
	return location;
}

function warp.delete(warp_group, warp_name) {
	config = config.new(concat("scripts/configs/warps/", warp_group), warp_name);
	if(!config.exists(config)) {
		return false;
	}
	config.delete(config);
	return true;
}

function warp.getList(warp_group) {
	file = file.new(concat("scripts/configs/warps/", warp_group));
	warps_list = list.new();
	if(file.exists(file)) {
		file_list = file.getList(file);
		iter = list.iterator(file_list);
		while(hasNext(iter)) {
			warp = file.getName(next(iter));
			warp = text.replace(warp, ".snuvic", "");
			list.add(warps_list, warp);
		}
	}
	return warps_list;
}

//--------------------------------------------------
//Home-Utils
//--------------------------------------------------

function home.set(player_id, home_name, location) {
	stmt = databank.prepare("INSERT INTO homes (player_id, name, world_name, x, y, z, yaw, pitch) VALUES (?,?,?,?,?,?,?,?);");
	databank.setInt(stmt, 1, player_id);
	databank.setString(stmt, 2, home_name);
	databank.setString(stmt, 3, world.getName(loc.getWorld(location)));
	databank.setInt(stmt, 4, loc.getX(location));
	databank.setInt(stmt, 5, loc.getY(location));
	databank.setInt(stmt, 6, loc.getZ(location));
	databank.setInt(stmt, 7, loc.getYaw(location));
	databank.setInt(stmt, 8, loc.getPitch(location));
	databank.workerExecute(stmt);
}

function home.delete(player_id, home_name) {
	stmt = databank.prepare("DELETE FROM homes WHERE player_id = ? AND name = ?;");
	databank.setInt(stmt, 1, player_id);
	databank.setString(stmt, 2, home_name);
	databank.workerExecute(stmt);
}

function home.getLocation(player_id, home_name) {
	stmt = databank.prepare("SELECT world_name, x, y, z, yaw, pitch FROM homes WHERE player_id = ? AND name = ?;");
	databank.setInt(stmt, 1, player_id);
	databank.setString(stmt, 2, home_name);
	result = databank.execute(stmt);
	if(databank.next(result)) {
		world = world.get(databank.getString(result, 1));
		if(world == null) {
			return null;
		}
		x = databank.getDouble(result, 2);
		y = databank.getDouble(result, 3);
		z = databank.getDouble(result, 4);
		yaw = databank.getDouble(result, 5);
		pitch = databank.getDouble(result, 6);
		location = loc.new(world, x, y, z, yaw, pitch);
	}
	databank.close(result);
	databank.close(stmt);
	return location;
}

function home.exists(player_id, home_name) {
	stmt = databank.prepare("SELECT player_id FROM homes WHERE player_id = ? AND name = ?;");
	databank.setInt(stmt, 1, player_id);
	databank.setString(stmt, 2, home_name);
	result = databank.execute(stmt);
	if(databank.next(result)) {
		temp = true;
	} else {
		temp = false;
	}
	databank.close(result);
	databank.close(stmt);
	return temp;
}

function home.getList(player_id) {
	homes_list = list.new();
	stmt = databank.prepare("SELECT name FROM homes WHERE player_id = ?;");
	databank.setInt(stmt, 1, player_id);
	result = databank.execute(stmt);
	while(databank.next(result)) {
		list.add(homes_list, databank.getString(result, 1));
	}
	databank.close(result);
	databank.close(stmt);
	return homes_list;
}

function hasTpaRequest(player_uuid, aim_uuid) {
	for(i = 0; i < list.getSize($tpa_request); i++) {
		array = list.getIndex($tpa_request, i);
		if(array[0] == player_uuid && array[1] == aim_uuid) {
			list.removeIndex($tpa_request, i);
			return true;
		}
	}
	return false;
}

function addTpaRequest(player_uuid, aim_uuid) {
	array = array.new(2);
	array[0] = player_uuid;
	array[1] = aim_uuid;
	list.add($tpa_request, array);
}

function setCommandHelps() {
	command.clearHelp();
	command.clearIgnored();
	//Vanilla ignorieren, danach neu setzen
	command.addIgnored("teleport");
	command.addIgnored("time");
	command.addIgnored("help");
	command.addIgnored("ban");
	command.addIgnored("kick");
	command.addIgnored("gamemode");
	command.addIgnored("enchant");
	command.addIgnored("jumpto");
	
	commandhelp.add("silentjoin");
	commandhelp.add("nowb");
	commandhelp.add("coords");
	commandhelp.add("ping");
	commandhelp.add("rank");
	commandhelp.add("back");
	commandhelp.add("boost");
	commandhelp.add("bug");
	commandhelp.add("report");
	commandhelp.add("startgame");
	commandhelp.add("top");
	commandhelp.add("ride");
	commandhelp.add("repair");
	commandhelp.add("lag");
	commandhelp.add("live");
	commandhelp.add("hack");
	commandhelp.add("vote");
	commandhelp.add("voteshop");
	
	commandhelp.addChildPlayer("mute");
	commandhelp.addChildPlayer("unmute");
	commandhelp.addChildPlayer("tpa");
	commandhelp.addChildPlayer("tpaccept");
	commandhelp.addChildPlayer("tpahere");
	commandhelp.addChildPlayer("tpaccepthere");
	commandhelp.addChildPlayer("head");
	commandhelp.addChildPlayer("seen");
	commandhelp.addChildPlayer("heal");
	commandhelp.addChildPlayer("feed");
	
	help = commandhelp.add("lightning");
	commandhelp.addAlias(help, "thor", "lightning");
	help = commandhelp.add("color");
	commandhelp.addAlias(help, "colour", "color");
	help = commandhelp.add("iteminfo");
	commandhelp.addAlias(help, "itemdb", "iteminfo");
	help = commandhelp.add("head");
	commandhelp.addAlias(help, "skull", "head");
	help = commandhelp.add("memory");
	commandhelp.addAlias(help, "ram", "memory");
	help = commandhelp.add("afk");
	commandhelp.addAlias(help, "afklo", "afk");
	help = commandhelp.add("jumpto");
	commandhelp.addAlias(help, "j", "jumpto");
	
	help = commandhelp.add("leave");
	commandhelp.addAlias(help, "l", "leave");
	commandhelp.addAlias(help, "hub", "leave");
	
	help = commandhelp.add("giveup");
	commandhelp.addAlias(help, "fuckit", "giveup");
	
	help = command.newHelp("vanish", "vanish");
	//vanish [on] [player]
	helpArg0 = command.newHelpLiteral("on");
	command.addHelpChild(helpArg0, command.newHelpSpecial("Player", "player"));
	command.addHelpChild(help, helpArg0);
	//vanish [off] [player]
	helpArg0 = command.newHelpLiteral("off");
	command.addHelpChild(helpArg0, command.newHelpSpecial("Player", "player"));
	command.addHelpChild(help, helpArg0);
	command.addHelp(help);
	commandhelp.addAlias(help, "v", "vanish");
	
	help = command.newHelp("start", "start");
	command.addHelpChild(help, command.newHelpLiteral("ai"));
	command.addHelpChild(help, command.newHelpLiteral("chat"));
	command.addHelpChild(help, command.newHelpLiteral("commands"));
	command.addHelpChild(help, command.newHelpLiteral("creative"));
	command.addHelpChild(help, command.newHelpLiteral("damage"));
	command.addHelpChild(help, command.newHelpLiteral("doors"));
	command.addHelpChild(help, command.newHelpLiteral("fixitems"));
	command.addHelpChild(help, command.newHelpLiteral("gemstones"));
	command.addHelpChild(help, command.newHelpLiteral("harvest"));
	command.addHelpChild(help, command.newHelpLiteral("hawkeye"));
	command.addHelpChild(help, command.newHelpLiteral("herobrine"));
	command.addHelpChild(help, command.newHelpLiteral("lectern"));
	command.addHelpChild(help, command.newHelpLiteral("loom"));
	command.addHelpChild(help, command.newHelpLiteral("games"));
	command.addHelpChild(help, command.newHelpLiteral("mails"));
	command.addHelpChild(help, command.newHelpLiteral("mobarena"));
	command.addHelpChild(help, command.newHelpLiteral("perms"));
	command.addHelpChild(help, command.newHelpLiteral("playerdata"));
	command.addHelpChild(help, command.newHelpLiteral("pumpkin"));
	command.addHelpChild(help, command.newHelpLiteral("recipes"));
	command.addHelpChild(help, command.newHelpLiteral("scheduler"));
	command.addHelpChild(help, command.newHelpLiteral("shop"));
	command.addHelpChild(help, command.newHelpLiteral("sitting"));
	command.addHelpChild(help, command.newHelpLiteral("stats"));
	command.addHelpChild(help, command.newHelpLiteral("story"));
	command.addHelpChild(help, command.newHelpLiteral("survival"));
	command.addHelpChild(help, command.newHelpLiteral("ticket"));
	command.addHelpChild(help, command.newHelpLiteral("timber"));
	command.addHelpChild(help, command.newHelpLiteral("trader"));
	command.addHelpChild(help, command.newHelpLiteral("voxel"));
	command.addHelp(help);

	help = command.newHelp("gamemode", "gamemode");
	helpArg0 = command.newHelpLiteral("adventure");
	command.addHelpChild(helpArg0, command.newHelpSpecial("Player", "player", "gamemode.other"));
	command.addHelpChild(help, helpArg0);
	helpArg0 = command.newHelpLiteral("creative");
	command.addHelpChild(helpArg0, command.newHelpSpecial("Player", "player", "gamemode.other"));
	command.addHelpChild(help, helpArg0);
	helpArg0 = command.newHelpLiteral("spectator");
	command.addHelpChild(helpArg0, command.newHelpSpecial("Player", "player", "gamemode.other"));
	command.addHelpChild(help, helpArg0);
	helpArg0 = command.newHelpLiteral("survival");
	command.addHelpChild(helpArg0, command.newHelpSpecial("Player", "player", "gamemode.other"));
	command.addHelpChild(help, helpArg0);
	helpArg0 = command.newHelpInt("0-3", 0, 3);
	command.addHelpChild(helpArg0, command.newHelpSpecial("Player", "player", "gamemode.other"));
	command.addHelpChild(help, helpArg0);
	command.addHelp(help);
	commandhelp.addAlias(help, "gm", "gamemode");
	
	help = command.newHelp("databank", "databank");
	//databank showtables
	command.addHelpChild(help, command.newHelpLiteral("showtables"));
	//databank showfields <table>
	helpArg0 = command.newHelpLiteral("showfields");
	command.addHelpChild(helpArg0, command.newHelpString("table", false));
	command.addHelpChild(help, helpArg0);
	//databank showdataypes <table>
	helpArg0 = command.newHelpLiteral("showdataypes");
	command.addHelpChild(helpArg0, command.newHelpString("table", false));
	command.addHelpChild(help, helpArg0);
	command.addHelp(help);
	
	help = command.newHelp("copyisland", "copyisland");
	//copyisland copy/paste
	command.addHelpChild(help, command.newHelpLiteral("copy"));
	command.addHelpChild(help, command.newHelpLiteral("paste"));
	//copyisland pos1/pos2
	command.addHelpChild(help, command.newHelpLiteral("pos1"));
	command.addHelpChild(help, command.newHelpLiteral("pos2"));
	command.addHelp(help);
	
	help = command.newHelp("fly", "fly");
	helpArg0 = command.newHelpSpecial("Player", "player", "fly.other");
	command.addHelpChild(helpArg0, command.newHelpLiteral("on"));
	command.addHelpChild(helpArg0, command.newHelpLiteral("off"));
	command.addHelpChild(help, helpArg0);
	command.addHelp(help);
	
	help = command.newHelp("enchant", "enchant");
	helpArg0 = command.newHelpSpecial("Enchantment", "enchantment");
	command.addHelpChild(helpArg0, command.newHelpInt("level", 0, 100));
	command.addHelpChild(help, helpArg0);
	command.addHelp(help);
	
	help = command.newHelp("allsounds", "allsounds");
	command.addHelpChild(help, command.newHelpLiteral("start"));
	command.addHelpChild(help, command.newHelpLiteral("stop"));
	command.addHelp(help);
	
	help = command.newHelp("spawn", "spawn");
	command.addHelpChild(help, command.newHelpSpecial("Player", "player", "teleport.other"));
	command.addHelp(help);
	
	help = command.newHelp("games", "games");
	command.addHelpChild(help, command.newHelpSpecial("Player", "player", "teleport.other"));
	command.addHelp(help);
	
	help = command.newHelp("creative", "creative");
	command.addHelpChild(help, command.newHelpSpecial("Player", "player", "teleport.other"));
	command.addHelp(help);
	
	help = command.newHelp("story", "story");
	command.addHelpChild(help, command.newHelpSpecial("Player", "player", "teleport.other"));
	command.addHelp(help);
	
	help = command.newHelp("ass", "ass");
	//ass set <name>
	helpArg0 = command.newHelpLiteral("set");
	command.addHelpChild(helpArg0, command.newHelpString("name", true));
	command.addHelpChild(help, helpArg0);
	//ass rename <name>
	helpArg0 = command.newHelpLiteral("rename");
	command.addHelpChild(helpArg0, command.newHelpString("name", true));
	command.addHelpChild(help, helpArg0);
	//ass remove <radius>
	helpArg0 = command.newHelpLiteral("remove");
	command.addHelpChild(helpArg0, command.newHelpInt("radius", 0, 30));
	command.addHelpChild(help, helpArg0);
	command.addHelp(help);
	
	help = command.newHelp("tppos", "tppos");
	helpArg0 = command.newHelpInt("x", -32000, 32000);
	helpArg1 = command.newHelpInt("y", 0, 1000);
	helpArg2 = command.newHelpInt("z", -32000, 32000);
	helpArg3 = command.newHelpString("world", false);
	helpArg4 = command.newHelpSpecial("Player", "player");
	command.addHelpChild(helpArg3, helpArg4);
	command.addHelpChild(helpArg2, helpArg3);
	command.addHelpChild(helpArg1, helpArg2);
	command.addHelpChild(helpArg0, helpArg1);
	command.addHelpChild(help, helpArg0);
	command.addHelp(help);
	
	help = command.newHelp("stats", "stats");
	addStatsGameHelp(help, "AmongUs");
	addStatsGameHelp(help, "BedWars");
	addStatsGameHelp(help, "RageMode");
	addStatsGameHelp(help, "JR-Endless");
	addStatsGameHelp(help, "Rebuild");
	addStatsGameHelp(help, "FastBridge");
	addStatsGameHelp(help, "Snowfight");
	addStatsGameHelp(help, "JR-Death");
	addStatsGameHelp(help, "JR-Ice");
	addStatsGameHelp(help, "JR-Rooms");
	addStatsGameHelp(help, "Letters");
	addStatsGameHelp(help, "Sammelfieber");
	addStatsGameHelp(help, "Buttons");
	addStatsGameHelp(help, "HideAndSeek");
	addStatsGameHelp(help, "Inverting");
	addStatsGameHelp(help, "Spleef");
	addStatsGameHelp(help, "Knockfight");
	addStatsGameHelp(help, "Leapfrog");
	addStatsGameHelp(help, "Parcour");
	addStatsGameHelp(help, "Halma");
	addStatsGameHelp(help, "ShoppingChaos");
	addStatsGameHelp(help, "MengerRun");
	command.addHelp(help);
	
	help = command.newHelp("setspawn", "setspawn");
	command.addHelpChild(help, command.newHelpLiteral("server"));
	command.addHelpChild(help, command.newHelpLiteral("games"));
	command.addHelpChild(help, command.newHelpLiteral("creative"));
	command.addHelpChild(help, command.newHelpLiteral("story"));
	command.addHelp(help);
	
	help = command.newHelp("datatools", "datatools");
	//datatools hide <name>
	helpArg0 = command.newHelpLiteral("hide");
	command.addHelpChild(helpArg0, command.newHelpLiteral("enchantments"));
	command.addHelpChild(helpArg0, command.newHelpLiteral("attributes"));
	command.addHelpChild(helpArg0, command.newHelpLiteral("unbreakable"));
	command.addHelpChild(helpArg0, command.newHelpLiteral("destroys"));
	command.addHelpChild(helpArg0, command.newHelpLiteral("placed_on"));
	command.addHelpChild(helpArg0, command.newHelpLiteral("potion_effects"));
	command.addHelpChild(help, helpArg0);
	//datatools attribute <attribute> <slot> <double> <op>
	helpArg0 = command.newHelpLiteral("attribute");
	command.addHelpChild(helpArg0, addDtAttributeAttributHelp("armor"));
	command.addHelpChild(helpArg0, addDtAttributeAttributHelp("armor_toughness"));
	command.addHelpChild(helpArg0, addDtAttributeAttributHelp("attack_damage"));
	command.addHelpChild(helpArg0, addDtAttributeAttributHelp("knockback_resistance"));
	command.addHelpChild(helpArg0, addDtAttributeAttributHelp("max_health"));
	command.addHelpChild(helpArg0, addDtAttributeAttributHelp("movement_speed"));
	command.addHelpChild(helpArg0, addDtAttributeAttributHelp("attack_speed"));
	command.addHelpChild(helpArg0, addDtAttributeAttributHelp("luck"));
	command.addHelpChild(help, helpArg0);
	//datatools hide-entity
	command.addHelpChild(help, command.newHelpLiteral("hide-entity"));
	//datatools show-entity
	command.addHelpChild(help, command.newHelpLiteral("show-entity"));
	//datatools name-entity <name>
	helpArg0 = command.newHelpLiteral("name-entity");
	helpArg1 = command.newHelpString("name", true);
	command.addHelpChild(helpArg0, helpArg1);
	command.addHelpChild(help, helpArg0);
	//datatools name-visibility <name>
	helpArg0 = command.newHelpLiteral("name-visibility");
	command.addHelpChild(helpArg0, command.newHelpBool("wusi"));
	command.addHelpChild(help, helpArg0);
	//datatools name-item <name>
	helpArg0 = command.newHelpLiteral("name-item");
	helpArg1 = command.newHelpString("name", true);
	command.addHelpChild(helpArg0, helpArg1);
	command.addHelpChild(help, helpArg0);
	//datatools print-entity
	command.addHelpChild(help, command.newHelpLiteral("print-entity"));
	//datatools lore-item <line> <lore>
	helpArg0 = command.newHelpLiteral("lore-item");
	helpArg1 = command.newHelpInt("line", 0, 1000);
	helpArg2 = command.newHelpString("lore", true);
	command.addHelpChild(helpArg1, helpArg2);
	command.addHelpChild(helpArg0, helpArg1);
	command.addHelpChild(help, helpArg0);
	command.addHelp(help);
	commandhelp.addAlias(help, "dt", "datatools");
	
	help = command.newHelp("hawkeye", "hawkeye");
	//hawkeye search <parameters>
	helpArg0 = command.newHelpLiteral("search");
	command.addHelpChild(helpArg0, command.newHelpString("name", true));
	command.addHelpChild(help, helpArg0);
	//hawkeye undo
	command.addHelpChild(help, command.newHelpLiteral("undo"));
	//hawkeye entries
	command.addHelpChild(help, command.newHelpLiteral("entries"));
	//hawkeye rollback
	command.addHelpChild(help, command.newHelpLiteral("rollback"));
	//hawkeye tool
	command.addHelpChild(help, command.newHelpLiteral("tool"));
	commandhelp.addAlias(help, "ha", "hawkeye");
	command.addHelp(help);
	
	help = command.newHelp("voxel", "voxel");
	command.addHelpChild(help, command.newHelpInt("radius", 1, 5));
	command.addHelpChild(help, command.newHelpLiteral("block"));
	command.addHelp(help);
	
	help = command.newHelp("help", "help");
	command.addHelpChild(help, command.newHelpInt("page", 1, 100));
	command.addHelp(help);
	commandhelp.addAlias(help, "mimimi", "help");
	
	help = command.newHelp("suicide", "suicide");
	command.addHelpChild(help, command.newHelpSpecial("Player", "player", "suicide.other"));
	command.addHelp(help);
	
	help = command.newHelp("tempfly", "tempfly");
	helpArg0 = command.newHelpSpecial("Player", "player");
	command.addHelpChild(helpArg0, command.newHelpInt("seconds", 1, 10000));
	command.addHelpChild(help, helpArg0);
	command.addHelp(help);
	
	help = command.newHelp("tempban", "tempban");
	helpArg0 = command.newHelpSpecial("Player", "player");
	helpArg1 = command.newHelpInt("days", 0, 100);
	helpArg2 = command.newHelpInt("hours", 0, 100);
	helpArg3 = command.newHelpInt("minutes", 0, 100);
	command.addHelpChild(helpArg3, command.newHelpString("reason", true));
	command.addHelpChild(helpArg2, helpArg3);
	command.addHelpChild(helpArg1, helpArg2);
	command.addHelpChild(helpArg0, helpArg1);
	command.addHelpChild(help, helpArg0);
	command.addHelp(help);
	
	help = command.newHelp("unban", "unban");
	command.addHelpChild(help, command.newHelpSpecial("Player", "player"));
	command.addHelp(help);
	commandhelp.addAlias(help, "pardon", "unban");
	
	help = command.newHelp("ban", "ban");
	helpArg0 = command.newHelpSpecial("Player", "player");
	command.addHelpChild(helpArg0, command.newHelpString("reason", true));
	command.addHelpChild(help, helpArg0);
	command.addHelp(help);
	
	help = command.newHelp("silentban", "silentban");
	helpArg0 = command.newHelpSpecial("Player", "player");
	command.addHelpChild(helpArg0, command.newHelpString("reason", true));
	command.addHelpChild(help, helpArg0);
	command.addHelp(help);
	
	help = command.newHelp("kick", "kick");
	helpArg0 = command.newHelpSpecial("Player", "player");
	command.addHelpChild(helpArg0, command.newHelpString("reason", true));
	command.addHelpChild(help, helpArg0);
	command.addHelp(help);
	
	help = command.newHelp("silentkick", "silentkick");
	helpArg0 = command.newHelpSpecial("Player", "player");
	command.addHelpChild(helpArg0, command.newHelpString("reason", true));
	command.addHelpChild(help, helpArg0);
	command.addHelp(help);
	
	help = command.newHelp("answer", "answer");
	command.addHelpChild(help, command.newHelpString("message", true));
	command.addHelp(help);
	commandhelp.addAlias(help, "r", "answer");
	
	help = command.newHelp("time", "time");
	//time set <time>
	helpArg0 = command.newHelpLiteral("set");
	command.addHelpChild(helpArg0, command.newHelpInt("time", 0, 100000));
	command.addHelpChild(help, helpArg0);
	//time add <time>
	helpArg0 = command.newHelpLiteral("add");
	command.addHelpChild(helpArg0, command.newHelpInt("time", 0, 100000));
	command.addHelpChild(help, helpArg0);
	//time day / noon / night / midnight
	command.addHelpChild(help, command.newHelpLiteral("day"));
	command.addHelpChild(help, command.newHelpLiteral("noon"));
	command.addHelpChild(help, command.newHelpLiteral("night"));
	command.addHelpChild(help, command.newHelpLiteral("midnight"));
	command.addHelp(help);
	
	help = command.newHelp("enderchest", "enderchest");
	//enderchest [player] <from-player>
	helpArg0 = command.newHelpSpecial("Player", "player");
	command.addHelpChild(helpArg0, command.newHelpString("from-player", false));
	command.addHelpChild(help, helpArg0);
	//enderchest [player] <from-player>
	command.addHelpChild(help, command.newHelpString("from-player", false));
	command.addHelp(help);
	
	help = command.newHelp("nickname", "nickname");
	command.addHelpChild(help, command.newHelpString("name", true));
	command.addHelpChild(help, command.newHelpLiteral("remove"));
	command.addHelp(help);
	
	help = command.newHelp("perm", "perm");
	//perm give <player> <perm>
	helpArg0 = command.newHelpLiteral("give", "perm.give");
	helpArg1 = command.newHelpSpecial("Player", "player");
	command.addHelpChild(helpArg1, command.newHelpLiteral("admin", "isAdmin"));
	command.addHelpChild(helpArg1, command.newHelpLiteral("mod", "isAdmin"));
	command.addHelpChild(helpArg1, command.newHelpLiteral("supporter"));
	command.addHelpChild(helpArg1, command.newHelpLiteral("builder"));
	command.addHelpChild(helpArg1, command.newHelpLiteral("worldedit"));
	command.addHelpChild(helpArg1, command.newHelpLiteral("teleport"));
	command.addHelpChild(helpArg1, command.newHelpLiteral("vip"));
	command.addHelpChild(helpArg1, command.newHelpLiteral("dev"));
	command.addHelpChild(helpArg1, command.newHelpLiteral("yt"));
	command.addHelpChild(helpArg1, command.newHelpLiteral("streamer"));
	command.addHelpChild(helpArg1, command.newHelpLiteral("sponsor"));
	command.addHelpChild(helpArg1, command.newHelpLiteral("bypass", "isAdmin"));
	command.addHelpChild(helpArg1, command.newHelpLiteral("creative"));
	command.addHelpChild(helpArg0, helpArg1);
	command.addHelpChild(help, helpArg0);
	//perm remove <player> <perm>
	helpArg0 = command.newHelpLiteral("remove", "perm.remove");
	helpArg1 = command.newHelpSpecial("Player", "player");
	command.addHelpChild(helpArg1, command.newHelpLiteral("admin", "isAdmin"));
	command.addHelpChild(helpArg1, command.newHelpLiteral("mod", "isAdmin"));
	command.addHelpChild(helpArg1, command.newHelpLiteral("supporter"));
	command.addHelpChild(helpArg1, command.newHelpLiteral("builder"));
	command.addHelpChild(helpArg1, command.newHelpLiteral("worldedit"));
	command.addHelpChild(helpArg1, command.newHelpLiteral("teleport"));
	command.addHelpChild(helpArg1, command.newHelpLiteral("vip"));
	command.addHelpChild(helpArg1, command.newHelpLiteral("dev"));
	command.addHelpChild(helpArg1, command.newHelpLiteral("yt"));
	command.addHelpChild(helpArg1, command.newHelpLiteral("streamer"));
	command.addHelpChild(helpArg1, command.newHelpLiteral("sponsor"));
	command.addHelpChild(helpArg1, command.newHelpLiteral("bypass", "isAdmin"));
	command.addHelpChild(helpArg1, command.newHelpLiteral("creative"));
	command.addHelpChild(helpArg0, helpArg1);
	command.addHelpChild(help, helpArg0);
	//perm removeall <player>
	helpArg0 = command.newHelpLiteral("removeall", "perm.removeall");
	command.addHelpChild(helpArg0, command.newHelpSpecial("Player", "player"));
	command.addHelpChild(help, helpArg0);
	//perm list <player>
	helpArg0 = command.newHelpLiteral("list", "perm.list");
	command.addHelpChild(helpArg0, command.newHelpSpecial("Player", "player"));
	command.addHelpChild(help, helpArg0);
	//perm toggle
	command.addHelpChild(help, command.newHelpLiteral("toggle", "perm.toggle"));
	command.addHelp(help);
	
	help = command.newHelp("script", "script");
	//script start <scripts>
	helpArg0 = command.newHelpLiteral("start");
	command.addHelpChild(helpArg0, command.newHelpString("scrips...", true));
	command.addHelpChild(help, helpArg0);
	//script see
	command.addHelpChild(help, command.newHelpLiteral("see"));
	//script term
	helpArg0 = command.newHelpLiteral("term");
	command.addHelpChild(helpArg0, command.newHelpLiteral("all"));
	command.addHelpChild(helpArg0, command.newHelpInt("id", 0, 1000000));
	command.addHelpChild(help, helpArg0);
	command.addHelp(help);
	commandhelp.addAlias(help, "s", "script");
	
	help = command.newHelp("home", "home");
	//home set
	helpArg0 = command.newHelpLiteral("set");
	command.addHelpChild(helpArg0, command.newHelpString("name", false));
	command.addHelpChild(help, helpArg0);
	//home delete
	helpArg0 = command.newHelpLiteral("delete");
	command.addHelpChild(helpArg0, command.newHelpString("name", false));
	command.addHelpChild(help, helpArg0);
	//home list
	helpArg0 = command.newHelpLiteral("list");
	command.addHelpChild(helpArg0, command.newHelpSpecial("Player", "player", "home.other"));
	command.addHelpChild(help, helpArg0);
	//home <name>
	helpArg0 = command.newHelpString("name", false);
	command.addHelpChild(helpArg0, command.newHelpSpecial("Player", "player", "home.other"));
	command.addHelpChild(help, helpArg0);
	command.addHelp(help);
	
	help = command.newHelp("plot", "plot");
	//plot info
	command.addHelpChild(help, command.newHelpLiteral("info"));
	command.addHelpChild(help, command.newHelpLiteral("i"));
	//plot pos1/pos2
	command.addHelpChild(help, command.newHelpLiteral("pos1"));
	command.addHelpChild(help, command.newHelpLiteral("pos2"));
	//plot create/create3D
	command.addHelpChild(help, command.newHelpLiteral("create"));
	command.addHelpChild(help, command.newHelpLiteral("create3D"));
	//plot remove
	helpArg0 = command.newHelpLiteral("remove");
	command.addHelpChild(helpArg0, command.newHelpInt("id", 0, 10000));
	command.addHelpChild(help, helpArg0);
	//plot name <name>
	helpArg0 = command.newHelpLiteral("name");
	command.addHelpChild(helpArg0, command.newHelpString("name", true));
	helpArg1 = command.newHelpInt("id", 0, 10000);
	command.addHelpChild(helpArg1, command.newHelpString("name", true));
	command.addHelpChild(helpArg0, helpArg1);
	command.addHelpChild(help, helpArg0);
	//plot share <name>
	helpArg0 = command.newHelpLiteral("share");
	helpArg1 = command.newHelpSpecial("Player", "player");
	command.addHelpChild(helpArg1, command.newHelpInt("id", 0, 10000));
	command.addHelpChild(helpArg0, helpArg1);
	command.addHelpChild(help, helpArg0);
	//plot kick <name>
	helpArg0 = command.newHelpLiteral("kick");
	helpArg1 = command.newHelpSpecial("Player", "player");
	command.addHelpChild(helpArg1, command.newHelpInt("id", 0, 10000));
	command.addHelpChild(helpArg0, helpArg1);
	command.addHelpChild(help, helpArg0);
	//plot raise
	command.addHelpChild(help, command.newHelpLiteral("raise"));
	//plot leader <name>
	helpArg0 = command.newHelpLiteral("leader");
	helpArg1 = command.newHelpSpecial("Player", "player");
	command.addHelpChild(helpArg1, command.newHelpInt("id", 0, 10000));
	command.addHelpChild(helpArg0, helpArg1);
	command.addHelpChild(help, helpArg0);
	//plot mod <name>
	helpArg0 = command.newHelpLiteral("mod");
	helpArg1 = command.newHelpSpecial("Player", "player");
	command.addHelpChild(helpArg1, command.newHelpInt("id", 0, 10000));
	command.addHelpChild(helpArg0, helpArg1);
	command.addHelpChild(help, helpArg0);
	//plot chest <name>
	helpArg0 = command.newHelpLiteral("chest");
	helpArg1 = command.newHelpSpecial("Player", "player");
	command.addHelpChild(helpArg1, command.newHelpInt("id", 0, 10000));
	command.addHelpChild(helpArg0, helpArg1);
	command.addHelpChild(help, helpArg0);
	//plot sell <price>
	helpArg0 = command.newHelpLiteral("sell");
	command.addHelpChild(helpArg0, command.newHelpInt("price", 1, 10000));
	command.addHelpChild(help, helpArg0);
	//plot moreinfo
	command.addHelpChild(help, command.newHelpLiteral("moreinfo", "plot.moreinfo"));
	//plot listall
	command.addHelpChild(help, command.newHelpLiteral("listall"));
	//plot flags <int> <boolean>
	helpArg0 = command.newHelpLiteral("flags");
	helpArg1 = command.newHelpInt("int", 1, 1000);
	command.addHelpChild(helpArg1, command.newHelpBool("wusi"));
	command.addHelpChild(helpArg0, helpArg1);
	command.addHelpChild(help, helpArg0);
	//plot expand <anzahl>
	helpArg0 = command.newHelpLiteral("expand");
	helpArg1 = command.newHelpInt("anzahl", 1, 1000);
	helpArg3 = command.newHelpInt("id", 1, 10000);
	helpArg2 = command.newHelpLiteral("north");
	command.addHelpChild(helpArg2, helpArg3);
	command.addHelpChild(helpArg1, helpArg2);
	helpArg2 = command.newHelpLiteral("east");
	command.addHelpChild(helpArg2, helpArg3);
	command.addHelpChild(helpArg1, helpArg2);
	helpArg2 = command.newHelpLiteral("south");
	command.addHelpChild(helpArg2, helpArg3);
	command.addHelpChild(helpArg1, helpArg2);
	helpArg2 = command.newHelpLiteral("west");
	command.addHelpChild(helpArg2, helpArg3);
	command.addHelpChild(helpArg1, helpArg2);
	command.addHelpChild(helpArg0, helpArg1);
	command.addHelpChild(help, helpArg0);
	command.addHelp(help);
	commandhelp.addAlias(help, "p", "plot");
	
	help = command.newHelp("warp", "warp");
	//warp set [group] <name>
	helpArg0 = command.newHelpLiteral("set", "warp.create");
	command.addHelpChild(helpArg0, command.newHelpString("name", false, "warp.create"));
	helpArg1 = command.newHelpString("group", false, "warp.create");
	command.addHelpChild(helpArg1, command.newHelpString("name", false, "warp.create"));
	command.addHelpChild(helpArg0, helpArg1);
	command.addHelpChild(help, helpArg0);
	//warp delete [group] <name>
	helpArg0 = command.newHelpLiteral("delete", "warp.create");
	command.addHelpChild(helpArg0, command.newHelpString("name", false, "warp.create"));
	helpArg1 = command.newHelpString("group", false, "warp.create");
	command.addHelpChild(helpArg1, command.newHelpString("name", false, "warp.create"));
	command.addHelpChild(helpArg0, helpArg1);
	command.addHelpChild(help, helpArg0);
	//warp groups
	command.addHelpChild(help, command.newHelpLiteral("groups", "warp.create"));
	//warp list [group]
	helpArg0 = command.newHelpLiteral("list");
	command.addHelpChild(helpArg0, command.newHelpString("group", false, "warp.create"));
	command.addHelpChild(help, helpArg0);
	//warp [group] <name>
	helpArg0 = command.newHelpString("name", false);
	command.addHelpChild(help, helpArg0);
	helpArg0 = command.newHelpString("group", false, "warp.create");
	command.addHelpChild(helpArg0, command.newHelpString("name", false));
	command.addHelpChild(help, helpArg0);
	command.addHelp(help);
	
	help = command.newHelp("teleport", "teleport");
	helpArg0 = command.newHelpSpecial("Player", "player");
	command.addHelpChild(helpArg0, command.newHelpSpecial("Player", "to-player", "teleport.other"));
	command.addHelpChild(help, helpArg0);
	command.addHelp(help);
	commandhelp.addAlias(help, "tp", "teleport");
	
	help = command.newHelp("lastseen", "lastseen");
	command.addHelpChild(help, command.newHelpInt("amount", 1, 100));
	command.addHelp(help);
	
	help = command.newHelp("human", "human");
	//human spawn
	command.addHelpChild(help, command.newHelpLiteral("spawn"));
	//human set <name>
	helpArg0 = command.newHelpLiteral("set");
	command.addHelpChild(helpArg0, command.newHelpString("name", false));
	command.addHelpChild(help, helpArg0);
	//human setuuid <uuid>
	helpArg0 = command.newHelpLiteral("setuuid");
	command.addHelpChild(helpArg0, command.newHelpString("uuid", false));
	command.addHelpChild(help, helpArg0);
	//human name
	helpArg0 = command.newHelpLiteral("name");
	command.addHelpChild(helpArg0, command.newHelpString("name", true));
	command.addHelpChild(help, helpArg0);
	//human kill
	command.addHelpChild(help, command.newHelpLiteral("kill"));
	//human size <scale>
	helpArg0 = command.newHelpLiteral("size");
	command.addHelpChild(helpArg0, command.newHelpInt("scale", 0, 100));
	command.addHelpChild(help, helpArg0);
	//human steve
	command.addHelpChild(help, command.newHelpLiteral("steve"));
	//human alex
	command.addHelpChild(help, command.newHelpLiteral("alex"));
	//human statue
	helpArg0 = command.newHelpLiteral("statue");
	command.addHelpChild(helpArg0, command.newHelpBool("wusi"));
	command.addHelpChild(help, helpArg0);
	command.addHelp(help);
	
	help = command.newHelp("mail", "mail");
	//mail <player> <message>
	helpArg0 = command.newHelpSpecial("Player", "player");
	command.addHelpChild(helpArg0, command.newHelpString("message", true));
	command.addHelpChild(help, helpArg0);
	//mail new
	command.addHelpChild(help, command.newHelpLiteral("new"));
	//mail inbox
	command.addHelpChild(help, command.newHelpLiteral("inbox"));
	//mail outbox
	command.addHelpChild(help, command.newHelpLiteral("outbox"));
	//mail reset
	command.addHelpChild(help, command.newHelpLiteral("reset", "mail.reset"));
	command.addHelp(help);
	
	help = command.newHelp("entities", "entities");
	command.addHelpChild(help, command.newHelpString("world", false));
	command.addHelp(help);
	
	help = command.newHelp("playtime", "playtime");
	//playtime [player]
	command.addHelpChild(help, command.newHelpSpecial("Player", "player"));
	//playtime all
	command.addHelpChild(help, command.newHelpLiteral("all"));
	//playtime month [1-12] [year]
	helpArg0 = command.newHelpLiteral("month");
	helpArg1 = command.newHelpInt("int", 1, 12);
	command.addHelpChild(helpArg1, command.newHelpInt("year", 2019, 2024));
	command.addHelpChild(helpArg0, helpArg1);
	command.addHelpChild(help, helpArg0);
	//playtime year [year]
	helpArg0 = command.newHelpLiteral("year");
	command.addHelpChild(helpArg0, command.newHelpInt("year", 2019, 2024));
	command.addHelpChild(help, helpArg0);
	command.addHelp(help);
	
	help = command.newHelp("user", "user");
	command.addHelpChild(help, command.newHelpSpecial("Player", "player", "user.other"));
	command.addHelp(help);
	
	help = command.newHelp("skills", "skills");
	command.addHelpChild(help, command.newHelpSpecial("Player", "player", "user.other"));
	command.addHelp(help);
	
	help = command.newHelp("cli", "cli");
	command.addHelpChild(help, command.newHelpInt("int", 0, 1000));
	command.addHelp(help);
	
	help = command.newHelp("plant", "plant");
	command.addHelpChild(help, command.newHelpInt("int", 0, 1000));
	command.addHelp(help);
	
	help = command.newHelp("grow", "grow");
	command.addHelpChild(help, command.newHelpInt("int", 0, 1000));
	command.addHelp(help);
	
	help = command.newHelp("plough", "plough");
	command.addHelpChild(help, command.newHelpInt("int", 0, 1000));
	command.addHelp(help);
	
	help = command.newHelp("news", "news");
	command.addHelpChild(help, command.newHelpString("text", true));
	command.addHelp(help);
	
	help = command.newHelp("inv", "inv");
	//inv ignore
	command.addHelpChild(help, command.newHelpLiteral("ignore"));
	//inv see <player>
	helpArg0 = command.newHelpLiteral("see");
	command.addHelpChild(helpArg0, command.newHelpSpecial("Player", "player"));
	command.addHelpChild(help, helpArg0);
	//inv reload <player>
	helpArg0 = command.newHelpLiteral("reload");
	command.addHelpChild(helpArg0, command.newHelpSpecial("Player", "player"));
	command.addHelpChild(help, helpArg0);
	//inv loadFrom <player> <world>
	helpArg0 = command.newHelpLiteral("loadFrom");
	helpArg1 = command.newHelpSpecial("Player", "player");
	command.addHelpChild(helpArg1, command.newHelpString("world", false));
	command.addHelpChild(helpArg0, helpArg1);
	command.addHelpChild(help, helpArg0);
	//inv saveFor <player> <world>
	helpArg0 = command.newHelpLiteral("saveFor");
	helpArg1 = command.newHelpSpecial("Player", "player");
	command.addHelpChild(helpArg1, command.newHelpString("world", false));
	command.addHelpChild(helpArg0, helpArg1);
	command.addHelpChild(help, helpArg0);
	command.addHelp(help);
	
	help = command.newHelp("warn", "warn");
	command.addHelpChild(help, command.newHelpSpecial("Player", "player"));
	command.addHelp(help);
	
	help = command.newHelp("jail", "jail");
	command.addHelpChild(help, command.newHelpSpecial("Player", "player"));
	command.addHelp(help);
	
	help = command.newHelp("unjail", "unjail");
	command.addHelpChild(help, command.newHelpSpecial("Player", "player"));
	command.addHelp(help);
	
	help = command.newHelp("friend", "friend");
	//friend add <player>
	helpArg0 = command.newHelpLiteral("add");
	command.addHelpChild(helpArg0, command.newHelpSpecial("Player", "player"));
	command.addHelpChild(help, helpArg0);
	//friend remove <player>
	helpArg0 = command.newHelpLiteral("remove");
	command.addHelpChild(helpArg0, command.newHelpSpecial("Player", "player"));
	command.addHelpChild(help, helpArg0);
	//friend list
	command.addHelpChild(help, command.newHelpLiteral("list"));
	command.addHelp(help);
	commandhelp.addAlias(help, "f", "friend");
	
	help = command.newHelp("sign", "sign");
	helpArg0 = command.newHelpInt("1-4", 1, 4);
	command.addHelpChild(helpArg0, command.newHelpString("text", true));
	command.addHelpChild(help, helpArg0);
	command.addHelp(help);
	
	help = command.newHelp("speed", "speed");
	helpArg0 = command.newHelpInt("int", 1, 10);
	command.addHelpChild(helpArg0, command.newHelpSpecial("Player", "player", "speed.other"));
	command.addHelpChild(help, helpArg0);
	command.addHelp(help);
	
	help = command.newHelp("errordebug", "errordebug");
	command.addHelpChild(help, command.newHelpLiteral("list"));
	command.addHelpChild(help, command.newHelpLiteral("clear"));
	command.addHelpChild(help, command.newHelpLiteral("toggle"));
	command.addHelp(help);
	
	help = command.newHelp("error", "error");
	command.addHelpChild(help, command.newHelpLiteral("list"));
	command.addHelpChild(help, command.newHelpLiteral("clear"));
	command.addHelp(help);
	
	help = command.newHelp("mailbox", "mailbox");
	//mailbox show <player>
	helpArg0 = command.newHelpLiteral("show");
	command.addHelpChild(helpArg0, command.newHelpSpecial("Player", "player", "mailbox.other"));
	command.addHelpChild(help, helpArg0);
	//mailbox send <player>
	helpArg0 = command.newHelpLiteral("send");
	command.addHelpChild(helpArg0, command.newHelpSpecial("Player", "player"));
	command.addHelpChild(help, helpArg0);
	command.addHelp(help);
	
	help = command.newHelp("world", "world");
	//world info
	command.addHelpChild(help, command.newHelpLiteral("info"));
	//world tp <world> [player]
	helpArg0 = command.newHelpLiteral("tp");
	helpArg1 = command.newHelpString("world", false);
	command.addHelpChild(helpArg1, command.newHelpSpecial("Player", "player"));
	command.addHelpChild(helpArg0, helpArg1);
	command.addHelpChild(help, helpArg0);
	//world list
	command.addHelpChild(help, command.newHelpLiteral("list"));
	//world diffi <world> <diffi>
	helpArg0 = command.newHelpLiteral("diffi");
	helpArg1 = command.newHelpString("world", false);
	command.addHelpChild(helpArg1, command.newHelpLiteral("PEACEFUL"));
	command.addHelpChild(helpArg1, command.newHelpLiteral("EASY"));
	command.addHelpChild(helpArg1, command.newHelpLiteral("NORMAL"));
	command.addHelpChild(helpArg1, command.newHelpLiteral("HARD"));
	command.addHelpChild(helpArg0, helpArg1);
	command.addHelpChild(help, helpArg0);
	//world setspawn
	helpArg0 = command.newHelpLiteral("setspawn");
	command.addHelpChild(help, helpArg0);
	command.addHelp(help);
	
	help = command.newHelp("quest", "quest");
	//quest see
	command.addHelpChild(help, command.newHelpLiteral("see"));
	//quest term <player>
	helpArg0 = command.newHelpLiteral("term");
	command.addHelpChild(helpArg0, command.newHelpSpecial("Player", "player"));
	command.addHelpChild(help, helpArg0);
	command.addHelp(help);
	
	help = command.newHelp("pvp", "pvp");
	helpArg0 = command.newHelpLiteral("on");
	command.addHelpChild(helpArg0, command.newHelpSpecial("Player", "player", "pvp.other"));
	command.addHelpChild(help, helpArg0);
	helpArg0 = command.newHelpLiteral("off");
	command.addHelpChild(helpArg0, command.newHelpSpecial("Player", "player", "pvp.other"));
	command.addHelpChild(help, helpArg0);
	command.addHelp(help);
	
	help = command.newHelp("game", "game");
	command.addHelpChild(help, command.newHelpLiteral("open"));
	command.addHelpChild(help, command.newHelpLiteral("close"));
	command.addHelp(help);
	
	help = command.newHelp("party", "party");
	//party invite <player>
	helpArg0 = command.newHelpLiteral("invite");
	command.addHelpChild(helpArg0, command.newHelpSpecial("Player", "player"));
	command.addHelpChild(help, helpArg0);
	//party accept <player>
	helpArg0 = command.newHelpLiteral("accept");
	command.addHelpChild(helpArg0, command.newHelpSpecial("Player", "player"));
	command.addHelpChild(help, helpArg0);
	//party deny <player>
	helpArg0 = command.newHelpLiteral("deny");
	command.addHelpChild(helpArg0, command.newHelpSpecial("Player", "player"));
	command.addHelpChild(help, helpArg0);
	//party kick <player>
	helpArg0 = command.newHelpLiteral("kick");
	command.addHelpChild(helpArg0, command.newHelpSpecial("Player", "player"));
	command.addHelpChild(help, helpArg0);
	//party leave
	command.addHelpChild(help, command.newHelpLiteral("leave"));
	//party promote <player>
	helpArg0 = command.newHelpLiteral("promote");
	command.addHelpChild(helpArg0, command.newHelpSpecial("Player", "player"));
	command.addHelpChild(help, helpArg0);
	//party demote <player>
	helpArg0 = command.newHelpLiteral("demote");
	command.addHelpChild(helpArg0, command.newHelpSpecial("Player", "player"));
	command.addHelpChild(help, helpArg0);
	//party disband
	command.addHelpChild(help, command.newHelpLiteral("disband"));
	//party list
	command.addHelpChild(help, command.newHelpLiteral("list"));
	command.addHelp(help);
	
	help = command.newHelp("var", "var");
	helpArg0 = command.newHelpInt("id", 0, 1000000);
	command.addHelpChild(helpArg0, command.newHelpString("varname", false));
	command.addHelpChild(help, helpArg0);
	command.addHelp(help);
	
	help = command.newHelp("setservermessage", "setservermessage");
	command.addHelpChild(help, command.newHelpString("message", true));
	command.addHelp(help);
	
	help = command.newHelp("clan", "clan");
	//clan invite <name>
	helpArg0 = command.newHelpLiteral("invite");
	command.addHelpChild(helpArg0, command.newHelpSpecial("Player", "player"));
	command.addHelpChild(help, helpArg0);
	//clan accept <id/name/tag>
	helpArg0 = command.newHelpLiteral("invite");
	command.addHelpChild(helpArg0, command.newHelpInt("id", 1, 500));
	command.addHelpChild(helpArg0, command.newHelpString("name", false));
	command.addHelpChild(helpArg0, command.newHelpString("tag", false));
	command.addHelpChild(help, helpArg0);
	//clan info [id/name/tag]
	helpArg0 = command.newHelpLiteral("info");
	command.addHelpChild(helpArg0, command.newHelpInt("id", 1, 500));
	command.addHelpChild(helpArg0, command.newHelpString("name", false));
	command.addHelpChild(helpArg0, command.newHelpString("tag", false));
	command.addHelpChild(help, helpArg0);
	//clan create <name> <tag>
	helpArg0 = command.newHelpLiteral("create");
	helpArg1 = command.newHelpString("name", false);
	command.addHelpChild(helpArg1, command.newHelpString("false", false));
	command.addHelpChild(helpArg0, helpArg1);
	command.addHelpChild(help, helpArg0);
	//clan kick <name>
	helpArg0 = command.newHelpLiteral("kick");
	command.addHelpChild(helpArg0, command.newHelpSpecial("Player", "player"));
	command.addHelpChild(help, helpArg0);
	//clan leader <name>
	helpArg0 = command.newHelpLiteral("leader");
	command.addHelpChild(helpArg0, command.newHelpSpecial("Player", "player"));
	command.addHelpChild(help, helpArg0);
	//clan mod <name>
	helpArg0 = command.newHelpLiteral("mod");
	command.addHelpChild(helpArg0, command.newHelpSpecial("Player", "player"));
	command.addHelpChild(help, helpArg0);
	//clan degrade <name>
	helpArg0 = command.newHelpLiteral("degrade");
	command.addHelpChild(helpArg0, command.newHelpSpecial("Player", "player"));
	command.addHelpChild(help, helpArg0);
	//clan leave
	command.addHelpChild(help, command.newHelpLiteral("leave"));
	//clan rename <name> <tag>
	helpArg0 = command.newHelpLiteral("rename");
	helpArg1 = command.newHelpString("name", false);
	command.addHelpChild(helpArg1, command.newHelpString("false", false));
	command.addHelpChild(helpArg0, helpArg1);
	command.addHelpChild(help, helpArg0);
	//clan disband
	command.addHelpChild(help, command.newHelpLiteral("disband"));
	//clan msg <message>
	helpArg0 = command.newHelpLiteral("msg");
	command.addHelpChild(helpArg0, command.newHelpString("message", true));
	command.addHelpChild(help, helpArg0);
	//clan mail <message>
	helpArg0 = command.newHelpLiteral("mail");
	command.addHelpChild(helpArg0, command.newHelpString("message", true));
	command.addHelpChild(help, helpArg0);
	//clan shout <message>
	helpArg0 = command.newHelpLiteral("shout");
	command.addHelpChild(helpArg0, command.newHelpString("message", true));
	command.addHelpChild(help, helpArg0);
	//clan deposit <money>
	helpArg0 = command.newHelpLiteral("deposit");
	command.addHelpChild(helpArg0, command.newHelpInt("money", 0, 1000));
	command.addHelpChild(help, helpArg0);
	//clan withdraw <money>
	helpArg0 = command.newHelpLiteral("withdraw");
	command.addHelpChild(helpArg0, command.newHelpInt("money", 0, 1000));
	command.addHelpChild(help, helpArg0);
	//clan party
	command.addHelpChild(help, command.newHelpLiteral("party"));
	//clan setspawn
	command.addHelpChild(help, command.newHelpLiteral("setspawn"));
	//clan spawn
	command.addHelpChild(help, command.newHelpLiteral("spawn"));
	//clan list
	command.addHelpChild(help, command.newHelpLiteral("list"));
	command.addHelp(help);
	
	help = command.newHelp("shop", "shop");
	//shop create
	command.addHelpChild(help, command.newHelpLiteral("create"));
	//shop admin
	command.addHelpChild(help, command.newHelpLiteral("admin"));
	//shop remove
	helpArg0 = command.newHelpLiteral("remove");
	command.addHelpChild(helpArg0, command.newHelpLiteral("buy"));
	command.addHelpChild(helpArg0, command.newHelpLiteral("sell"));
	command.addHelpChild(help, helpArg0);
	//shop buy <amount> <price>
	helpArg0 = command.newHelpLiteral("buy");
	helpArg1 = command.newHelpInt("amount", 0, 1000);
	command.addHelpChild(helpArg1, command.newHelpInt("price", 0, 10000));
	command.addHelpChild(helpArg0, helpArg1);
	command.addHelpChild(help, helpArg0);
	//shop sell <amount> <price>
	helpArg0 = command.newHelpLiteral("sell");
	helpArg1 = command.newHelpInt("amount", 0, 1000);
	command.addHelpChild(helpArg1, command.newHelpInt("price", 0, 10000));
	command.addHelpChild(helpArg0, helpArg1);
	command.addHelpChild(help, helpArg0);
	command.addHelp(help);
	
	help = command.newHelp("setmessage", "setmessage");
	//setmessage info
	command.addHelpChild(help, command.newHelpLiteral("info"));
	//setmessage join <message>
	helpArg0 = command.newHelpLiteral("join");
	command.addHelpChild(helpArg0, command.newHelpString("message", true));
	command.addHelpChild(help, helpArg0);
	//setmessage leave <message>
	helpArg0 = command.newHelpLiteral("leave");
	command.addHelpChild(helpArg0, command.newHelpString("message", true));
	command.addHelpChild(help, helpArg0);
	//setmessage delete <player>
	helpArg0 = command.newHelpLiteral("delete");
	command.addHelpChild(helpArg0, command.newHelpSpecial("Player", "player", "setmessage.delete"));
	command.addHelpChild(help, helpArg0);
	command.addHelp(help);
	
	help = command.newHelp("tip", "tip");
	//tipp list
	helpArg0 = command.newHelpLiteral("list");
	command.addHelpChild(help, helpArg0);
	//tipp add <tipp> <text>
	helpArg0 = command.newHelpLiteral("add");
	helpArg1 = command.newHelpString("tip", false);
	command.addHelpChild(helpArg1, command.newHelpString("text", true));
	command.addHelpChild(helpArg0, helpArg1);
	command.addHelpChild(help, helpArg0);
	//tipp remove <tipp>
	helpArg0 = command.newHelpLiteral("remove");
	command.addHelpChild(helpArg0, command.newHelpString("tip", false));
	command.addHelpChild(help, helpArg0);
	//tipp <tipp> [player]
	helpArg0 = command.newHelpString("tip", false);
	command.addHelpChild(helpArg0, command.newHelpSpecial("Player", "player"));
	command.addHelpChild(help, helpArg0);
	//tipp loop <tip> <boolean>
	helpArg0 = command.newHelpLiteral("loop");
	helpArg1 = command.newHelpString("tip", false);
	command.addHelpChild(helpArg1, command.newHelpBool("wusi"));
	command.addHelpChild(helpArg0, helpArg1);
	command.addHelpChild(help, helpArg0);
	command.addHelp(help);
	
	help = command.newHelp("ticket", "ticket");
	//ticket new <message>
	helpArg0 = command.newHelpLiteral("new");
	command.addHelpChild(helpArg0, command.newHelpString("message", true));
	command.addHelpChild(help, helpArg0);
	//ticket stop <ticket-id>
	helpArg0 = command.newHelpLiteral("stop");
	command.addHelpChild(helpArg0, command.newHelpInt("ticket-id", 1, 1000));
	command.addHelpChild(help, helpArg0);
	//ticket list
	command.addHelpChild(help, command.newHelpLiteral("list", "isSupporter"));
	//ticket get [ticket-id]
	helpArg0 = command.newHelpLiteral("get");
	command.addHelpChild(helpArg0, command.newHelpInt("ticket-id", 1, 1000, "isSupporter"));
	command.addHelpChild(help, helpArg0);
	//ticket finish <ticket-id>
	helpArg0 = command.newHelpLiteral("finish");
	command.addHelpChild(helpArg0, command.newHelpInt("ticket-id", 1, 1000, "isSupporter"));
	command.addHelpChild(help, helpArg0);
	//ticket release <ticket-id>
	helpArg0 = command.newHelpLiteral("release");
	command.addHelpChild(helpArg0, command.newHelpInt("ticket-id", 1, 1000, "isSupporter"));
	command.addHelpChild(help, helpArg0);
	//ticket report <ticket-id>
	helpArg0 = command.newHelpLiteral("report");
	command.addHelpChild(helpArg0, command.newHelpInt("ticket-id", 1, 1000, "isSupporter"));
	command.addHelpChild(help, helpArg0);
	command.addHelp(help);
	
	help = command.newHelp("yeet", "yeet");
	command.addHelpChild(help, command.newHelpInt("strength", 1, 10000000000000));
	command.addHelp(help);
	
	command.sendHelp();
}

function commandhelp.add(command) {
	help = command.newHelp(command, command);
	command.addHelp(help);
	return help;
}

function commandhelp.addChildString(command, arg0, bool) {
	help = command.newHelp(command, command);
	command.addHelpChild(help, command.newHelpString(arg0, bool));
	command.addHelp(help);
}

function commandhelp.addChildPlayer(command) {
	help = command.newHelp(command, command);
	command.addHelpChild(help, command.newHelpSpecial("Player", "player"));
	command.addHelp(help);
}

function commandhelp.addChildBool(command, arg0) {
	help = command.newHelp(command, command);
	command.addHelpChild(help, command.newHelpBool(arg0));
	command.addHelp(help);
}

function commandhelp.addAlias(help, alias, command) {
	helpAlias = command.newHelp(alias, command);
	command.addHelpAlias(helpAlias, help);
	command.addHelp(helpAlias);
}

function addStatsGameHelp(help, game) {
	helpArg0 = command.newHelpLiteral(game);
	command.addHelpChild(helpArg0, command.newHelpLiteral("top"));
	command.addHelpChild(helpArg0, command.newHelpInt("rank", 1, 1000));
	helpArg1 = command.newHelpSpecial("Player", "player");
	command.addHelpChild(helpArg1, command.newHelpLiteral("remove", "stats.remove"));
	command.addHelpChild(helpArg0, helpArg1);
	command.addHelpChild(help, helpArg0);
}

function addDtAttributeAttributHelp(attribut) {
	helpArg1 = command.newHelpLiteral(attribut);
	command.addHelpChild(helpArg1, addDtAttributeSlotHelp("mainhand"));
	command.addHelpChild(helpArg1, addDtAttributeSlotHelp("offhand"));
	command.addHelpChild(helpArg1, addDtAttributeSlotHelp("head"));
	command.addHelpChild(helpArg1, addDtAttributeSlotHelp("chest"));
	command.addHelpChild(helpArg1, addDtAttributeSlotHelp("legs"));
	command.addHelpChild(helpArg1, addDtAttributeSlotHelp("feet"));
	return helpArg1;
}

function addDtAttributeSlotHelp(slot) {
	helpArg2 = command.newHelpLiteral(slot);
	helpArg3 = command.newHelpInt("double", 0, 1000);
	command.addHelpChild(helpArg3, command.newHelpLiteral("ADDITION"));
	command.addHelpChild(helpArg3, command.newHelpLiteral("MULTIPLY_BASE"));
	command.addHelpChild(helpArg3, command.newHelpLiteral("MULTIPLY_TOTAL"));
	command.addHelpChild(helpArg2, helpArg3);
	return helpArg2;
}

function showJail(player_name) {
	if(isOnline(player_name)) {
		inv.open($jailmenu, read.player(player_name));
	}
}

function isJailed(player_uuid) {
	return(list.contains($jailed_list, player_uuid));
}

function command.register(command, description) {
	command.add(command);
	list.add($command_list, command);
	map.add($command_map, command, description);
}

function command.registerAlias(alias, command) {
	command.add(alias);
	map.add($alias_map, alias, command);
}

//--------------------------------------------------
//Time-Utils
//--------------------------------------------------

//Spielzeit aller Online-Spieler
function playtime.getTotalOnlineMinutes() {
	minutes = 0;
	iter = list.iterator(players.toList());
	while(hasNext(iter)) {
		minutes += playtime.getPlayerOnlineMinutes(player.getId(next(iter)));
	}
	return minutes;
}

//Spielzeit in einem Zeitraum exkl. der Spielzeit der Online-Spieler
function playtime.getInterval(from, to) {
	stmt = databank.prepare("SELECT SUM(leave_time - join_time) FROM playtime WHERE join_time > ? AND join_time < ?;");
	databank.setLong(stmt, 1, from);
	databank.setLong(stmt, 2, to);
	result = databank.execute(stmt);
	if(databank.next(result)) {
		minutes = databank.getLong(result, 1) / 1000 / 60;
	} else {
		minutes = 0;
	}
	databank.close(result);
	databank.close(stmt);
	return minutes;
}

//Gesamte Spielzeit inkl. der Spielzeit der Online-Spieler
function playtime.getTotal() {
	minutes = playtime.getTotalOnlineMinutes();
	stmt = databank.prepare("SELECT SUM(leave_time - join_time) FROM playtime;");
	result = databank.execute(stmt);
	if(databank.next(result)) {
		minutes += databank.getLong(result, 1) / 1000 / 60;
	}
	databank.close(result);
	databank.close(stmt);
	return minutes;
}

//Spielzeit eines Spielers in einem Zeitraum exkl. der Online-Spielzeit
function playtime.getPlayerInterval(player_id, from, to) {
	stmt = databank.prepare("SELECT SUM(leave_time - join_time) FROM playtime WHERE player_id = ? AND join_time > ? AND join_time < ?;");
	databank.setInt(stmt, 1, player_id);
	databank.setLong(stmt, 2, from);
	databank.setLong(stmt, 3, to);
	result = databank.execute(stmt);
	if(databank.next(result)) {
		minutes = databank.getLong(result, 1) / 1000 / 60;
	} else {
		minutes = 0;
	}
	databank.close(result);
	databank.close(stmt);
	return minutes;
}

function playtime.getPlayersPerInterval(from, to) {
	set = set.new();
	stmt = databank.prepare("SELECT player_id FROM playtime WHERE join_time > ? AND join_time < ?;");
	databank.setLong(stmt, 1, from);
	databank.setLong(stmt, 2, to);
	result = databank.execute(stmt);
	while(databank.next(result)) {
		set.add(set, databank.getInt(result, 1));
	}
	databank.close(result);
	databank.close(stmt);
	return set.getSize(set);
}

function time.getYearDays(year) {
	days = 365;
	if(year % 4 == 0) {
		days++;
	}
	return days;
}

function time.getMonthDays(month, year) {
	days = month.getDays(month);
	//Schaltjahre
	if(month == 2 && year % 4 == 0) {
		days++;
	}
	return days;
}

function time.getDaysBetween(day1, month1, year1, day2, month2, year2) {
	d_days = 0;
	m_days = 0;
	y_days = 0;
	y = 0;
	m = 0;
	d = 0;
	//Volle Jahre
	for(year = year1 + 1; year < year2; year++) {
		y_days += time.getYearDays(year);
		y++;
	}
	if(year1 == year2) {
		//Volle Monate
		for(month = month1 + 1; month < month2; month++) {
			m_days += time.getMonthDays(month, year1);
		}
		//Volle Tage
		if(month1 == month2) {
			d_days = day2 - day1;
		} else {
			d_days += month.getDays(month1) - day1;
			d_days += day2;
		}
	} else {
		//Volle Monate
		for(month = month1 + 1; month < 13; month++) {
			m_days += time.getMonthDays(month, year1);
			m++;
		}
		for(month = 1; month < month2; month++) {
			m_days += time.getMonthDays(month, year2);
			m++;
		}
		//Volle Tage
		d_days += month.getDays(month1) - day1;
		d_days += day2;
	}
	return y_days + m_days + d_days;
}

function month.add(month_index, shortname, days) {
	$month_array[month_index, 0] = shortname;
	$month_array[month_index, 1] = days;
}

function month.getShortName(month) {
	return $month_array[month - 1, 0];
}

function month.getDays(month) {
	return $month_array[month - 1, 1];
}

//--------------------------------------------------
//Player-Utils
//--------------------------------------------------

function player.hasClanInvitation(player_or_id, clan_id) {
	if(isPlayer(player_or_id)) {
		player_id = player.getId(player_or_id);
	} else {
		player_id = player_or_id;
	}
	iter = list.iterator($clan_invitations);
	while(hasNext(iter)) {
		invitation = next(iter);
		p_id = invitation[0];
		c_id = invitation[1];
		if(player_id == p_id && clan_id == c_id) {
			return true;
		}
	}
	return false;
}

function player.addClanInvitation(player_id, clan_id) {
	invitation = array.new(2);
	invitation[0] = player_id;
	invitation[1] = clan_id;
	list.add($clan_invitations, invitation);
}

//--------------------------------------------------
//Party-Utils
//--------------------------------------------------

function party.invitePlayer(inviter, invitee) {
	//Wenn bereits ein Party besteht, diese Party-ID verwenden.
	//Ansonsten überprüfen, ob der Einlader bereits andere Spieler eingeladen hat. Dann diese Party-ID verwenden.
	//Ansonsten neue Party-ID vergeben.
	inviter_uuid = player.getUuid(inviter);
	if(player.isInParty(inviter)) {
		party_id = player.getPartyId(inviter);
	} else {
		party_id = map.get($party_invite_ids, inviter_uuid);
		if(party_id == null) {
			party_id = ++$party_counter;
		}
	}
	if(invitee == null) {
		return "inviteeNotOnline";
	}
	if(inviter == invitee) {
		return "inviterEqualsInvitee";
	}
	if(player.isInParty(inviter)) {
		if(!player.isPartyLeaderOrMod(inviter)) {
			return "inviterNotPermitted";
		}
	}
	if(player.isInParty(invitee)) {
		return "inviteeAlreadyInParty";
	}
	invitee_uuid = player.getUuid(invitee);
	list = map.get($party_invitations, invitee_uuid);
	if(list == null) {
		list = list.new();
		map.add($party_invitations, invitee_uuid, list);
	}
	if(list.contains(list, inviter_uuid)) {
		return "inviteeAlreadyInvited";
	}
	list.add(list, inviter_uuid);
	list.add($deluuid, inviter_uuid);
	list.add($delkeytime, time.getMillis());
	list = map.get($delkeytimes, invitee_uuid);
	if(list == null) {
		list = list.new();
		map.add($delkeytimes, invitee_uuid, list);
	}
	list.add(list, time.getMillis());
	map.add($party_invite_ids, inviter_uuid, party_id);
	inviter_name = player.getName(inviter);
	msg.prefix(invitee, $prefix_party, concat(inviter_name, " invites you to a party."));
	msg.text(invitee, " §5=> §rAccept ? ", text.click("[§aYes§r] ", concat("/party accept ", inviter_name)), text.click("[§cNo§r]", concat("/party deny ", inviter_name)));
	sgoto(200, "deletePartyInvitation"); //Einladung bleibt 1 Minute lang erhalten
	return true;
}

function party.kickPlayer(player, reason) {
	party_id = player.getPartyId(player);
	//Nachrichten
	player_name = player.getName(player);
	if(reason == "kick") {
		message = concat("§r", player_name, " has been kicked out of the party.");
	} else {
		message = concat("§r", player_name, " has left the party.");
	}
	party.sendMessage(party_id, message);
	player_uuid = player.getUuid(player_name);
	//aus Partyliste entfernen
	party_list = party.getList(party_id);
	list.remove(party_list, player_uuid);
	//ID und Rang entfernen
	rank = player.getPartyRank(player);
	player.delPartyRank(player);
	player.delPartyId(player);
	//Einladungen löschen
	map.remove($party_invitations, player_uuid);
	map.remove($delkeytimes, player_uuid);
	//Wenn Party keine zwei Spieler mehr hat, dann Party auflösen
	if(list.getSize(party_list) < 2) {
		party.delete(party_id);
		return;
	}
	//Wenn Spieler Partyleiter war, neuen Partyleiter ernennen
	if(rank == "Leader") {
		new_player = player.get(list.getIndex(party_list, 0));
		player.setPartyRank(new_player, "Leader");
		party.sendMessage(party_id, concat("§r", player.getName(new_player), " is now Leader."));
	}
}

function party.sendMessage(party_id, message) {
	iter = list.iterator(party.getList(party_id));
	while(hasNext(iter)) {
		msg.prefix(player.get(next(iter)), $prefix_party, message);
	}
}

function party.delete(party_id) {
	party.sendMessage(party_id, "Party disbanded.");
	iter = list.iterator(party.getList(party_id));
	while(hasNext(iter)) {
		player = player.get(next(iter));
		player.delPartyRank(player);
		player.delPartyId(player);
	}
}

@deletePartyInvitation
player_uuid = list.getIndex(deluuid, 0);
invitations = map.get(party_invitations, player_uuid);
keytimes = map.get(delkeytimes, player_uuid);
if(invitations != null) {
	if(list.getSize(invitations) != 0) {
		keytime = list.getIndex(delkeytime, 0);
		keytime2 = list.getIndex(keytimes, 0);
		list.remove(delkeytime, keytime);
		if(keytime == keytime2) {
			index = list.getIndexOf(keytimes, keytime2);
			list.remove(keytimes, keytime2);
			list.removeIndex(invitations, index);
		}
	}
}
goto("wait");

//--------------------------------------------------
//Plot-Utils
//--------------------------------------------------

function plot.registerMoveEvents(world) {
	iter = plot.iterator(world);
	while(hasNext(iter)) {
		plot = next(iter);
		if(plot.isCity(plot) || plot.isPlot(plot)) {
			plot.setMoveEvent(plot, world);
		}
	}
}

function plot.delMoveEvent(plot) {
	plot_id = plot.getId(plot);
	for(i = 0; i < list.getSize($plot_move_ids_list); i++) {
		a = list.getIndex($plot_move_ids_list, i);
		if(a[1] == plot_id) {
			event.removeMoveData(a[0]);
			list.removeIndex($plot_move_ids_list, i);
			break;
		}
	}
}

function plot.setMoveEvent(plot, world) {
	x1 = plot.getMinX(plot);
	y1 = plot.getMinY(plot);
	z1 = plot.getMinZ(plot);
	x2 = plot.getMaxX(plot);
	y2 = plot.getMaxY(plot);
	z2 = plot.getMaxZ(plot);
	loc1 = loc.new(world, x1, y1, z1);
	loc2 = loc.new(world, x2, y2, z2);
	move_id = event.addMoveData(loc1, loc2, 100, -1);
	plot_id = plot.getId(plot);
	a = array.new(2);
	a[0] = move_id;
	a[1] = plot_id;
	list.add($plot_move_ids_list, a);
}

function plot.getPlotIdFromMoveId(move_id) {
	iter = list.iterator($plot_move_ids_list);
	while(hasNext(iter)) {
		a = next(iter);
		if(a[0] == move_id) {
			return a[1];
		}
	}
	return null;
}

function plot.getMoveIdFromPlotId(plot_id) {
	iter = list.iterator($plot_move_ids_list);
	while(hasNext(iter)) {
		a = next(iter);
		if(a[1] == plot_id) {
			return a[0];
		}
	}
	return null;
}

@checkForPlot
player_uuid = list.getIndex(check_for_plot_list, 0);
list.removeIndex(check_for_plot_list, 0);
player = player.get(player_uuid);
if(player == null) {
	map.remove(actual_move_id, player_uuid);
	goto("wait");
}
player_loc = entity.getLocation(player);
plot_list = plot.get(player_loc);
if(list.getSize(plot_list) == 0) {
	map.remove(actual_move_id, player_uuid);
} else {
	list.add(check_for_plot_list, player_uuid);
	sgoto(100, "checkForPlot");
}
goto("wait");

function tpBottom(player) {
	player_loc = entity.getLocation(player);
	y = loc.getY(player_loc);
	while(y > 0 && block.isAir(player_loc)) {
		loc.setY(player_loc, y);
		y--;
	}
	if(y <= 0) {
		return;
	}
	loc.addY(player_loc, 1);
	entity.teleport(player, player_loc);
}

//--------------------------------------------------
//Hawkeye-Utils
//--------------------------------------------------

function hawkeye.getStartIndices(string) {
	a = array.new(5);
	a[0] = text.indexOf(string, "e:", 0);
	a[1] = text.indexOf(string, "p:", 0);
	a[2] = text.indexOf(string, "r:", 0);
	a[3] = text.indexOf(string, "t:", 0);
	a[4] = text.length(string);
	a = array.sort(a, true);
	return a;
}

function hawkeye.getParStrings(string, indices) {
	index = 0;
	while(indices[index] == -1) {
		index++;
	}
	start_index = indices[index];
	if(start_index != 0) {
		return null;
	}
	l = list.new();
	while(++index < 5) {
		next_index = indices[index];
		if(index == 4) {
			next_index++;
		}
		par_str = text.trim(text.subString(string, start_index, next_index - 1));
		if(text.length(par_str) < 3) {
			return null;
		}
		list.add(l, par_str);
		start_index = next_index;
	}
	return l;
}

function hawkeye.processInput(args, player) {
	string = text.concatList(args, " ", 1, list.getSize(args) - 1);
	indices = hawkeye.getStartIndices(string);
	par_strings = hawkeye.getParStrings(string, indices);
	if(par_strings == null) {
		return "False input parameters";
	}
	first_letters = set.new();
	iter = list.iterator(par_strings);
	while(hasNext(iter)) {
		par_str = next(iter);
		first_letter = text.subString(par_str, 0, 1);
		if(set.contains(first_letters, first_letter)) {
			return "Twice input parameters";
		}
		set.add(first_letters, first_letter);
		par_str = text.subString(par_str, 2, text.length(par_str));
		args_par_str = text.split(",", par_str);
		
		if(first_letter == "e") {
			events = list.new();
			iter_args = list.iterator(args_par_str);
			while(hasNext(iter_args)) {
				list.add(events, next(iter_args));
			}
		}
		elseif(first_letter == "p") {
			players = list.new();
			iter_args = list.iterator(args_par_str);
			while(hasNext(iter_args)) {
				list.add(players, next(iter_args));
			}
		}
		elseif(first_letter == "r") {
			if(list.getSize(args_par_str) > 1) {
				return "False input at r:";
			}
			radius = list.getIndex(args_par_str, 0);
			if(!isDouble(radius)) {
				return "False input at r:";
			}
		}
		elseif(first_letter == "t") {
			if(list.getSize(args_par_str) > 3) {
				return "False input at t:";
			}
			if(text.contains(par_str, "d")) {
				d = true;
			} else {
				d = false;
			}
			time_span = 0;
			iter_args = list.iterator(args_par_str);
			while(hasNext(iter_args)) {
				arg = next(iter_args);
				if(text.contains(arg, "m")) {
					minutes = text.convert(text.replace(arg, "m", ""));
					if(!isDouble(minutes)) {
						return "False input at t:";
					}
					time_span += minutes * 60;
				}
				elseif(text.contains(arg, "h")) {
					hours = text.convert(text.replace(arg, "h", ""));
					if(!isDouble(hours)) {
						return "False input at t:";
					}
					time_span += hours * 60 * 60;
				} else {
					if(d) {
						days = arg;
						if(!isDouble(days)) {
							return "False input at t:";
						}
						time_span += days * 24 * 60 * 60;
					} else {
						return "False input at t:";
					}
				}
			}
			timeTo = time.getMillis();
			timeFrom = timeTo - time_span * 1000;
		}
	}
	a = array.new(6);
	a[0] = timeFrom;
	a[1] = timeTo;
	a[2] = entity.getLocation(player);
	a[3] = radius;
	a[4] = events;
	a[5] = players;
	return a;
}

function hawkeye.getAmountOfAll() {
	stmt = databank.prepare("SELECT COUNT(*) FROM hawkeye;");
	result = databank.execute(stmt);
	if(databank.next(result)) {
		amount = databank.getInt(result, 1);
	} else {
		amount = 0;
	}
	databank.close(result);
	databank.close(stmt);
	return amount;
}

function hawkeye.getEventName(event_id) {
	return map.get($event_map, event_id);
}

//--------------------------------------------------
//Mailbox-Utils
//--------------------------------------------------

function mailbox.setItem(player_id, index, item) {
	pfad = "scripts/configs/inv_data/mailbox";
	config = config.new(pfad, player_id);
	if(config.exists(config)) {
		config.load(config);
	}
	item_string = text.item(item);
	config.set(config, concat("item-", text.number(index)), item_string);
	config.saveAsync(config);
}

function mailbox.getFreeIndex(player_id) {
	pfad = "scripts/configs/inv_data/mailbox";
	config = config.new(pfad, player_id);
	if(config.exists(config)) {
		config.load(config);
	}
	for(i = 0; i < 27; i++) {
		item_string = config.getString(config, concat("item-", text.number(i)), "minecraft:air");
		if(item_string == "minecraft:air") {
			return i;
		}
	}
	return -1;
}

function mailbox.show(to_player, player_id) {
	pfad = "scripts/configs/inv_data/mailbox";
	config = config.new(pfad, player_id);
	if(config.exists(config)) {
		config.load(config);
	}
	inv = inv.new("333333333333333333333333333");
	for(i = 0; i < 27; i++) {
		item_string = config.getString(config, concat("item-", text.number(i)), "minecraft:air");
		item = read.item(item_string);
		if(item == null) {
			continue;
		}
		inv.setItem(inv, i, item);
	}
	inv.open(inv, to_player, concat("Mailbox from ", player.getNameFromId(player_id)));
}

function updateVoteInv() {
	//inv.setItem($vote_inv, 2, read.item("km:skill20", 1, "§aMore Homes", "§fCost: §e1 VP", concat("§fCounter: §e", text.number(getHomeBoost())), "Every 20 VP the possible homes increase by one. Counter automatically shrinks by one every day."));
}

function getAdditionalVoteHomes() {
	return math.roundDown(getHomeBoost() / 20);
}

function getHomeBoost() {
	config = getScriptVar("server_config");
	return config.getDouble(config, "homeBoostPoints", 0);

}

function increaseHomeBoost() {
	config = getScriptVar("server_config");
	points = config.getDouble(config, "homeBoostPoints", 0) + 1;
	config.set(config, "homeBoostPoints", points);
	config.saveAsync(config);
	updateVoteInv();
}

function decreaseHomeBoost() {
	config = getScriptVar("server_config");
	points = config.getDouble(config, "homeBoostPoints", 0) - 1;
	if(points < 0) {
		points = 0;
	}
	config.set(config, "homeBoostPoints", points);
	config.saveAsync(config);
	updateVoteInv();
}